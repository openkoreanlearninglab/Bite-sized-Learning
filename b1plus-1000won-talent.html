<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëˆ„êµ¬ì—ê²Œë‚˜ 1000ì›ì˜ ì¬ëŠ¥ì€ ìˆë‹¤?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&family=IBM+Plex+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* ê¸°ë³¸ í°íŠ¸ ì„¤ì • */
        body { font-family: 'Nanum Gothic', sans-serif; }
        /* ì–´íœ˜ ëª©ë¡ ì‚¬ì´ë“œë°” í°íŠ¸ */
        .vocab-sidebar { font-family: 'IBM Plex Sans KR', sans-serif; }
        /* ì–´íœ˜ íŒì—… ìŠ¤íƒ€ì¼ */
        .vocab-popup { font-family: 'Nanum Gothic', sans-serif; z-index: 50; max-width: 320px; white-space: normal; }
        /* í˜¸ë²„ íˆ´íŒ ìŠ¤íƒ€ì¼ */
        .hover-tooltip { position: fixed; z-index: 9999; background: white; border: 2px solid #22c55e; border-radius: 8px; padding: 12px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); max-width: 320px; font-family: 'Nanum Gothic', sans-serif; animation: fadeIn 0.15s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
        
        /* ì†ë„ ì¡°ì ˆ ìŠ¬ë¼ì´ë” ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ */
        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #22c55e;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.15);
            box-shadow: 0 3px 6px rgba(0,0,0,0.3);
        }
        input[type="range"]::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #22c55e;
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        input[type="range"]::-moz-range-thumb:hover {
            transform: scale(1.15);
            box-shadow: 0 3px 6px rgba(0,0,0,0.3);
        }
        /* ì¼ë°˜ ì–´íœ˜ ê°•ì¡° ìŠ¤íƒ€ì¼ */
        .highlight-general { font-weight: 600; color: #374151; cursor: pointer; position: relative; transition: background-color 0.2s; }
        /* ë§ˆìš°ìŠ¤ í˜¸ë²„ ë˜ëŠ” í™œì„±í™” ì‹œ ìŠ¤íƒ€ì¼ */
        .highlight-general:hover, .active-highlight { background-color: #dcfce7; border-radius: 3px; }
        /* í´ë¦­ ê°€ëŠ¥ í‘œì‹œ */
        .highlight-general:active { background-color: #bbf7d0; }
        /* ê³ ì •ëœ íŒì—… ìŠ¤íƒ€ì¼ */
        .hover-tooltip.pinned { border-color: #16a34a; box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .hover-tooltip.pinned::before {
            content: "ğŸ“Œ";
            position: absolute;
            top: 8px;
            right: 8px;
            font-size: 14px;
        }
        
        /* íƒ­ ë°˜ì‘í˜• ê¸€ì í¬ê¸° */
        /* [ìˆ˜ì •]
          - 1.6vw -> 1.3vw, 1.4vw -> 1.1vwë¡œ ë³€ê²½.
          - ë·°í¬íŠ¸ ë„ˆë¹„ê°€ ì¤„ì–´ë“¤ ë•Œ ê¸€ê¼´ì´ ë” ì¼ì°, ë” ë§ì´ ì‘ì•„ì§€ë„ë¡ í•˜ì—¬ 
            ì¤„ ë°”ê¿ˆ(flex-wrap)ì´ ë°œìƒí•˜ê¸° ì „ì— íƒ­ì´ í•œ ì¤„ì— ë¨¸ë¬´ë¥¼ ìˆ˜ ìˆë„ë¡ í•¨.
          - 6pxê°€ ìµœì†Œ í¬ê¸°ì´ë©°, ì´ í¬ê¸°ì—ì„œë„ ê³µê°„ì´ ë¶€ì¡±í•˜ë©´ flex-wrapì´ ì ìš©ë¨.
        */
        .tab-korean { font-size: clamp(6px, 1.3vw, 16px); } /* Min 6px, scales at 1.3vw, Max 16px */
        .tab-english { font-size: clamp(6px, 1.1vw, 14px); } /* Min 6px, scales at 1.1vw, Max 14px */
        
        @media (max-width: 640px) {
            /* [ìˆ˜ì •] 
              - 640px ì´í•˜ì—ì„œëŠ” <span className="flex flex-col ...">ì´ ì ìš©ë˜ì–´
                ì–´ì°¨í”¼ íƒ­ ë²„íŠ¼ì´ ì¢ì•„ì§€ë¯€ë¡œ, ê¸€ê¼´ í¬ê¸° ë¯¸ë””ì–´ ì¿¼ë¦¬ëŠ” ì‚­ì œ.
              - ê¸°ë³¸ clamp()ê°€ ëª¨ë“  í¬ê¸°ë¥¼ ì²˜ë¦¬í•˜ë„ë¡ í•¨.
            */
        }
        .script-highlight { background-color: #e0f2fe; border-radius: 8px; }
        .vocab-highlight { background-color: #dcfce7; border: 2px solid #22c55e; border-radius: 8px; }

        /* --- ë§í’ì„  ìŠ¤íƒ€ì¼ --- */
        .bubble-tail-left.bubble-operator::after { /* ìš´ì˜ì: ì™¼ìª½ ì •ë ¬, í°ìƒ‰ ë°°ê²½ */
            content: "";
            position: absolute;
            bottom: 6px;
            left: -8px;
            width: 0px;
            height: 0px;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-right: 8px solid white; /* ê¼¬ë¦¬ ìƒ‰ìƒ (ë°°ê²½ê³¼ ë™ì¼) */
            transition: border-color 0.3s;
        }

        .bubble-tail-right.bubble-narrator::after { /* ë‚˜ë ˆì´ì…˜: ì˜¤ë¥¸ìª½ ì •ë ¬, íšŒìƒ‰ ë°°ê²½ */
            content: "";
            position: absolute;
            bottom: 6px;
            right: -8px;
            width: 0px;
            height: 0px;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-left: 8px solid #f9fafb; /* ê¼¬ë¦¬ ìƒ‰ìƒ (bg-gray-50) */
            transition: border-color 0.3s;
        }

        .bubble-active.bubble-tail-left.bubble-operator::after { /* ìš´ì˜ì í™œì„± */
            border-right-color: #fef9c3;
        }
        .bubble-active.bubble-tail-right.bubble-narrator::after { /* ë‚˜ë ˆì´ì…˜ í™œì„± */
            border-left-color: #fef9c3;
        }

        /* ì¸ì‡„ ì „ìš© ìŠ¤íƒ€ì¼ */
        .print-only { display: none; }
        @media print {
            @page { size: A4; margin: 0.75cm 1cm; }
            .no-print { display: none !important; }
            .print-only { display: inline-block !important; }
            body, html { background: white !important; font-size: 9pt; }
            .mx-auto { max-width: none !important; padding: 0 !important; margin: 0 !important; border: none !important; box-shadow: none !important; }
            body > #root > div { padding: 0 !important; }
            * { box-shadow: none !important; border-color: transparent !important; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
            p, h1, h2, h3, h4, span, li { color: black !important; }
            p, li { line-height: 1.5; }
            header.text-center { margin-bottom: 1rem !important; }
            .pt-10 { padding-top: 1rem !important; }
            .mb-8 { margin-bottom: 0.4pt !important; }
            h1, h2 { font-size: 12pt !important; margin-bottom: 15px; }
            h3 { font-size: 12pt !important; margin-bottom: 10px; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>
    <script type="text/babel">
        // --- ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ ---
        const Icon = React.memo(({ children, className = 'w-6 h-6' }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>);
        const Video = ({ className }) => <Icon className={className}><path d="m22 8-6 4 6 4V8Z"></path><rect width="14" height="12" x="2" y="6" rx="2" ry="2"></rect></Icon>;
        const BookOpen = ({ className }) => <Icon className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></Icon>;
        const MessageSquare = ({ className }) => <Icon className={className}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></Icon>;
        const ThumbsUp = ({ className }) => <Icon className={className}><path d="M7 10v12"></path><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a2 2 0 0 1 3 1.88V5Z"></path></Icon>;
        const List = ({ className }) => <Icon className={className}><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></Icon>;
        const Spinner = ({ className = 'w-5 h-5' }) => (
            <svg className={`animate-spin ${className}`} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
        );

        // --- ê³µìš© ì»´í¬ë„ŒíŠ¸: ë²ˆì—­ ë²„íŠ¼ ---
        const TranslateButton = React.memo(({ textToTranslate }) => {
            const { useState, useEffect, useRef, useCallback } = React;
            const [translation, setTranslation] = useState(null);
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState(null);
            const [show, setShow] = useState(false);
            const [buttonLang, setButtonLang] = useState('Translation');
            const isMounted = useRef(true);

            useEffect(() => {
                isMounted.current = true;
                setButtonLang('English');
                return () => { isMounted.current = false; };
            }, []);

            const handleTranslate = useCallback(async () => {
                if (show) { setShow(false); return; }
                if (translation) { setShow(true); return; }
                if (!textToTranslate.trim()) return;

                setIsLoading(true);
                setError(null);
                try {
                    const targetLanguage = 'English';
                    const prompt = `Translate the following Korean text to ${targetLanguage}. Provide only the most natural-sounding translation, without any additional explanations or quotation marks.`;
                    const payload = { contents: [{ role: "user", parts: [{ text: prompt }, { text: textToTranslate }] }] };
                    const apiKey = ""; // API key is left empty as per instructions.
                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) throw new Error(`API Error: ${response.status}`);
                    const result = await response.json();
                    if (isMounted.current && result.candidates?.[0]?.content.parts[0].text) {
                        setTranslation(result.candidates[0].content.parts[0].text.trim());
                        setShow(true);
                    } else { throw new Error("Invalid API response format."); }
                } catch (err) { if (isMounted.current) setError("ë²ˆì—­ì— ì‹¤íŒ¨í–ˆì–´ìš”."); }
                finally { if (isMounted.current) setIsLoading(false); }
            }, [show, translation, textToTranslate]);

            return (
                <div className="mt-1 no-print">
                    <button onClick={handleTranslate} disabled={isLoading} className="text-xs text-gray-500 hover:text-gray-800 font-semibold py-1 px-2 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors disabled:text-gray-300">{isLoading ? 'ë²ˆì—­ ì¤‘...' : (show ? 'ë²ˆì—­ ìˆ¨ê¸°ê¸°' : `ë²ˆì—­ (${buttonLang})`)}</button>
                    {show && translation && <p className="text-gray-600 text-base mt-2 mb-2 whitespace-pre-wrap">{translation}</p>}
                    {error && <p className="text-red-500 text-sm mt-1">{error}</p>}
                </div>
            );
        });

        // --- [ë™ì˜ìƒ ìë£Œ] íƒ­ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ ---
        const HighlightedText = React.memo(({ text, highlightData, onWordHover, onWordLeave, onWordClick, lineId, activeWordId }) => {
            if (!text || !highlightData) return text;
            const { regex, wordMap, sortedWords } = highlightData;
            const parts = text.split(regex);
            return (<>{parts.map((part, index) => {
                if (!part) return null;
                if (index % 2 === 0) return part;
                const trimmedPart = part.trim();
                const baseForm = sortedWords.find(word => {
                    const vocabItem = wordMap.get(word);
                    if (vocabItem.variants && vocabItem.variants.includes(trimmedPart)) return true;
                    const cleanPart = trimmedPart.replace(/\s/g, '');
                    const cleanWord = word.replace(/\s/g, '');
                    if (word.endsWith('ë‹¤')) return cleanPart.startsWith(cleanWord.slice(0, -1));
                    return cleanPart.startsWith(cleanWord);
                });
                if (!baseForm) return part;
                const info = wordMap.get(baseForm);
                if (!info) return part;
                const uniqueWordId = `${lineId}-${index}-${baseForm}`;
                const classes = ['highlight-general', 'font-bold', activeWordId === uniqueWordId ? 'active-highlight' : ''].join(' ');
                return <span
                    key={index}
                    className={classes}
                    onMouseEnter={(e) => onWordHover(e, baseForm, lineId, index)}
                    onMouseLeave={onWordLeave}
                    onClick={(e) => onWordClick(e, baseForm, lineId, index)}
                >{part}</span>;
            })}</>);
        });

        const HoverTooltip = React.memo(({ data, position, isPinned }) => {
            if (!data || !position) return null;
            return (
                <div
                    className={`hover-tooltip ${isPinned ? 'pinned' : ''}`}
                    style={{ left: `${position.x}px`, top: `${position.y}px` }}
                >
                    <p className="font-bold text-lg text-green-700 mb-2">{data.term}</p>
                    <p className="text-gray-700 text-base">{data.mainDef}</p>
                    {data.subDefs && data.subDefs.length > 0 && (
                        <div className="mt-3 pt-3 border-t border-gray-200">
                            <ul className="space-y-1">
                                {data.subDefs.map((sub, i) => (
                                    <li key={i} className="text-sm">
                                        <span className="font-semibold text-gray-600">{sub.subTerm}:</span>{' '}
                                        <span className="text-gray-600">{sub.subDef}</span>
                                    </li>
                                ))}
                            </ul>
                        </div>
                    )}
                    {isPinned && (
                        <p className="text-xs text-gray-500 italic mt-3 pt-2 border-t border-gray-200">
                            Click to unpin or click elsewhere
                        </p>
                    )}
                </div>
            );
        });

        const VocabItem = React.memo(React.forwardRef(({ item, isHighlighted }, ref) => {
            const { useState } = React;
            const [showExamples, setShowExamples] = useState(false);

            return (
                <div ref={ref} className={`p-4 rounded-lg border-b ${isHighlighted ? 'vocab-highlight' : 'bg-white'}`}>
                    <p className="font-bold text-[18px] text-green-700">{item.term}</p>
                    <div className="pl-4 mt-2 border-l-2">
                        <p className="text-gray-700 text-[17px]">{item.mainDef}</p>
                        {item.subDefs && item.subDefs.length > 0 && (
                            <div className="mt-3 pt-3 border-t">{item.subDefs.map((sub, index) => (
                                <div key={index} className="mt-2">
                                    <p className="font-semibold text-[17px]">{sub.subTerm}</p>
                                    <p className="text-gray-600 pl-2 text-[16px]">{sub.subDef}</p>
                                </div>
                            ))}</div>
                        )}
                    </div>
                    {item.examples && item.examples.length > 0 && (
                        <div className="mt-3 no-print">
                            <button onClick={() => setShowExamples(!showExamples)} className="text-xs bg-green-200 hover:bg-green-300 text-gray-600 py-1 px-2 rounded-md">
                                {showExamples ? 'Close Examples' : 'Sentence Examples'}
                            </button>
                            {showExamples && (
                                <div className="mt-3 p-3 bg-green-50 rounded-lg space-y-3 text-[15px]">
                                    {item.examples.map((ex, index) => (
                                        <div key={index}>
                                            <p className="font-medium text-gray-800">{ex.kor}</p>
                                            <p className="text-gray-400 hover:text-gray-700 transition-colors">{ex.eng}</p>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        }));

        const VideoMaterialsTab = ({currentScriptContent, vocabAndGrammarList, highlightData, vocabMap, vocabRefs, highlightedVocab, setHighlightedVocab, allVideoParts, activeVideoPart, setActiveVideoPart}) => {
            const { useState, useRef, useEffect, useCallback, useMemo } = React;
            const [activeWordId, setActiveWordId] = useState(null);
            const [player, setPlayer] = useState(null);
            const [activeScriptLine, setActiveScriptLine] = useState(null);
            const [isSyncEnabled, setIsSyncEnabled] = useState(true);
            const [hoverPopupData, setHoverPopupData] = useState(null);
            const [pinnedPopupData, setPinnedPopupData] = useState(null);
            const [translationsVisible, setTranslationsVisible] = useState({});
            const [playerHeight, setPlayerHeight] = useState(0);
            const [isVocabSidebarVisible, setIsVocabSidebarVisible] = useState(true);
            const [isPortrait, setIsPortrait] = useState(window.matchMedia("(orientation: portrait)").matches);
            const [playbackRate, setPlaybackRate] = useState(0.65);

            const scriptLineRefs = useRef({});
            const intervalRef = useRef();
            const playerContainerRef = useRef(null);
            const hoverTimeoutRef = useRef(null);
            const scriptWrapperRef = useRef(null);
            const clipTimeoutRef = useRef(null);
            const clipIntervalRef = useRef(null);

            const activeScriptLineRef = useRef(activeScriptLine);
            activeScriptLineRef.current = activeScriptLine;

            const timeIndex = useMemo(() => {
                return currentScriptContent
                    .filter(line => line.time)
                    .map(line => ({ start: line.time[0], end: line.time[1], id: line.id }))
                    .sort((a, b) => a.start - b.start);
            }, [currentScriptContent]);

            const onPlayerReady = useCallback((event) => {
                setPlayer(event.target);
                event.target.setPlaybackRate(playbackRate);
            }, [playbackRate]);

            const setupPlayer = useCallback(() => {
                if (window.YT && window.YT.Player) {
                    const newPlayer = new window.YT.Player('youtube-player', {
                        height: '100%',
                        width: '100%',
                        videoId: allVideoParts[activeVideoPart].videoId,
                        events: { 'onReady': onPlayerReady }
                    });
                    setPlayer(newPlayer);
                }
            }, [onPlayerReady, allVideoParts, activeVideoPart]);

            useEffect(() => {
                const mediaQuery = window.matchMedia("(orientation: portrait)");
                const handleOrientationChange = (e) => setIsPortrait(e.matches);
                mediaQuery.addEventListener('change', handleOrientationChange);
                return () => mediaQuery.removeEventListener('change', handleOrientationChange);
            }, []);

            useEffect(() => {
                if (window.YT && document.getElementById('youtube-player')) {
                    if (!player) setupPlayer();
                } else if (!window.YT) {
                    window.onYouTubeIframeAPIReady = setupPlayer;
                }
                return () => { 
                    if (intervalRef.current) clearInterval(intervalRef.current); 
                    if (clipTimeoutRef.current) clearTimeout(clipTimeoutRef.current);
                    if (clipIntervalRef.current) clearInterval(clipIntervalRef.current);
                };
            }, [setupPlayer, player]);

            useEffect(() => {
                let ro;
                if (playerContainerRef.current) {
                    const updateHeight = () => { if (playerContainerRef.current) setPlayerHeight(playerContainerRef.current.offsetHeight); };
                    ro = new ResizeObserver(updateHeight);
                    ro.observe(playerContainerRef.current);
                    updateHeight();
                }
                return () => ro?.disconnect();
            }, []);

            useEffect(() => {
                if (player && player.setPlaybackRate) {
                    player.setPlaybackRate(playbackRate);
                }
            }, [player, playbackRate]);

            useEffect(() => {
                if (player && player.loadVideoById) {
                    player.loadVideoById(allVideoParts[activeVideoPart].videoId);
                }
            }, [player, activeVideoPart, allVideoParts]);

            useEffect(() => {
                if (player && isSyncEnabled) {
                    intervalRef.current = setInterval(() => {
                        if (player.getCurrentTime) {
                            const currentTime = player.getCurrentTime();
                            const currentLine = timeIndex.find(line => currentTime >= line.start && currentTime < line.end);
                            const currentLineId = currentLine ? currentLine.id : null;
                            if (activeScriptLineRef.current !== currentLineId) {
                                setActiveScriptLine(currentLineId);
                            }
                        }
                    }, 250);
                } else {
                    clearInterval(intervalRef.current);
                }
                return () => clearInterval(intervalRef.current);
            }, [player, isSyncEnabled, timeIndex]);

            useEffect(() => {
                if (activeScriptLine && isSyncEnabled) {
                    const lineElement = scriptLineRefs.current[activeScriptLine];
                    const scriptWrapper = scriptWrapperRef.current;

                    if (lineElement && scriptWrapper) {
                        const wrapperHeight = scriptWrapper.clientHeight;
                        const wrapperScrollHeight = scriptWrapper.scrollHeight;
                        const lineTop = lineElement.offsetTop;
                        const lineHeight = lineElement.offsetHeight;
                        
                        // ë§í’ì„ ì„ ìŠ¤í¬ë¦½íŠ¸ ë˜í¼ì˜ ì„¸ë¡œ ì¤‘ì•™ì— ìœ„ì¹˜ì‹œí‚¤ê¸°
                        let targetScrollTop = lineTop - (wrapperHeight / 2) + (lineHeight / 2);
                        
                        // ìŠ¤í¬ë¡¤ ë²”ìœ„ ì œí•œ: 0ê³¼ ìµœëŒ€ ìŠ¤í¬ë¡¤ ê°€ëŠ¥ ë²”ìœ„ ì‚¬ì´ë¡œ ì œí•œ
                        const maxScrollTop = wrapperScrollHeight - wrapperHeight;
                        targetScrollTop = Math.max(0, Math.min(targetScrollTop, maxScrollTop));

                        scriptWrapper.scrollTo({
                            top: targetScrollTop,
                            behavior: 'smooth'
                        });
                    }
                }
            }, [activeScriptLine, isSyncEnabled]);

            useEffect(() => {
                const handleGlobalClick = (e) => {
                    // ë‹¨ì–´ë‚˜ íŒì—…ì„ í´ë¦­í•œ ê²Œ ì•„ë‹ˆë©´ ê³ ì • í•´ì œ
                    if (!e.target.closest('.highlight-general') && !e.target.closest('.hover-tooltip')) {
                        setPinnedPopupData(null);
                    }
                };

                document.addEventListener('click', handleGlobalClick);
                return () => document.removeEventListener('click', handleGlobalClick);
            }, []);

            const handlePlayClip = (line) => {
              if (!player || !line.time) return;

              // ê¸°ì¡´ íƒ€ì„ì•„ì›ƒ/ì¸í„°ë²Œ ì •ë¦¬
              if (clipTimeoutRef.current) { clearTimeout(clipTimeoutRef.current); clipTimeoutRef.current = null; }
              if (clipIntervalRef.current) { clearInterval(clipIntervalRef.current); clipIntervalRef.current = null; }

              const [start, end] = line.time;

              // ì‹œí¬ & ì¬ìƒ (allowSeekAhead = true ê¶Œì¥)
              try {
                player.pauseVideo?.();
                player.seekTo?.(start, true);
                // í˜¹ì‹œ ìµœì‹  ë°°ì†ì´ ë°˜ì˜ ì•ˆ ë˜ì–´ ìˆìœ¼ë©´ ë³´ì •
                if (player.setPlaybackRate && typeof playbackRate === 'number') {
                  player.setPlaybackRate(playbackRate);
                }
                player.playVideo?.();
              } catch (e) { console.error(e); }

              // ì‹¤ì œë¡œ PLAYINGì´ ëœ ë’¤ë¶€í„° endë¥¼ ê°ì‹œ
              const waitForPlaying = setInterval(() => {
                if (!player.getPlayerState) return;
                
                // YT.PlayerState.PLAYING (ê°’: 1)
                if (player.getPlayerState() === 1) {
                  clearInterval(waitForPlaying);

                  // 30~50ms ê°„ê²©ì´ë©´ ì¶©ë¶„íˆ ë§¤ë„ëŸ½ìŠµë‹ˆë‹¤.
                  clipIntervalRef.current = setInterval(() => {
                    const t = player.getCurrentTime ? player.getCurrentTime() : 0;
                    if (t >= (end - 0.05)) { // ì•½ê°„ì˜ ì—¬ìœ ë¡œ 0.05ì´ˆ ì•ì—ì„œ ì»·
                      player.pauseVideo?.();
                      clearInterval(clipIntervalRef.current);
                      clipIntervalRef.current = null;
                    }
                  }, 40);
                }
              }, 40);
            };

            const handleRateChange = (e) => {
                const newRate = parseFloat(e.target.value);
                setPlaybackRate(newRate);
            };

            const handleWordHover = useCallback((e, baseForm, lineId, index) => {
                e.stopPropagation();
                if (hoverTimeoutRef.current) clearTimeout(hoverTimeoutRef.current);

                // ê³ ì •ëœ íŒì—…ì´ ìˆìœ¼ë©´ í˜¸ë²„ íŒì—…ì„ í‘œì‹œí•˜ì§€ ì•ŠìŒ
                if (pinnedPopupData) return;

                const uniqueWordId = `${lineId}-${index}-${baseForm}`;
                setActiveWordId(uniqueWordId);

                const wordData = vocabMap.get(baseForm);
                if (wordData) {
                    const rect = e.target.getBoundingClientRect();
                    let x = rect.left;
                    let y = rect.bottom + 5;
                    const tooltipWidth = 320;
                    if (x + tooltipWidth > window.innerWidth) {
                        x = rect.right - tooltipWidth;
                        if (x < 0) x = 10;
                    }
                    const tooltipHeight = 200;
                    if (y + tooltipHeight > window.innerHeight + window.scrollY) {
                        y = rect.top - tooltipHeight - 5;
                    }
                    setHoverPopupData({ data: wordData, position: { x, y } });
                    setHighlightedVocab(wordData.term);

                    const vocabElement = vocabRefs.current[wordData.term];
                    if (vocabElement) {
                        vocabElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }
                }
            }, [vocabMap, setHighlightedVocab, setActiveWordId, vocabRefs, pinnedPopupData]);

            const handleWordLeave = useCallback(() => {
                // ê³ ì •ëœ íŒì—…ì´ ìˆìœ¼ë©´ í˜¸ë²„ íŒì—…ì„ ì§€ìš°ì§€ ì•ŠìŒ
                if (pinnedPopupData) return;

                hoverTimeoutRef.current = setTimeout(() => {
                    setHoverPopupData(null);
                    setHighlightedVocab(null);
                    setActiveWordId(null);
                }, 200);
            }, [setHighlightedVocab, setActiveWordId, pinnedPopupData]);

            const handleWordClick = useCallback((e, baseForm, lineId, index) => {
                e.stopPropagation();
                
                const wordData = vocabMap.get(baseForm);
                if (wordData) {
                    const rect = e.target.getBoundingClientRect();
                    let x = rect.left;
                    let y = rect.bottom + 5;
                    const tooltipWidth = 320;
                    if (x + tooltipWidth > window.innerWidth) {
                        x = rect.right - tooltipWidth;
                        if (x < 0) x = 10;
                    }
                    const tooltipHeight = 200;
                    if (y + tooltipHeight > window.innerHeight + window.scrollY) {
                        y = rect.top - tooltipHeight - 5;
                    }
                    
                    // ê°™ì€ ë‹¨ì–´ë¥¼ ë‹¤ì‹œ í´ë¦­í•˜ë©´ ê³ ì • í•´ì œ
                    if (pinnedPopupData && pinnedPopupData.data.term === wordData.term) {
                        setPinnedPopupData(null);
                        setHoverPopupData(null);
                    } else {
                        // ìƒˆë¡œìš´ ë‹¨ì–´ë¥¼ í´ë¦­í•˜ë©´ ê³ ì •
                        setPinnedPopupData({ data: wordData, position: { x, y } });
                        setHoverPopupData(null);
                        setHighlightedVocab(wordData.term);
                        
                        const vocabElement = vocabRefs.current[wordData.term];
                        if (vocabElement) {
                            vocabElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                        }
                    }
                }
            }, [vocabMap, pinnedPopupData, vocabRefs, setHighlightedVocab]);

            const toggleTranslation = (lineId) => {
                setTranslationsVisible(prev => ({ ...prev, [lineId]: !prev[lineId] }));
            };

            return (
                <div className="video-materials-content md:flex md:flex-row md:gap-6">
                    {(pinnedPopupData || hoverPopupData) && <HoverTooltip data={(pinnedPopupData || hoverPopupData).data} position={(pinnedPopupData || hoverPopupData).position} isPinned={!!pinnedPopupData} />}
                    <div ref={playerContainerRef} className="video-wrapper md:w-[41%] md:sticky top-0 z-40 bg-gray-50 py-2 no-print md:max-h-[calc(100vh-4rem)] md:overflow-hidden">
                        
                        <div className="mb-4 flex space-x-1 border-b-2 border-gray-200 bg-white rounded-t-lg shadow-inner-sm overflow-hidden">
                            {allVideoParts.map((part, index) => (
                                <button
                                    key={index}
                                    onClick={() => setActiveVideoPart(index)}
                                    className={`flex-1 py-3 px-2 font-bold text-sm transition-colors duration-200 ${
                                        activeVideoPart === index
                                            ? 'border-b-4 border-green-500 text-green-600 bg-green-50'
                                            : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100 border-b-4 border-transparent'
                                    }`}
                                >
                                    {part.part}
                                </button>
                            ))}
                        </div>

                        <div className={`w-full rounded-b-xl shadow-lg border-4 border-white overflow-hidden transition-all duration-300 ease-in-out aspect-[9/16]`} style={{ maxHeight: 'calc(100vh - 11.5rem)' }}>
                            <div id="youtube-player" className="w-full h-full"></div>
                        </div>
                        <div className="mt-4 flex flex-row justify-between items-center gap-3">
                            <label htmlFor="sync-toggle" className="flex items-center cursor-pointer bg-white py-1.5 px-2.5 rounded-lg shadow-md border flex-none">
                                <span className="text-xs font-medium text-gray-900 whitespace-nowrap mr-2">Auto-scroll</span>
                                <div className="relative">
                                    <input type="checkbox" id="sync-toggle" className="sr-only" checked={isSyncEnabled} onChange={() => setIsSyncEnabled(!isSyncEnabled)} />
                                    <div className={`block w-9 h-5 rounded-full transition-colors ${isSyncEnabled ? 'bg-green-500' : 'bg-gray-200'}`}></div>
                                    <div className={`dot absolute left-0.5 top-0.5 bg-white w-4 h-4 rounded-full transition-transform ${isSyncEnabled ? 'transform translate-x-4' : ''}`}></div>
                                </div>
                            </label>
                            
                            <div className="flex items-center gap-2 bg-white py-1.5 px-3 rounded-lg shadow-md border flex-1">
                                <span className="text-xs font-medium text-gray-900 whitespace-nowrap">Speed</span>
                                <input
                                    type="range"
                                    min="0.60"
                                    max="1.20"
                                    step="0.01"
                                    value={playbackRate}
                                    onChange={handleRateChange}
                                    className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer"
                                    style={{
                                        background: `linear-gradient(to right, #22c55e 0%, #22c55e ${((playbackRate - 0.60) / (1.20 - 0.60)) * 100}%, #e5e7eb ${((playbackRate - 0.60) / (1.20 - 0.60)) * 100}%, #e5e7eb 100%)`
                                    }}
                                    aria-label="Playback speed"
                                />
                                <span className="text-xs font-semibold text-green-700 w-11 text-right">{playbackRate.toFixed(2)}x</span>
                            </div>
                        </div>
                    </div>
                    <div className="script-wrapper relative md:w-[59%] md:max-h-[calc(100vh-4rem)] md:overflow-y-auto" ref={scriptWrapperRef}>
                        <main className="flex-grow">
                            <div className="space-y-6">
                                {currentScriptContent.map(line => {
                                    const hasTranslation = !!line.eng;
                                    const isActive = activeScriptLine === line.id;

                                    if (line.kor.startsWith('â€¢')) {
                                        return (
                                            <div key={line.id} ref={el => scriptLineRefs.current[line.id] = el}
                                                className={`p-3 my-2 rounded-lg transition-colors duration-300 ${isActive ? 'bg-yellow-100' : ''}`}>
                                                <p className="whitespace-pre-wrap text-lg text-gray-800">
                                                    <HighlightedText text={line.kor} highlightData={highlightData} onWordHover={handleWordHover} onWordLeave={handleWordLeave} onWordClick={handleWordClick} lineId={line.id} activeWordId={activeWordId} />
                                                </p>
                                                {translationsVisible[line.id] && hasTranslation && (
                                                    <p className="text-gray-600 text-base mt-2">{line.eng}</p>
                                                )}
                                                <div className="flex items-center gap-2 mt-2 no-print">
                                                    {hasTranslation && (
                                                        <button onClick={() => toggleTranslation(line.id)} className="text-xs text-gray-600 bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition">
                                                            {translationsVisible[line.id] ? 'Hide translation' : 'Translation'}
                                                        </button>
                                                    )}
                                                </div>
                                            </div>
                                        );
                                    }

                                    const isNarrator = line.speaker === 'ë‚˜ë ˆì´ì…˜';
                                    // [ìˆ˜ì •] ë‚˜ë ˆì´ì…˜(isNarrator)ì¼ ê²½ìš° ì˜¤ë¥¸ìª½ ì •ë ¬(items-end), ì•„ë‹ ê²½ìš°(ìš´ì˜ì) ì™¼ìª½ ì •ë ¬(items-start)
                                    const bubbleWrapperClasses = `flex flex-col max-w-[100%] sm:max-w-[100%] ${isNarrator ? 'items-end self-end mr-3' : 'items-start ml-3'}`;
                                    const bubbleBaseClasses = 'relative px-5 py-3 rounded-2xl shadow-md transition-colors duration-300';
                                    const narratorBubbleColor = 'bg-gray-50'; // [ìˆ˜ì •] ë‚˜ë ˆì´ì…˜ ë°°ê²½ìƒ‰
                                    const operatorBubbleColor = 'bg-white';
                                    const activeBubbleColor = 'bg-yellow-100';
                                    // [ìˆ˜ì •] ë‚˜ë ˆì´ì…˜ì¼ ê²½ìš° 'bubble-tail-right', ìš´ì˜ìì¼ ê²½ìš° 'bubble-tail-left'
                                    const tailClass = isNarrator ? 'bubble-tail-right bubble-narrator' : 'bubble-tail-left bubble-operator';
                                    const bubbleClasses = `${bubbleBaseClasses} ${isActive ? activeBubbleColor : (isNarrator ? narratorBubbleColor : operatorBubbleColor)} ${tailClass} ${isActive ? 'bubble-active' : ''}`;
                                    const speakerNameClasses = `font-bold mb-1 ${isNarrator ? 'text-green-800' : 'text-blue-800'}`;

                                    return (
                                        <div key={line.id} ref={el => scriptLineRefs.current[line.id] = el} className="flex flex-col w-full">
                                            <div className={bubbleWrapperClasses}>
                                                {/* [ìˆ˜ì •] ë‚˜ë ˆì´ì…˜(isNarrator)ì¼ ê²½ìš° 'self-end', ì•„ë‹ ê²½ìš° 'self-start' */}
                                                <p className={`${speakerNameClasses} ${isNarrator ? 'self-end' : 'self-start'}`}>{line.speaker}</p>
                                                <div className={bubbleClasses}>
                                                    <p className="whitespace-pre-wrap text-lg text-gray-800">
                                                        <HighlightedText text={line.kor} highlightData={highlightData} onWordHover={handleWordHover} onWordLeave={handleWordLeave} onWordClick={handleWordClick} lineId={line.id} activeWordId={activeWordId} />
                                                    </p>
                                                </div>
                                                {/* [ìˆ˜ì •] ë‚˜ë ˆì´ì…˜(isNarrator)ì¼ ê²½ìš° 'items-end', ì•„ë‹ ê²½ìš° 'items-start' */}
                                                <div className={`w-full flex flex-col ${isNarrator ? 'items-end' : 'items-start'}`}>
                                                    {translationsVisible[line.id] && hasTranslation && (
                                                        <p className="text-gray-500 text-base mt-2 px-2">{line.eng}</p>
                                                    )}
                                                    <div className="flex items-center gap-2 mt-2 px-2 no-print">
                                                        {line.time && (
                                                            <button onClick={() => handlePlayClip(line)} className="text-xs px-2 py-1 rounded-md transition bg-gray-100 hover:bg-gray-200 text-gray-600">
                                                                Play Clip
                                                            </button>
                                                        )}
                                                        {hasTranslation && (
                                                            <button onClick={() => toggleTranslation(line.id)} className="text-xs text-gray-600 bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition">
                                                                {translationsVisible[line.id] ? 'Hide translation' : 'Translation'}
                                                            </button>
                                                        )}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </main>
                    </div>
                </div>
            )
        }

        // --- [í€´ì¦ˆ&í† ë¡ ] íƒ­ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ ---
        const ComprehensionQuiz = ({ sentences }) => {
            const { useState, useMemo } = React;
            const [selectedWords, setSelectedWords] = useState({});
            const [results, setResults] = useState({});
            const [translationsVisible, setTranslationsVisible] = useState({});
            const [hintsVisible, setHintsVisible] = useState({});

            const shuffledSentences = useMemo(() => {
                const shuffleArray = (array) => {
                    const newArray = [...array];
                    for (let i = newArray.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                    }
                    return newArray;
                };
                return sentences.map(sentence => ({ ...sentence, bank: shuffleArray(sentence.bank) }));
            }, [sentences]);

            const handleWordSelect = (id, word) => {
                setSelectedWords(prev => ({...prev, [id]: word}));
                const isCorrect = sentences.find(s => s.id === id).answer === word;
                setResults(prev => ({...prev, [id]: isCorrect}));
                setHintsVisible(prev => ({ ...prev, [id]: false }));
            };
            const handleToggleTranslation = (id) => { setTranslationsVisible(prev => ({...prev, [id]: !prev[id]})); };
            const handleToggleHint = (id) => { if (results[id] !== true) setHintsVisible(prev => ({...prev, [id]: !prev[id]})); };

            return (
                <div className="space-y-8">
                    {shuffledSentences.map((s, index) => (
                        <div key={s.id} className="p-6 border rounded-xl bg-white shadow-lg transition-all duration-300">
                            <p className="text-gray-700 font-bold text-lg mb-4">{index + 1}. ë‹¤ìŒ ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”. (Choose the correct word for the blank.)</p>
                            <div className="p-4 bg-gray-100 rounded-lg text-left mb-3 text-gray-900 text-xl font-bold">
                                {s.parts[0]}
                                <span className="inline-block bg-yellow-200 text-green-800 px-3 py-1 rounded-md font-extrabold mx-2">
                                    {hintsVisible[s.id] ? `[ ${s.eng_hint} ]` : (selectedWords[s.id] || '___')}
                                </span>
                                {s.parts[1]}
                                {results[s.id] === true && <span className="inline-block ml-2 text-green-500">âœ“</span>}
                                {results[s.id] === false && <span className="inline-block ml-2 text-red-500">âœ—</span>}
                            </div>
                            {translationsVisible[s.id] && (
                                <div className="text-gray-600 italic p-3 bg-gray-50 rounded-lg text-left mt-2 text-base">
                                    {results[s.id] ? (<span>{s.eng_parts[0]}<strong className="text-green-600">{s.eng_answer}</strong>{s.eng_parts[1]}</span>)
                                    : (<span>{s.eng_parts[0]}<span className="font-bold">___</span>{s.eng_parts[1]}</span>)}
                                </div>
                            )}
                            <div className="text-left mb-4 flex gap-2">
                                <button onClick={() => handleToggleHint(s.id)} className="text-xs bg-yellow-200 hover:bg-yellow-300 text-yellow-800 font-bold py-1 px-3 rounded-full transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed" disabled={results[s.id] === true}>íŒíŠ¸ (Hint)</button>
                                <button onClick={() => handleToggleTranslation(s.id)} className="text-xs bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-1 px-3 rounded-full transition duration-200">ë²ˆì—­ (Translation)</button>
                            </div>
                            <div className="flex justify-start flex-wrap gap-3">
                                {s.bank.map(word => (
                                    <button
                                        key={word}
                                        onClick={() => handleWordSelect(s.id, word)}
                                        className={`px-4 py-2 rounded-lg text-lg font-bold transition-all transform hover:scale-105 shadow-md ${selectedWords[s.id] === word ? (results[s.id] ? 'bg-green-500 text-white ring-2 ring-opacity-50 ring-green-400' : 'bg-red-500 text-white ring-2 ring-red-300') : 'bg-white text-gray-800 hover:bg-gray-100 border'}`}
                                    >{word}</button>
                                ))}
                            </div>
                            {results[s.id] !== undefined && (
                                <div className={`mt-4 p-4 border-l-4 rounded-r-lg ${results[s.id] ? 'bg-green-50 border-green-400' : 'bg-red-50 border-red-400'}`}>
                                    <p className={`font-bold ${results[s.id] ? 'text-green-800' : 'text-red-800'} flex items-center gap-2 text-lg`}>{results[s.id] ? 'Correct!' : 'Try again.'}</p>
                                    <p className="mt-2 text-gray-700 text-base italic">{results[s.id] ? s.eng_explanation : s.eng_wrongAnswerExplanations[selectedWords[s.id]]}</p>
                                </div>
                            )}
                        </div>
                    ))}
                </div>
            );
        };

        const SentenceChecker = ({ value, onChange, placeholder, question }) => {
            const { useState } = React;
            const [feedback, setFeedback] = useState(null);
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState(null);

            const checkSentence = async () => {
                if (!value || value.trim() === '') {
                    setError("ë¬¸ì¥ì„ ì…ë ¥í•´ì•¼ í”¼ë“œë°±ì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”.");
                    setFeedback(null); return;
                }
                setIsLoading(true); setError(null); setFeedback(null);
                const prompt = `You are an advanced Korean language tutor AI for B1-C2 level learners. Analyze the user's sentence in response to a specific question. The user's answer is in Korean. Your entire response MUST be a JSON object, with all string values in Korean (ending in -ìš”) and English.\n\nQuestion: "${question}"\nUser's Answer: "${value}"\n\nYour response MUST be a JSON object with the specified schema.`;
                const payload = {
                    contents: [{ role: "user", parts: [{ text: prompt }] }],
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: { type: "OBJECT", properties: { "is_relevant": { "type": "BOOLEAN" }, "relevance_feedback_kor": { "type": "STRING", "nullable": true }, "relevance_feedback_eng": { "type": "STRING", "nullable": true }, "is_correct": { "type": "BOOLEAN", "nullable": true }, "feedback_message_kor": { "type": "STRING", "nullable": true }, "feedback_message_eng": { "type": "STRING", "nullable": true }, "corrected_sentence": { "type": "STRING", "nullable": true }, "explanation_kor": { "type": "STRING", "nullable": true }, "explanation_eng": { "type": "STRING", "nullable": true }, "alternative_expressions": { "type": "ARRAY", "items": { "type": "OBJECT", "properties": { "expression_kor": { "type": "STRING" }, "expression_eng": { "type": "STRING" } }, "required": ["expression_kor", "expression_eng"] } } }, "required": ["is_relevant"] }
                    }
                };
                const apiKey = ""; // API key is left empty as per instructions.
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                try {
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) throw new Error(`API error: ${response.statusText}`);
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0 && result.candidates[0].content.parts[0].text) {
                        try {
                            const parsedJson = JSON.parse(result.candidates[0].content.parts[0].text);
                            setFeedback(parsedJson);
                        } catch (parseError) {
                            console.error("Error parsing JSON response:", parseError, result.candidates[0].content.parts[0].text);
                            setError("AIì˜ ì‘ë‹µ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•Šì•„ ì²˜ë¦¬í•  ìˆ˜ ì—†ì–´ìš”.");
                        }
                    } else {
                        console.error("Invalid API response structure:", result);
                        setError("AIì˜ ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” ë° ë¬¸ì œê°€ ë°œìƒí–ˆì–´ìš”.");
                    }
                } catch (err) {
                    console.error("Error checking sentence:", err);
                    setError("ë¬¸ì¥ ê²€ì‚¬ì— ì‹¤íŒ¨í–ˆì–´ìš”. ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•˜ê±°ë‚˜ ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
                }
                finally { setIsLoading(false); }
            };

            const renderFeedbackSection = (title, content) => (content && content.length > 0 && (
                <div>
                    <p className="text-gray-800 font-bold text-[17px]">{title}</p>
                    {Array.isArray(content) ? (
                        <ul className="list-disc list-inside space-y-2 mt-1">
                            {content.map((item, index) => (
                                <li key={index} className="text-gray-600 text-[16px]">
                                    <p className="font-medium">{item.expression_kor || item.sentence_kor}</p>
                                    <p className="text-gray-500 italic text-sm">{item.expression_eng || item.sentence_eng}</p>
                                </li>
                            ))}
                        </ul>
                    ) : (<p className="text-gray-700 font-medium text-[18px]">{content}</p>)}
                </div>
            ));

            return (
                <div>
                    <textarea className="w-full p-3 border rounded-md focus:ring-2 focus:ring-green-400 transition text-lg" rows="3" placeholder={placeholder} value={value} onChange={onChange} />
                    <button onClick={checkSentence} disabled={isLoading} className="mt-3 flex items-center justify-center gap-2 bg-green-200 text-gray-900 py-2 px-4 rounded-md transition-colors hover:bg-green-300 disabled:opacity-50 disabled:cursor-wait font-semibold text-[14px]">
                        {isLoading ? <Spinner className="w-5 h-5" /> : 'âœ¨'} {isLoading ? 'í”¼ë“œë°± ìƒì„± ì¤‘...' : 'AIì—ê²Œ í”¼ë“œë°± ë°›ê¸°'}
                    </button>
                    {error && <p className="mt-2 text-sm text-red-600">{error}</p>}
                    {feedback && (
                        <div className="mt-4 p-4 bg-green-50 border-l-4 border-green-100 rounded-r-lg space-y-4">
                            {!feedback.is_relevant && ( <div><p className="font-bold text-red-800 flex items-center gap-2 text-lg">{feedback.relevance_feedback_kor}</p><p className="text-gray-600 italic">{feedback.relevance_feedback_eng}</p></div> )}
                            {feedback.is_relevant && feedback.is_correct && ( <div><p className="font-bold text-green-800 flex items-center gap-2 text-lg"><ThumbsUp className="w-5 h-5"/> {feedback.feedback_message_kor}</p><p className="text-gray-600 italic">{feedback.feedback_message_eng}</p></div> )}
                            {feedback.is_relevant && !feedback.is_correct && (<>
                                {feedback.corrected_sentence && ( <div><p className="text-gray-800 font-bold text-[17px]">âœ¨ ìˆ˜ì •ëœ ë¬¸ì¥:</p><p className="text-gray-700 font-medium text-[18px]">{feedback.corrected_sentence}</p></div> )}
                                {(feedback.explanation_kor || feedback.explanation_eng) && ( <div><p className="text-gray-800 font-bold text-[17px]">ì„¤ëª…:</p>{feedback.explanation_kor && <p className="text-gray-600 text-[16px]">{feedback.explanation_kor}</p>}{feedback.explanation_eng && <p className="text-gray-500 italic mt-1 text-[15px]">{feedback.explanation_eng}</p>}</div> )}
                            </>)}
                            {feedback.alternative_expressions && feedback.alternative_expressions.length > 0 && renderFeedbackSection('ğŸ’¡ ë‹¤ë¥¸ í‘œí˜„:', feedback.alternative_expressions)}
                        </div>
                    )}
                </div>
            );
        };

        const DiscussionSection = ({ questions }) => {
            const { useState } = React;
            const [translationsVisible, setTranslationsVisible] = useState({});
            const [userQuestionAnswers, setUserQuestionAnswers] = useState({});
            const toggleTranslation = (id) => { setTranslationsVisible(prev => ({ ...prev, [id]: !prev[id] })); };

            return (
                <div className="space-y-10">
                    {questions.map((q) => (
                        <div key={q.num} className="p-6 border rounded-xl bg-white shadow-lg">
                            <p className="text-gray-900 text-xl font-bold">{q.num}. {q.kor}</p>
                            {translationsVisible[`q-${q.num}`] && (<p className="whitespace-pre-wrap text-gray-600 italic mt-1 text-base">{q.eng}</p>)}
                            <button onClick={() => toggleTranslation(`q-${q.num}`)} className="text-xs text-gray-800 bg-gray-200 hover:bg-gray-300 font-bold py-1 px-3 rounded-full transition duration-200 mt-2 mb-6">ë²ˆì—­ (Translation)</button>
                            {q.vocab && q.vocab.length > 0 && (
                                <div className="mt-4 space-y-4">
                                    <h3 className="font-bold text-lg text-gray-800">ğŸ“í•µì‹¬ í‘œí˜„ (Essential phrases)</h3>
                                    {q.vocab.map((v, i) => (
                                        <div key={i} className="pl-4 border-l-2 border-gray-200 py-2">
                                            <p className="font-semibold text-green-700 text-lg">{v.term}: <span className="font-medium text-gray-700 text-base">{v.meaning_eng}</span></p>
                                        </div>
                                    ))}
                                </div>
                            )}
                            <div className="mt-6">
                                <h3 className="font-bold text-lg text-gray-800 mb-2">í•µì‹¬ í‘œí˜„ì„ ì‚¬ìš©í•´ì„œ ì§ˆë¬¸ì— ëŒ€ë‹µí•´ ë³´ì„¸ìš”.</h3>
                                <SentenceChecker
                                    value={userQuestionAnswers[`q-${q.num}`] || ''}
                                    onChange={(e) => setUserQuestionAnswers(prev => ({...prev, [`q-${q.num}`]: e.target.value}))}
                                    placeholder="ì—¬ê¸°ì— ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš” (Type your response here)"
                                    question={q.kor}
                                />
                            </div>
                        </div>
                    ))}
                </div>
            );
        };

        const Tabs = ({ tabs }) => {
            const { useState } = React;
            const [activeTab, setActiveTab] = useState(0);
            return (
                <div>
                    <div className="border-b border-gray-200 no-print">
                        <nav className="-mb-px flex flex-wrap gap-x-2 sm:gap-x-4 md:gap-x-6" aria-label="Tabs">
                            {tabs.map((tab, index) => (
                                <button
                                    key={tab.koreanName} onClick={() => setActiveTab(index)}
                                    className={`${ index === activeTab ? 'border-green-500 text-green-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} py-3 px-1 border-b-2 font-medium transition-colors flex items-center gap-1 sm:gap-2`}
                                >
                                    <span className="hidden sm:inline">{tab.icon}</span>
                                    <span className="flex flex-col sm:flex-row sm:gap-1 items-start sm:items-center">
                                        <span className="tab-korean">{tab.koreanName}</span>
                                        <span className="tab-english text-gray-400">{tab.englishName}</span>
                                    </span>
                                </button>
                            ))}
                        </nav>
                    </div>
                    <div className="pt-10">{tabs[activeTab].content}</div>
                </div>
            );
        };

        // --- ë©”ì¸ App ì»´í¬ë„ŒíŠ¸ ---
        const App = () => {
            const { useState, useEffect, useMemo, useRef } = React;
            const [containerWidth, setContainerWidth] = useState('30cm');
            const [layoutMode, setLayoutMode] = useState('large');
            
            const vocabRefs = useRef({});
            const [highlightedVocab, setHighlightedVocab] = useState(null);
            const [activeVideoPart, setActiveVideoPart] = useState(0);

            useEffect(() => {
                const handleResize = () => {
                    const heightInPx = window.innerHeight; const widthInPx = window.innerWidth;
                    const isMobileDevice = /Mobi|Android/i.test(navigator.userAgent);
                    const isTabletDevice = /iPad|Android(?!.*Mobi)/i.test(navigator.userAgent);
                    const isPortrait = window.matchMedia("(orientation: portrait)").matches;
                    let newMode = 'large'; let newContainerWidth = '30cm';

                    if ((isMobileDevice || isTabletDevice) && isPortrait) { newMode = 'mobile'; newContainerWidth = '100%'; }
                    else {
                        if (heightInPx < 832) { newMode = 'split'; newContainerWidth = '100%'; }
                        else if (heightInPx < 907) { newMode = 'small'; newContainerWidth = '22cm'; }
                        else if (heightInPx < 983) { newMode = 'medium'; newContainerWidth = '24cm'; }
                        else { newMode = 'large'; newContainerWidth = '30cm'; }
                    }
                    setContainerWidth(newContainerWidth); setLayoutMode(newMode); document.body.dataset.layoutMode = newMode;
                    const baseWidthPx = 30 * 37.795; let effectiveWidthPx;
                    if (newContainerWidth === '100%') { effectiveWidthPx = widthInPx; }
                    else { const cmValue = parseFloat(newContainerWidth); effectiveWidthPx = cmValue * 37.795; }
                    if (newMode !== 'large') { const scale = Math.min(1.0, effectiveWidthPx / baseWidthPx); const finalScale = Math.max(0.8, scale); document.documentElement.style.fontSize = `${16 * finalScale}px`; }
                    else { document.documentElement.style.fontSize = '16px'; }
                };
                window.addEventListener('resize', handleResize); handleResize();
                return () => window.removeEventListener('resize', handleResize);
            }, []);

            const { allVideoParts, vocabAndGrammarList, globalSentences, globalDiscussionQuestions } = useMemo(() => {
                // --- Script Content for Each Part ---
                const part1Script = [
                    { id: 's1', speaker: 'ë‚˜ë ˆì´ì…˜', kor: '1000ì›ìœ¼ë¡œ ëˆ„êµ°ê°€ì˜ ì¬ëŠ¥ì„ ì‚´ ìˆ˜ ìˆë‹¤ë©´?', time: [0.3, 1.567], eng: "If you could buy someone's talent for 1000 won?" },
                    { id: 's2', speaker: 'ìš´ì˜ì', kor: 'ë³´í†µ ìš°ë¦¬ê°€ ì¬ëŠ¥ì´ë¼ê³  í•˜ë©´,', time: [1.6, 2.8], eng: 'Usually, when we say "talent,"' },
                    { id: 's3', speaker: 'ìš´ì˜ì', kor: 'ëˆì´ ë˜ëŠ” ê·¸ë ‡ê²Œ ë˜ê²Œ ë¾°ì¡±í•œ ê±¸ ìƒê°í•˜ì–ì•„.', time: [2.833, 4.4], eng: 'we think of something very sharp/specific that makes money, you know.' },
                    { id: 's4', speaker: 'ìš´ì˜ì', kor: 'ë‚˜ëŠ” ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë²„ë ¤ì§€ëŠ” ì¬ëŠ¥ë“¤ì´ ë˜ê²Œ ë§ë‹¤ê³  ìƒê°í•´.', time: [4.333, 6.5], eng: 'I think, because of that, many talents are wasted.' },
                    { id: 's5', speaker: 'ìš´ì˜ì', kor: '1000ì›ì˜ ì¬ëŠ¥ ë§ˆì¼“ì€,', time: [6.533, 7.367], eng: "The '1000 Won Talent Market' is," },
                    { id: 's6', speaker: 'ìš´ì˜ì', kor: '"ì•„, ì´ê²Œ ì¬ëŠ¥ì¸ê°€?",', time: [7.4, 8.0], eng: '"Oh, is this a talent?"' },
                    { id: 's7', speaker: 'ìš´ì˜ì', kor: 'ê·¸ëŸ° ì¬ëŠ¥ë“¤ì„ í•œë²ˆ 1000ì›ì— íŒ”ì•„ ë³´ëŠ” ê·¸ëŸ° ë§ˆì¼“ì´ë¼ê³  ìƒê°í•˜ë©´ ë¼.', time: [8.0, 10.9], eng: 'You can think of it as a market where you try to sell such talents for 1000 won.' },
                    { id: 's8', speaker: 'ìš´ì˜ì', kor: '1000ì›ì´ë¼ëŠ” ì¼ë‹¨ ì•½ì†ì„ í•˜ê³ ,', time: [10.933, 12.133], eng: 'First, we make a promise of 1000 won, and' },
                    { id: 's9', speaker: 'ìš´ì˜ì', kor: 'ê·¸ ì•ˆì—ì„œ íŒ”ì•„ ë³´ëŠ” ê±°ì§€ ë‚´ ì¬ëŠ¥ì„.', time: [12.167, 14.067], eng: "within that, I try selling my talent, you see." },
                    { id: 's10', speaker: 'ìš´ì˜ì', kor: 'ê·¼ë° ì—¬ê¸°ì„œ ëë‚˜ëŠ” ê²Œ ì•„ë‹ˆë¼', time: [14.1, 14.933], eng: "But it's not that it ends here," },
                    { id: 's11', speaker: 'ìš´ì˜ì', kor: 'ì´ ì¬ëŠ¥ì„ ì´ìš©í•œ ê³ ê°ë“¤ì€', time: [14.967, 16.5], eng: 'the customers who used this talent' },
                    { id: 's12', speaker: 'ìš´ì˜ì', kor: "'ì´ê±¸ ë‚´ê°€ ëˆ ì£¼ê³  ì‚°ë‹¤ë©´ ì–¼ë§ˆì— ì‚´ ê²ƒì¸ì§€'ë¥¼ ë¸”ë¼ì¸ë“œì— ì ì–´ì„œ", time: [16.533, 20.633], eng: "write anonymously 'how much they would pay for it if they bought it with money,' and" },
                    { id: 's13', speaker: 'ìš´ì˜ì', kor: 'ì´ ì…€ëŸ¬í•œí…Œ ë„˜ê²¨ ì¤˜.', time: [20.633, 21.733], eng: 'hand it over to the seller.' },
                    { id: 's14', speaker: 'ìš´ì˜ì', kor: 'ë§ˆì¼“ì´ ëë‚˜ê³  ë‚˜ì„œ,', time: [21.767, 22.6], eng: 'After the market ends,' },
                    { id: 's15', speaker: 'ìš´ì˜ì', kor: '"ë‚´ ì¬ëŠ¥ì´ ëˆ„êµ°ê°€í•œí…Œ ì´ ì •ë„ì˜ ê°’ì–´ì¹˜ë¥¼ ì£¼ëŠ”êµ¬ë‚˜"ë¼ëŠ” ê±¸ íŒë‹¨í•´ ë³¼ ìˆ˜ ìˆì–´.', time: [22.6, 25.9], eng: 'you can try to judge "Oh, my talent provides this much value to someone."' }
                ];

                const part2Script = [
                    { id: 'p2s1', speaker: 'ë‚˜ë ˆì´ì…˜', kor: 'ì €ëŠ” ì§„ì§œ ì¬ëŠ¥ì´ ì—†ëŠ” ê²ƒ ê°™ì•„ìš”.', time: [0.3, 1.567], eng: "I really don't think I have any talent." },
                    { id: 'p2s2', speaker: 'ìš´ì˜ì', kor: 'ì €ë„ "ì¬ëŠ¥"ì´ë¼ëŠ” ë§ì— ë˜ê²Œ ë§ˆìŒì´ ì‘ì•„ì§€ê±°ë“ ìš”.', time: [1.6, 3.8], eng: 'I also feel very small/intimidated by the word "talent," you see.' },
                    { id: 'p2s3', speaker: 'ìš´ì˜ì', kor: 'ë¶„ëª… ë‚¨ë“¤ì€ ë˜ê²Œ ì–´ë ¤ì›Œí•˜ëŠ”ë°,', time: [3.833, 5.467], eng: 'Surely, what others find very difficult,' },
                    { id: 'p2s4', speaker: 'ìš´ì˜ì', kor: 'ë‚˜ëŠ” ë¬´ì‹¬ì½” í•˜ê³  ìˆëŠ” ê²ƒë“¤ì´ ìˆì„ ê±°ì˜ˆìš”.', time: [5.5, 7.5], eng: 'there must be things I am doing mindlessly.' },
                    { id: 'p2s5', speaker: 'ìš´ì˜ì', kor: 'ë­, ì´ëŸ° ê²ƒë“¤ ìˆì–ì•„ìš”.', time: [7.533, 8.433], eng: "Well, there are things like this, you know." },
                    { id: 'p2s6', speaker: 'ìš´ì˜ì', kor: 'ëˆ„êµ°ê°€ ì–˜ê¸°ë¥¼ ì§„ì‹¬ìœ¼ë¡œ ë“¤ì–´ì£¼ëŠ” ê²Œ ë„ˆë¬´ ì¬ë¯¸ìˆì–´ì„œ', time: [8.467, 10.6], eng: "Sincerely listening to someone's story is so enjoyable that" },
                    { id: 'p2s7', speaker: 'ìš´ì˜ì', kor: 'ê·¸ë ‡ê²Œ ê³„ì† ë“£ê²Œ ëœë‹¤ë“ ì§€.', time: [10.6, 11.8], eng: 'you end up listening like that continuously, or...' },
                    { id: 'p2s8', speaker: 'ìš´ì˜ì', kor: 'ì‚¬ì§„ ë˜ê²Œ ì˜ ì°ëŠ” ì¹œêµ¬ë“¤ ìˆì–ì•„ìš”.', time: [11.833, 13.467], eng: 'There are friends who take photos very well, you know.' },
                    { id: 'p2s9', speaker: 'ìš´ì˜ì', kor: 'ê·¸ë¦¬ê³  ë¨¸ë¦¬ë¥¼ ì˜ ë•‹ì•„ ì£¼ëŠ” ê²ƒë„ ì¬ëŠ¥ì¼ ìˆ˜ ìˆê³ ìš”.', time: [13.5, 15.267], eng: 'And braiding hair well can also be a talent.' },
                    { id: 'p2s10', speaker: 'ìš´ì˜ì', kor: 'í•™êµ ë‹¤ë‹ ë•Œ ê·¸ëŸ° ê±° ìˆì–ì•„ìš”.', time: [15.3, 16.133], eng: 'When you were in school, there were things like that, you know.' },
                    { id: 'p2s11', speaker: 'ìš´ì˜ì', kor: 'ì•ë¨¸ë¦¬ ì˜ë¼ ì£¼ëŠ” ì• ë“¤ ìˆì—ˆì–´ìš”.', time: [16.133, 23.95], eng: 'There were kids who cut bangs (for others).' },
                    { id: 'p2s12', speaker: 'ìš´ì˜ì', kor: 'ëˆ„êµ¬ì—ê²Œë‚˜ 1000ì›ì˜ ì¬ëŠ¥ì€ ìˆë‹¤.', time: [19.5, 22.633], eng: 'Everyone has a 1000 won talent.' },
                    { id: 'p2s13', speaker: 'ìš´ì˜ì', kor: 'ì† ìˆ˜ì „ì¦ ê´œì°®ì•„ìš”?', time: [22.667, 23.95], eng: 'Is a hand tremor okay?' }
                ];

                const part3Script = [
                    { id: 'p3s1', speaker: 'ë‚˜ë ˆì´ì…˜', kor: 'ë¬¼ê±´ì€ íŒ”ì§€ ì•ŠëŠ” ë¬´í˜•ì˜ ë§ˆì¼“ì…ë‹ˆë‹¤.', time: [0.1, 2.0], eng: 'It is an intangible market that does not sell physical items.' },
                    { id: 'p3s2', speaker: 'ìš´ì˜ì', kor: '1000ì›ì˜ ì¬ëŠ¥ ë§ˆì¼“ì€ ë¬´í˜•ì´ì—ìš”.', time: [2.033, 3.5], eng: "The '1000 Won Talent Market' is intangible." },
                    { id: 'p3s3', speaker: 'ìš´ì˜ì', kor: 'ìœ í˜• ë§ê³  ë¬´í˜•ì˜ ì¬ëŠ¥ì„ íŒë§¤í•˜ëŠ” ê³³ì…ë‹ˆë‹¤.', time: [3.533, 5.333], eng: 'It is a place that sells intangible talents, not tangible ones.' },
                    { id: 'p3s4', speaker: 'ìš´ì˜ì', kor: 'ê·¸ëŸ¼ ì œê°€ ì•…ì„¸ì„œë¦¬ë¥¼ ì˜ ë§Œë“¤ì–´ì„œ', time: [5.367, 6.833], eng: 'Then, if I make accessories well and' },
                    { id: 'p3s5', speaker: 'ìš´ì˜ì', kor: 'ì•…ì„¸ì„œë¦¬ë¥¼ ê°€ì ¸ê°€ëŠ” ê±´ ì•ˆ ëœë‹¤ëŠ” ê±°ì£ ?', time: [6.867, 8.6], eng: 'take accessories, that means it is not allowed, right?' },
                    { id: 'p3s6', speaker: 'ìš´ì˜ì', kor: 'ë§ì•„ìš”. ê·¸ëŸ°ë° ê·¸ ì•…ì„¸ì„œë¦¬ë¥¼ íŒë§¤í•˜ëŠ” ê±´ ë„ˆë¬´ ì¢‹ì§€.', time: [8.633, 10.267], eng: "That's right. But selling that accessory skill is very good." },
                    { id: 'p3s7', speaker: 'ìš´ì˜ì', kor: 'ê·¼ë° ê·¸ëŸ° ê³³ì€ ë§ì•„.', time: [10.3, 11.3], eng: 'But there are many places like that.' },
                    { id: 'p3s8', speaker: 'ìš´ì˜ì', kor: 'í”Œë¦¬ë§ˆì¼“ë„ ë‚˜ê°ˆ ìˆ˜ ìˆê³  ë§ì€ë°,', time: [11.333, 12.3], eng: 'You can also participate in flea markets and there are many,' },
                    { id: 'p3s9', speaker: 'ìš´ì˜ì', kor: 'ë‚´ê°€ ì´ ë§ˆì¼“ì„ ê¸°íší•˜ê²Œ ëœ í° ì´ìœ  ì¤‘ì— í•˜ë‚˜ëŠ”', time: [12.333, 14.633], eng: 'one of the big reasons I came to plan this market is' },
                    { id: 'p3s10', speaker: 'ìš´ì˜ì', kor: "'ë‚´ê°€ ê°€ì§€ê³  ìˆëŠ” ë¬´í˜•ì˜ ì¬ëŠ¥ì„ ëˆìœ¼ë¡œ í™˜ì‚°í•  ìˆ˜ ìˆëŠ” ê·¸ëŸ° ìë¦¬ëŠ” ë˜ ì—†ë‹¤'ë¼ëŠ” ê±°ì•¼.", time: [14.667, 18.167], eng: "'There is no other place where I can convert my intangible talent into money,' that's it." },
                    { id: 'p3s11', speaker: 'ìš´ì˜ì', kor: 'ë‹¨ìˆœíˆ ë‚´ ì¬ëŠ¥ì„ íŒë§¤í•˜ëŠ” ê²ƒë„ ìˆì§€ë§Œ,', time: [18.2, 19.633], eng: 'There is also simply selling my talent, but' },
                    { id: 'p3s12', speaker: 'ìš´ì˜ì', kor: 'ë¬´í˜•ì˜ ì¬ëŠ¥ ê°™ì€ ê²½ìš°ì—ëŠ” íŠ¹íˆë‚˜,', time: [19.667, 21.033], eng: 'in the case of intangible talents, especially,' },
                    { id: 'p3s13', speaker: 'ìš´ì˜ì', kor: 'ì´ ê°’ì„ ì–´ë–»ê²Œ ë§¤ê²¨ì•¼ í• ì§€ë„ ì¢€ ì•„ë¦¬ì†¡í•˜ê³  ì˜ ëª¨ë¥´ê² ê³ ,', time: [21.067, 24.0], eng: "I'm also a bit confused and don't really know how to set this price, and" },
                    { id: 'p3s14', speaker: 'ìš´ì˜ì', kor: 'ê·¸ëŸ° ë¬´í˜•ì˜ ì¬ëŠ¥ì„ íŒë§¤í•´ ë³´ë©´ì„œ ê·¸ ê³¼ì •ì—ì„œ', time: [24.033, 26.067], eng: 'while trying to sell such intangible talents, in that process' },
                    { id: 'p3s15', speaker: 'ìš´ì˜ì', kor: 'ë‚´ ìŠ¤ìŠ¤ë¡œ íš¨ëŠ¥ê°ì„ ì–»ê²Œ ëìœ¼ë©´ ì¢‹ê² ë‹¤.', time: [26.1, 28.267], eng: 'I hope (people) come to gain a sense of self-efficacy for themselves.' }
                ];

                // --- Global Quiz Sentences (Shared by all parts) ---
                const globalSentences = [
                    { id: 1, parts: ["'1000ì›ì˜ ì¬ëŠ¥ ë§ˆì¼“'ì€ 'ì•„, ì´ê²Œ ", "ì¸ê°€?' ì‹¶ì€ ì‘ì€ ëŠ¥ë ¥ë„ íŒ”ì•„ë³´ëŠ” ì‹œì¥ì´ì—ìš”."], answer: "ì¬ëŠ¥", bank: ["ì¬ëŠ¥", "ì‹œì¥", "ê°€ê²©", "ìƒê°"], eng_parts: ["The '1000 Won Talent Market' is a market where you can sell small abilities that make you think, 'Is this also a ", "?'"], eng_answer: "talent", eng_hint: "(ëª…ì‚¬) íŠ¹ë³„í•œ ëŠ¥ë ¥ì´ë‚˜ ê¸°ìˆ . (Noun) A special skill or ability.", eng_explanation: "Correct. The market is for selling 'ì¬ëŠ¥' (talent), even small ones you might doubt.", eng_wrongAnswerExplanations: { "ì‹œì¥": "This means 'market'. The market *is* the place, but not what you are selling.", "ê°€ê²©": "This means 'price'. You sell talent *for* a price.", "ìƒê°": "This means 'thought'. You are selling a skill, not a thought." } },
                    { id: 2, parts: ["ì´ ë§ˆì¼“ì˜ ìš´ì˜ìëŠ” \"", " 1000ì›ì˜ ì¬ëŠ¥ì´ ìˆì–´ìš”\"ë¼ê³  ë§í•´ìš”."], answer: "ëˆ„êµ¬ì—ê²Œë‚˜", bank: ["ë¶€ìì—ê²Œ", "ëª¨ë‘ì—ê²Œ", "ë‚˜ì—ê²Œë§Œ", "ëˆ„êµ¬ì—ê²Œë‚˜"], eng_explanation: "The operator believes 'everyone' (ëˆ„êµ¬ì—ê²Œë‚˜) has a talent they can sell.", eng_hint: "Everyone / To anyone", eng_parts: ["The market operator says, '", " has a 1000 won talent.'"], eng_answer: "Everyone (to anyone)", eng_wrongAnswerExplanations: { "ë¶€ìì—ê²Œ": "'ë¶€ìì—ê²Œ' means 'to rich people'.", "ëª¨ë‘ì—ê²Œ": "'ëª¨ë‘ì—ê²Œ' means 'to all', which is similar, but 'ëˆ„êµ¬ì—ê²Œë‚˜' (to anyone) fits the context of 'anyone can'.", "ë‚˜ì—ê²Œë§Œ": "'ë‚˜ì—ê²Œë§Œ' means 'only to me'." } },
                    { id: 3, parts: ["ìš´ì˜ìëŠ” \"ë‚¨ë“¤ì€ ì–´ë ¤ì›Œí•˜ì§€ë§Œ ë‚˜ëŠ” ", " í•˜ê³  ìˆëŠ” ê²ƒì´ ì¬ëŠ¥ì´ì—ìš”\"ë¼ê³  ë§í•´ìš”."], answer: "ë¬´ì‹¬ì½”", bank: ["ë¬´ì‹¬ì½”", "ì—´ì‹¬íˆ", "í˜ë“¤ê²Œ", "ì²œì²œíˆ"], eng_explanation: "Talent is defined as something you do 'casually' or 'unconsciously' (ë¬´ì‹¬ì½”) that others struggle with.", eng_hint: "Casually / Unconsciously", eng_parts: ["The operator says, 'Talent is something you do ", " that others find difficult.'"], eng_answer: "casually", eng_wrongAnswerExplanations: { "ì—´ì‹¬íˆ": "'ì—´ì‹¬íˆ' means 'diligently'.", "í˜ë“¤ê²Œ": "'í˜ë“¤ê²Œ' means 'with difficulty'.", "ì²œì²œíˆ": "'ì²œì²œíˆ' means 'slowly'." } },
                    { id: 4, parts: ["ì´ ë§ˆì¼“ì—ì„œëŠ” í‰ì†Œì— ", " ì¬ëŠ¥ì„ íŒ” ìˆ˜ ìˆì–´ìš”."], answer: "ë²„ë ¤ì§€ëŠ”", bank: ["ë²„ë ¤ì§€ëŠ”", "ì¸ê¸° ìˆëŠ”", "ë©‹ìˆëŠ”", "ì“°ëŠ”"], eng_explanation: "The market is for talents that are often 'thrown away' (ë²„ë ¤ì§€ëŠ”) because people don't think they are profitable.", eng_hint: "Wasted / Thrown away", eng_parts: ["In this market, you can sell talents that are usually '", "'."], eng_answer: "thrown away", eng_wrongAnswerExplanations: { "ì¸ê¸° ìˆëŠ”": "'ì¸ê¸° ìˆëŠ”' means 'popular'.", "ë©‹ìˆëŠ”": "'ë©‹ìˆëŠ”' means 'cool' or 'stylish'.", "ì“°ëŠ”": "'ì“°ëŠ”' means 'using'." } },
                    { id: 5, parts: ["ë³´í†µ, ì‚¬ëŒë“¤ì€ ", " ê²ƒë§Œ ì¬ëŠ¥ì´ë¼ê³  ìƒê°í•´ìš”."], answer: "ëˆì´ ë˜ëŠ”", bank: ["ëˆì´ ë˜ëŠ”", "ì¬ë¯¸ìˆëŠ”", "ì–´ë ¤ìš´", "íŠ¹ë³„í•œ"], eng_explanation: "The operator says people usually only consider things that are 'profitable' (ëˆì´ ë˜ëŠ”) as talent.", eng_hint: "Profitable / Makes money", eng_parts: ["Usually, people only think things that are '", "' are talents."], eng_answer: "profitable", eng_wrongAnswerExplanations: { "ì¬ë¯¸ìˆëŠ”": "'ì¬ë¯¸ìˆëŠ”' means 'fun'.", "ì–´ë ¤ìš´": "'ì–´ë ¤ìš´' means 'difficult'.", "íŠ¹ë³„í•œ": "'íŠ¹ë³„í•œ' means 'special'." } },
                    { id: 6, parts: ["íŠ¹íˆ, ë¬´í˜•ì˜ ì¬ëŠ¥ì€ ", "ê°€ ì–´ë ¤ì›Œì„œ ì‚¬ëŒë“¤ì´ ì¬ëŠ¥ì¸ì§€ ì•„ë‹Œì§€ ì˜ ëª°ë¼ìš”."], answer: "ê°’ì„ ë§¤ê¸°ê¸°", bank: ["ê°’ì„ ë§¤ê¸°ê¸°", "ëˆì„ ë²Œê¸°", "ë§Œë“¤ê¸°", "ì„ ë¬¼í•˜ê¸°"], eng_explanation: "It's hard to know if intangible skills are talents because 'setting a price' (ê°’ì„ ë§¤ê¸°ê¸°) for them is confusing.", eng_hint: "Setting a price", eng_parts: ["Especially for intangible talents, '", "' is difficult, so people don't know if it's a talent."], eng_answer: "setting a price", eng_wrongAnswerExplanations: { "ëˆì„ ë²Œê¸°": "'ëˆì„ ë²Œê¸°' means 'making money'.", "ë§Œë“¤ê¸°": "'ë§Œë“¤ê¸°' means 'making (it)'.", "ì„ ë¬¼í•˜ê¸°": "'ì„ ë¬¼í•˜ê¸°' means 'gifting (it)'." } },
                    { id: 7, parts: ["ê·¸ë˜ì„œ ì´ ë§ˆì¼“ì—ì„œëŠ” ì•¡ì„¸ì„œë¦¬ ê°™ì€ ë¬¼ê±´ì´ ì•„ë‹ˆë¼, ì‚¬ëŒë“¤ì´ ë¬´í˜•ì˜ ì¬ëŠ¥ì„ ", "."], answer: "íŒë§¤í•´ìš”", bank: ["íŒë§¤í•´ìš”", "êµ¬ë§¤í•´ìš”", "ë²„ë ¤ìš”", "ë§Œë“¤ì–´ìš”"], eng_explanation: "The market's purpose is for people to 'sell' (íŒë§¤í•´ìš”) their intangible talents.", eng_hint: "To sell", eng_parts: ["So in this market, people '", "' intangible talents, not physical objects like accessories."], eng_answer: "sell", eng_wrongAnswerExplanations: { "êµ¬ë§¤í•´ìš”": "'êµ¬ë§¤í•´ìš”' means 'buy'. Customers buy, sellers sell.", "ë²„ë ¤ìš”": "'ë²„ë ¤ìš”' means 'throw away'.", "ë§Œë“¤ì–´ìš”": "'ë§Œë“¤ì–´ìš”' means 'make'." } },
                    { id: 8, parts: ["ì´ ë§ˆì¼“ì—ì„œ ", "ì€ 1000ì›ìœ¼ë¡œ ì¬ëŠ¥ì„ ì‚¬ê³ , ê·¸ ì¬ëŠ¥ì˜ ê°€ê²©ì„ ìª½ì§€ì— ë”°ë¡œ ì ì–´ ì¤˜ìš”."], answer: "ê³ ê°ë“¤", bank: ["ìš´ì˜ìë“¤", "ê³ ê°ë“¤", "ì§ì›ë“¤", "íŒë§¤ìë“¤"], eng_explanation: "The 'customers' (ê³ ê°ë“¤) are the ones who buy the talent and provide the blind valuation.", eng_hint: "People who buy", eng_parts: ["In this market, '", "' buy talents for 1000 won and write down the talent's real value on a note."], eng_answer: "customers", eng_wrongAnswerExplanations: { "ìš´ì˜ìë“¤": "'ìš´ì˜ìë“¤' means 'operators'.", "ì§ì›ë“¤": "'ì§ì›ë“¤' means 'staff'.", "íŒë§¤ìë“¤": "'íŒë§¤ìë“¤' means 'sellers'." } },
                    { id: 9, parts: ["íŒë§¤ìë“¤ì€ ê·¸ ìª½ì§€ë¥¼ ë³´ê³ , ì¬ëŠ¥ì˜ ì§„ì§œ ê°€ì¹˜ë¥¼ ", " ìˆ˜ ìˆì–´ìš”."], answer: "íŒë‹¨í• ", bank: ["íŒë‹¨í• ", "ì´ìš©í• ", "êµ¬ê²½í• ", "íŒë§¤í• "], eng_explanation: "By seeing the notes, sellers can 'judge' or 'assess' (íŒë‹¨í• ) the real-world value of their talent.", eng_hint: "To judge / assess", eng_parts: ["Sellers see that note and can '", "' the true value of their talent."], eng_answer: "judge", eng_wrongAnswerExplanations: { "ì´ìš©í• ": "'ì´ìš©í• ' means 'to use'.", "êµ¬ê²½í• ": "'êµ¬ê²½í• ' means 'to look at'.", "íŒë§¤í• ": "'íŒë§¤í• ' means 'to sell'." } },
                    { id: 10, parts: ["ìš´ì˜ìëŠ” ì‚¬ëŒë“¤ì´ ì¬ëŠ¥ì„ íŒ”ë©´ì„œ 'ë‚´ê°€ í•  ìˆ˜ ìˆë‹¤'ëŠ” '", "'ì„ ì–»ì—ˆìœ¼ë©´ ì¢‹ê² ë‹¤ê³  ë§í–ˆì–´ìš”."], answer: "íš¨ëŠ¥ê°", bank: ["íš¨ëŠ¥ê°", "í”¼ë¡œê°", "ê°’ì–´ì¹˜", "ìš°ì›”ê°"], eng_explanation: "The operator's main goal is for sellers to gain 'self-efficacy' (íš¨ëŠ¥ê°), the belief in their own capabilities.", eng_hint: "A sense of 'I am capable'", eng_parts: ["The operator wants people to gain '", "' â€” the feeling of 'I can do this' â€” while selling their talent."], eng_answer: "self-efficacy", eng_wrongAnswerExplanations: { "í”¼ë¡œê°": "'í”¼ë¡œê°' means 'fatigue'.", "ê°’ì–´ì¹˜": "'ê°’ì–´ì¹˜' means 'value' or 'worth'.", "ìš°ì›”ê°": "'ìš°ì›”ê°' means 'a sense of superiority'." } }
                ];

                // --- Global Discussion Questions (Shared by all parts) ---
                const globalDiscussionQuestions = [
                    { num: 1, kor: "'ëˆ„êµ¬ì—ê²Œë‚˜ ì¬ëŠ¥ì€ ìˆë‹¤'ê³  ìƒê°í•´ìš”?", eng: "Do you think 'everyone has a talent'?", vocab: [ { term: "ëˆ„êµ¬ì—ê²Œë‚˜", meaning_eng: "To everyone" }, { term: "ì¬ëŠ¥ì€ ìˆë‹¤", meaning_eng: "To have a talent" } ] },
                    { num: 2, kor: "ì–´ë–¤ ì‚¬ëŒë“¤ì€ \"ì €ëŠ” ì§„ì§œ ì¬ëŠ¥ì´ ì—†ëŠ” ê²ƒ ê°™ì•„ìš”\"ë¼ê³  ë§í•´ìš”. ì™œ ì‚¬ëŒë“¤ì€ ìì‹ ì´ 'ì¬ëŠ¥ì´ ì—†ë‹¤'ê³  ìƒê°í• ê¹Œìš”?", eng: "Some people say, \"I really don't think I have any talent.\" Why do people think they 'have no talent'?", vocab: [ { term: "ì¬ëŠ¥ì´ ì—†ë‹¤", meaning_eng: "To have no talent" }, { term: "ìƒê°í•˜ë‹¤", meaning_eng: "To think" } ] },
                    { num: 3, kor: "ì¬ëŠ¥ì€ ë¬´ì—‡ì¼ê¹Œìš”? ì¬ëŠ¥ì€ 'ë‚¨ë“¤ì€ ì–´ë ¤ì›Œí•˜ì§€ë§Œ ë‚˜ëŠ” ë¬´ì‹¬ì½” í•˜ëŠ” ê²ƒ'ì¼ê¹Œìš”?", eng: "What is talent? Is talent 'something others find difficult but I do thoughtlessly'?", vocab: [ { term: "ì¬ëŠ¥", meaning_eng: "Talent" }, { term: "ë‚¨ë“¤ì€ ì–´ë ¤ì›Œí•˜ë‹¤", meaning_eng: "Others find it difficult" }, { term: "ë¬´ì‹¬ì½” í•˜ë‹¤", meaning_eng: "To do thoughtlessly / effortlessly" } ] },
                    { num: 4, kor: "ì–´ë–¤ ì¬ëŠ¥ì´ ëˆì´ ë ê¹Œìš”? ê·¸ë¦¬ê³  ì–´ë–¤ ì¬ëŠ¥ì´ ëˆì´ ì•ˆ ë ê¹Œìš”?", eng: "What kind of talents can make money? And what kind of talents do not make money?", vocab: [ { term: "ëˆì´ ë˜ë‹¤", meaning_eng: "To make money / be profitable" }, { term: "ëˆì´ ì•ˆ ë˜ë‹¤", meaning_eng: "To not make money" } ] },
                    { num: 5, kor: "ì¬ëŠ¥ì´ ëˆì´ ë˜ì§€ ì•Šìœ¼ë©´, ê·¸ ì¬ëŠ¥ì´ ë²„ë ¤ì§„ë‹¤ê³  ìƒê°í•´ìš”?", eng: "If a talent doesn't make money, do you think that talent is 'thrown away'?", vocab: [ { term: "ëˆì´ ë˜ì§€ ì•Šë‹¤", meaning_eng: "To not make money" }, { term: "ë²„ë ¤ì§€ë‹¤", meaning_eng: "To be thrown away" } ] },
                    { num: 6, kor: "ì´ ë§ˆì¼“ì€ ë¬¼ê±´ì´ ì•„ë‹Œ 'ë¬´í˜•'ì˜ ì¬ëŠ¥ì„ íŒ”ì•„ìš”. ì™œ ìš´ì˜ìëŠ” 'ìœ í˜•'ì´ ì•„ë‹Œ 'ë¬´í˜•'ì˜ ì¬ëŠ¥ì— ì§‘ì¤‘í–ˆì„ê¹Œìš”?", eng: "This market sells 'intangible' talents, not physical items. Why do you think the operator focused on 'intangible' talents instead of 'tangible' ones?", vocab: [ { term: "ë¬´í˜•ì˜ ì¬ëŠ¥", meaning_eng: "Intangible talent" }, { term: "ìœ í˜•", meaning_eng: "Tangible" }, { term: "ì§‘ì¤‘í•˜ë‹¤", meaning_eng: "To focus on" } ] },
                    { num: 7, kor: "'ë¬´í˜•ì˜ ì¬ëŠ¥'ì€ 'ê°’ì„ ë§¤ê¸°ê¸° ì•„ë¦¬ì†¡í•˜ë‹¤'ê³  í•´ìš”. ì™œ ë¬´í˜•ì˜ ì¬ëŠ¥ì€ ê°’ì„ ì •í•˜ê¸° ì–´ë ¤ìš¸ê¹Œìš”?", eng: "They say it's 'tricky to price' an 'intangible talent'. Why is it difficult to set a price for intangible talents?", vocab: [ { term: "ê°’ì„ ë§¤ê¸°ë‹¤", meaning_eng: "To set a price / to value" }, { term: "ì•„ë¦¬ì†¡í•˜ë‹¤", meaning_eng: "To be tricky / confusing" }, { term: "ê°’ì„ ì •í•˜ê¸° ì–´ë µë‹¤", meaning_eng: "Difficult to set a price" } ] },
                    { num: 8, kor: "ì´ ë§ˆì¼“ì—ì„œ ê³ ê°ë“¤ì´ ì¬ëŠ¥ì˜ 'ê°’ì–´ì¹˜'ë¥¼ ë‹¤ì‹œ ì •í•´ ì¤˜ìš”. ê¼­ ì¬ëŠ¥ì˜ 'ê°’ì–´ì¹˜'ë¥¼ ì •í•´ì•¼ í• ê¹Œìš”?", eng: "In this market, customers re-evaluate the 'value' of the talent. Is it necessary to define the 'value' of a talent?", vocab: [ { term: "ê°’ì–´ì¹˜", meaning_eng: "Value / Worth" }, { term: "ê°’ì„ ì •í•˜ë‹¤", meaning_eng: "To set a price / value" } ] },
                    { num: 9, kor: "ì—¬ëŸ¬ë¶„ì€ 1000ì›ì— ì–´ë–¤ ì¬ëŠ¥ì„ íŒ”ì•„ ë³´ê³  ì‹¶ì–´ìš”? ê·¸ë¦¬ê³  ì–´ë–¤ ì¬ëŠ¥ì„ ì‚¬ ë³´ê³  ì‹¶ì–´ìš”?", eng: "What talent would you want to try selling for 1,000 won? And what talent would you want to buy?", vocab: [ { term: "íŒ”ì•„ ë³´ë‹¤", meaning_eng: "To try selling" }, { term: "ì‚¬ ë³´ë‹¤", meaning_eng: "To try buying" } ] },
                    { num: 10, kor: "ì¬ëŠ¥ì„ 1000ì›ì—  íŒ”ì•„ ë³´ë©´, ìê¸° íš¨ëŠ¥ê°ì„ ì–»ì„ ìˆ˜ ìˆì„ê¹Œìš”?", eng: "If you try selling a talent for 1,000 won, do you think you can gain self-efficacy?", vocab: [ { term: "1000ì›ì— íŒ”ë‹¤", meaning_eng: "To sell for 1,000 won" }, { term: "ìê¸° íš¨ëŠ¥ê°", meaning_eng: "Self-efficacy" }, { term: "íš¨ëŠ¥ê°ì„ ì–»ë‹¤", meaning_eng: "To gain self-efficacy" } ] }
                ];

                // --- Global Vocab List (Shared by all parts) ---
                const vocabAndGrammarList = [
                    { "term": "ëˆ„êµ°ê°€", "mainDef": "someone; somebody.", "subDefs": [], "variants": ["ëˆ„êµ°ê°€ì˜", "ëˆ„êµ°ê°€í•œí…Œ", "ëˆ„êµ°ê°€"] },
                    { "term": "ì¬ëŠ¥", "mainDef": "talent; skill; gift.", "subDefs": [], "variants": ["ì¬ëŠ¥", "ì¬ëŠ¥ì„", "ì¬ëŠ¥ì´ë¼ê³ ", "ì¬ëŠ¥ë“¤ì´", "ì¬ëŠ¥ì¸ê°€", "ì¬ëŠ¥ë“¤ì„", "ì¬ëŠ¥ì´", "ì¬ëŠ¥ì¼", "ì¬ëŠ¥ì€"] },
                    { "term": "ì‚´ ìˆ˜ ìˆë‹¤ë©´", "mainDef": "if (you) could buy...", "subDefs": [ { "subTerm": "â€¢ ì‚¬ë‹¤", "subDef": "to buy." }, { "subTerm": "â€¢ -ã„¹/ì„ ìˆ˜ ìˆë‹¤", "subDef": "\"can; to be able to.\"" }, { "subTerm": "â€¢ -(ìœ¼)ë©´", "subDef": "\"if...\"; conditional particle." } ], "variants": ["ì‚´ ìˆ˜ ìˆë‹¤ë©´", "ì‚´ ìˆ˜ ìˆë‹¤"] },
                    { "term": "ëˆì´ ë˜ëŠ” ê·¸ë ‡ê²Œ ë˜ê²Œ ë¾°ì¡±í•œ ê±¸", "mainDef": "that kind of very sharp/specific thing that makes money.", "subDefs": [ { "subTerm": "â€¢ ëˆì´ ë˜ë‹¤", "subDef": "to make money; to be profitable." }, { "subTerm": "â€¢ -ëŠ”", "subDef": "used to turn a present-tense verb into an â€œadjective-ishâ€ phrase that describes the following noun" }, { "subTerm": "â€¢ ë˜ê²Œ", "subDef": "very; extremely (colloquial)." }, { "subTerm": "â€¢ ë¾°ì¡±í•œ ê²ƒ", "subDef": "a sharp/specific thing (colloquial for a niche or highly defined skill)." } ], "variants": ["ëˆì´ ë˜ëŠ” ê·¸ë ‡ê²Œ ë˜ê²Œ ë¾°ì¡±í•œ ê±¸"] },
                    { "term": "ì–ì•„ìš”", "mainDef": "...you know; as you know.", "subDefs": [ { "subTerm": "â€¢ -ì–ì•„ìš”", "subDef": "used to remind the listener of shared or obvious information, or to emphasize that something is already known" } ], "variants": ["ì–ì•„ìš”", "ìˆì–ì•„ìš”"] },
                    { "term": "ê·¸ë ‡ê¸° ë•Œë¬¸ì—", "mainDef": "because of that; therefore; for that reason.", "subDefs": [], "variants": ["ê·¸ë ‡ê¸° ë•Œë¬¸ì—"] },
                    { "term": "ë²„ë ¤ì§€ëŠ” ì¬ëŠ¥", "mainDef": "talents that are thrown away/wasted.", "subDefs": [ { "subTerm": "â€¢ ë²„ë ¤ì§€ë‹¤", "subDef": "to be thrown away; to be discarded (passive form of ë²„ë¦¬ë‹¤)." }, { "subTerm": "â€¢ -ëŠ”", "subDef": "used to turn a present-tense verb into an â€œadjective-ishâ€ phrase that describes the following noun" } ], "variants": ["ë²„ë ¤ì§€ëŠ” ì¬ëŠ¥"] },
                    { "term": "ë˜ê²Œ ë§ë‹¤ê³  ìƒê°í•´", "mainDef": "I think there are very many.", "subDefs": [ { "subTerm": "â€¢ ë˜ê²Œ", "subDef": "very; extremely (colloquial)." }, { "subTerm": "â€¢ ë§ë‹¤", "subDef": "to be many; to be much." }, { "subTerm": "â€¢ -ê³  ìƒê°í•˜ë‹¤", "subDef": "\"to think that...\"" } ], "variants": ["ë˜ê²Œ ë§ë‹¤ê³  ìƒê°í•´"] },
                    { "term": "ê·¸ëŸ° ì¬ëŠ¥ë“¤ì„ í•œë²ˆ 1000ì›ì— íŒ”ì•„ ë³´ëŠ” ê·¸ëŸ° ë§ˆì¼“", "mainDef": "a market like that where (you) try selling such talents for 1000 won.", "subDefs": [ { "subTerm": "â€¢ ê·¸ëŸ°", "subDef": "such; that kind of." }, { "subTerm": "â€¢ ì¬ëŠ¥", "subDef": "talent; skill." }, { "subTerm": "â€¢ íŒ”ì•„ ë³´ë‹¤", "subDef": "to try selling (from íŒ”ë‹¤ + -ì•„/ì–´ ë³´ë‹¤)." }, { "subTerm": "â€¢ -ëŠ”", "subDef": "used to turn a present-tense verb into an â€œadjective-ishâ€ phrase that describes the following noun" } ], "variants": ["ê·¸ëŸ° ì¬ëŠ¥ë“¤ì„ í•œë²ˆ 1000ì›ì— íŒ”ì•„ ë³´ëŠ” ê·¸ëŸ° ë§ˆì¼“"] },
                    { "term": "-ì´ë¼ê³  ìƒê°í•˜ë©´ ë¼", "mainDef": "you can just think of it as...", "subDefs": [ { "subTerm": "â€¢ -(ì´)ë¼ê³  ìƒê°í•˜ë‹¤", "subDef": "\"to think of (it) as [Noun].\"" }, { "subTerm": "â€¢ -(ìœ¼)ë©´ ë˜ë‹¤", "subDef": "used to say that one condition or action is enough, often translated as â€œall you have to do is â€¦â€ or â€œitâ€™s fine if â€¦.â€" } ], "variants": ["ì´ë¼ê³  ìƒê°í•˜ë©´ ë¼"] },
                    { "term": "1000ì›ì´ë¼ëŠ” ì¼ë‹¨ ì•½ì†ì„ í•˜ê³ ", "mainDef": "First, (we) make a promise of 1000 won, and...", "subDefs": [ { "subTerm": "â€¢ -(ì´)ë¼ëŠ”", "subDef": "\"which is called; named (describes the noun 'promise' as '1000 won').\"" }, { "subTerm": "â€¢ ì¼ë‹¨", "subDef": "first; for now." }, { "subTerm": "â€¢ ì•½ì†ì„ í•˜ë‹¤", "subDef": "to make a promise." } ], "variants": ["1000ì›ì´ë¼ëŠ” ì¼ë‹¨ ì•½ì†ì„ í•˜ê³ "] },
                    { "term": "ê·¸ ì•ˆì—ì„œ", "mainDef": "within that; inside that.", "subDefs": [], "variants": ["ê·¸ ì•ˆì—ì„œ"] },
                    { "term": "íŒ”ì•„ ë³´ëŠ” ê±°ì§€", "mainDef": "it's that (you) try selling (it).", "subDefs": [ { "subTerm": "â€¢ íŒ”ë‹¤", "subDef": "to sell." }, { "subTerm": "â€¢ -ì•„/ì–´ ë³´ë‹¤", "subDef": "\"to try (doing something).\"" }, { "subTerm": "â€¢ -ëŠ” ê±°ì§€", "subDef": "a colloquial form of -ëŠ” ê²ƒì´ì§€, used to explain, clarify, or emphasize what something really is; \"it is that ...\"" } ], "variants": ["íŒ”ì•„ ë³´ëŠ” ê±°ì§€"] },
                    { "term": "ì—¬ê¸°ì„œ ëë‚˜ëŠ” ê²Œ ì•„ë‹ˆë¼", "mainDef": "it's not that it ends here, but...", "subDefs": [ { "subTerm": "â€¢ ì—¬ê¸°ì„œ", "subDef": "here; at this point." }, { "subTerm": "â€¢ ëë‚˜ë‹¤", "subDef": "to end; to be over." }, { "subTerm": "â€¢ -ëŠ” ê²Œ ì•„ë‹ˆë¼", "subDef": "\"it's not that... (but...); not [A] but [B].\"" } ], "variants": ["ì—¬ê¸°ì„œ ëë‚˜ëŠ” ê²Œ ì•„ë‹ˆë¼"] },
                    { "term": "ì´ ì¬ëŠ¥ì„ ì´ìš©í•œ ê³ ê°ë“¤", "mainDef": "the customers who used this talent.", "subDefs": [ { "subTerm": "â€¢ ì¬ëŠ¥", "subDef": "talent; skill." }, { "subTerm": "â€¢ ì´ìš©í•˜ë‹¤", "subDef": "to use." }, { "subTerm": "â€¢ -ã„´/ì€", "subDef": "used to turn a past-tense verb into an \"adjective-ish\" phrase that describes the following noun" }, { "subTerm": "â€¢ ê³ ê°ë“¤", "subDef": "customers (plural)." } ], "variants": ["ì´ ì¬ëŠ¥ì„ ì´ìš©í•œ ê³ ê°ë“¤"] },
                    { "term": "ëˆ ì£¼ê³  ì‚°ë‹¤ë©´ ì–¼ë§ˆì— ì‚´ ê²ƒì¸ì§€", "mainDef": "if they were to buy it with money, how much they would buy it for.", "subDefs": [ { "subTerm": "â€¢ ëˆì„ ì£¼ê³  ì‚¬ë‹¤", "subDef": "to pay money and buy." }, { "subTerm": "â€¢ -(ìœ¼)ë©´", "subDef": "\"if...\"; conditional particle." }, { "subTerm": "â€¢ ì–¼ë§ˆì— -ã„¹ ê²ƒì¸ì§€", "subDef": "\"how much (one) would... (embedded question about future action/intention).\"" } ], "variants": ["ëˆ ì£¼ê³  ì‚°ë‹¤ë©´ ì–¼ë§ˆì— ì‚´ ê²ƒì¸ì§€"] },
                    { "term": "ë¸”ë¼ì¸ë“œì— ì ì–´ì„œ", "mainDef": "(they) write it anonymously and...", "subDefs": [ { "subTerm": "â€¢ ë¸”ë¼ì¸ë“œ (ì¢…ì´)", "subDef": "anonymously (lit. 'on a blind paper'); context implies an anonymous note." }, { "subTerm": "â€¢ ì ë‹¤", "subDef": "to write down." }, { "subTerm": "â€¢ -ì•„ì„œ/ì–´ì„œ", "subDef": "used when the first action is a necessary step for the second action to happen, or when the first action directly influences the second." } ], "variants": ["ë¸”ë¼ì¸ë“œì— ì ì–´ì„œ"] },
                    { "term": "ì´ ì…€ëŸ¬í•œí…Œ ë„˜ê²¨ ì¤˜", "mainDef": "give it over to this seller.", "subDefs": [ { "subTerm": "â€¢ ì…€ëŸ¬", "subDef": "seller (loanword)." }, { "subTerm": "â€¢ -í•œí…Œ", "subDef": "\"to (someone) (colloquial particle).\"" }, { "subTerm": "â€¢ ë„˜ê²¨ ì£¼ë‹¤", "subDef": "to hand over; to pass to." } ], "variants": ["ì´ ì…€ëŸ¬í•œí…Œ ë„˜ê²¨ ì¤˜"] },
                    { "term": "ëë‚˜ê³  ë‚˜ì„œ", "mainDef": "after (it) ends; after finishing.", "subDefs": [ { "subTerm": "â€¢ ëë‚˜ë‹¤", "subDef": "to end; to be over." }, { "subTerm": "â€¢ -ê³  ë‚˜ì„œ", "subDef": "\"after (doing something); upon finishing.\"" } ], "variants": ["ëë‚˜ê³  ë‚˜ì„œ"] },
                    { "term": "ëˆ„êµ°ê°€í•œí…Œ", "mainDef": "to someone.", "subDefs": [], "variants": ["ëˆ„êµ°ê°€í•œí…Œ"] },
                    { "term": "ì´ ì •ë„ì˜ ê°’ì–´ì¹˜ë¥¼ ì£¼ëŠ”êµ¬ë‚˜", "mainDef": "Oh, it provides this much value!", "subDefs": [ { "subTerm": "â€¢ ì´ ì •ë„", "subDef": "this much; this degree." }, { "subTerm": "â€¢ ê°’ì–´ì¹˜ë¥¼ ì£¼ë‹¤", "subDef": "to give value; to be worth." }, { "subTerm": "â€¢ -ëŠ”êµ¬ë‚˜", "subDef": "sentence ending expressing surprise or realization" } ], "variants": ["ì´ ì •ë„ì˜ ê°’ì–´ì¹˜ë¥¼ ì£¼ëŠ”êµ¬ë‚˜"] },
                    { "term": "-ë¼ëŠ” ê±¸ íŒë‹¨í•´ ë³¼ ìˆ˜ ìˆì–´.", "mainDef": "(you) can try to judge that...", "subDefs": [ { "subTerm": "â€¢ -ë¼ëŠ” ê±¸ íŒë‹¨í•˜ë‹¤", "subDef": "\"to judge the fact that...\"" } ], "variants": ["-ë¼ëŠ” ê±¸ íŒë‹¨í•´ ë³¼ ìˆ˜ ìˆì–´"] },
                    { "term": "ì¬ëŠ¥ì´ ì—†ëŠ” ê²ƒ ê°™ì•„ìš”", "mainDef": "I think I don't have any talent; It seems I have no talent.", "subDefs": [ { "subTerm": "â€¢ -(ìœ¼)ã„´/ëŠ” ê²ƒ ê°™ë‹¤", "subDef": "used to express assumption or guess about something that seems likely, often translated as â€œI think â€¦ / It looks like â€¦ / It seems â€¦.â€" } ], "variants": ["ì¬ëŠ¥ì´ ì—†ëŠ” ê²ƒ ê°™ì•„ìš”"] },
                    { "term": "'ì¬ëŠ¥'ì´ë¼ëŠ” ë§", "mainDef": "the word 'talent'.", "subDefs": [ { "subTerm": "â€¢ -(ì´)ë¼ëŠ” ë§", "subDef": "\"the word/saying (called) [Noun].\"" } ], "variants": ["'ì¬ëŠ¥'ì´ë¼ëŠ” ë§"] },
                    { "term": "ë˜ê²Œ", "mainDef": "very; extremely (colloquial).", "subDefs": [], "variants": ["ë˜ê²Œ"] },
                    { "term": "ë§ˆìŒì´ ì‘ì•„ì§€ê±°ë“ ìš”", "mainDef": "I feel small / intimidated, you see.", "subDefs": [ { "subTerm": "â€¢ ë§ˆìŒ", "subDef": "mind; heart." }, { "subTerm": "â€¢ ì‘ì•„ì§€ë‹¤", "subDef": "to become small (lit.); to feel intimidated or lose confidence." }, { "subTerm": "â€¢ -ê±°ë“ ìš”", "subDef": "used to state a reason or cause (\"because...\"), often in response to a question" } ], "variants": ["ë§ˆìŒì´ ì‘ì•„ì§€ê±°ë“ ìš”"] },
                    { "term": "ë¶„ëª…", "mainDef": "clearly; surely.", "subDefs": [], "variants": ["ë¶„ëª…"] },
                    { "term": "ë‚¨ë“¤", "mainDef": "others; other people.", "subDefs": [], "variants": ["ë‚¨ë“¤"] },
                    { "term": "ì–´ë ¤ì›Œí•˜ëŠ”ë°", "mainDef": "others find it difficult, but...", "subDefs": [ { "subTerm": "â€¢ ì–´ë ¤ì›Œí•˜ë‹¤", "subDef": "to find (something) difficult; to feel difficulty." }, { "subTerm": "â€¢ -ëŠ”ë°", "subDef": "used to show contrast, or set up background often softening the tone or inviting the listener to respond." } ], "variants": ["ì–´ë ¤ì›Œí•˜ëŠ”ë°"] },
                    { "term": "ë¬´ì‹¬ì½” í•˜ê³  ìˆëŠ” ê²ƒë“¤", "mainDef": "things that (I) am doing mindlessly/unconsciously.", "subDefs": [ { "subTerm": "â€¢ ë¬´ì‹¬ì½” í•˜ë‹¤", "subDef": "to do (something) mindlessly; unconsciously; without thinking." }, { "subTerm": "â€¢ -ê³  ìˆë‹¤", "subDef": "\"present progressive ('is/am ...-ing').\"" }, { "subTerm": "â€¢ -ëŠ” ê²ƒ", "subDef": "A colloquial form of -ëŠ” ê²ƒ, used to nominalize verbs by turning a verb into a noun phrase meaning â€œthe act of â€¦,â€ â€œthe fact of â€¦,â€ or â€œthe thing that â€¦â€" } ], "variants": ["ë¬´ì‹¬ì½” í•˜ê³  ìˆëŠ” ê²ƒë“¤"] },
                    { "term": "ì´ëŸ° ê²ƒë“¤ ìˆì–ì•„ìš”", "mainDef": "There are things like this, you know.", "subDefs": [ { "subTerm": "â€¢ -ì–ì•„ìš”", "subDef": "used to remind the listener of shared or obvious information, or to emphasize that something is already known" } ], "variants": ["ì´ëŸ° ê²ƒë“¤ ìˆì–ì•„ìš”"] },
                    { "term": "ëˆ„êµ°ê°€ ì–˜ê¸°ë¥¼ ì§„ì‹¬ìœ¼ë¡œ ë“¤ì–´ì£¼ëŠ” ê²Œ", "mainDef": "the act of sincerely listening to someone's story.", "subDefs": [ { "subTerm": "â€¢ ëˆ„êµ°ê°€", "subDef": "someone." }, { "subTerm": "â€¢ ì§„ì‹¬ìœ¼ë¡œ", "subDef": "sincerely; wholeheartedly." }, { "subTerm": "â€¢ ì–˜ê¸°ë¥¼ ë“¤ì–´ì£¼ë‹¤", "subDef": "to listen to someone's story (for them)." }, { "subTerm": "â€¢ -ëŠ” ê²Œ", "subDef": "A colloquial form of -ëŠ” ê²ƒ, used to nominalize verbs by turning a verb into a noun phrase meaning â€œthe act of â€¦,â€ â€œthe fact of â€¦,â€ or â€œthe thing that â€¦â€" } ], "variants": ["ëˆ„êµ°ê°€ ì–˜ê¸°ë¥¼ ì§„ì‹¬ìœ¼ë¡œ ë“¤ì–´ì£¼ëŠ” ê²Œ"] },
                    { "term": "ê³„ì† ë“£ê²Œ ëœë‹¤ë“ ì§€", "mainDef": "like ending up listening continuously, or...", "subDefs": [ { "subTerm": "â€¢ ê³„ì†", "subDef": "continuously." }, { "subTerm": "â€¢ ë“£ë‹¤", "subDef": "to listen." }, { "subTerm": "â€¢ -ê²Œ ë˜ë‹¤", "subDef": "\"to end up (doing); to come to (do).\"" }, { "subTerm": "â€¢ -ë“ ì§€", "subDef": "\"or (something like that); used to list examples.\"" } ], "variants": ["ê³„ì† ë“£ê²Œ ëœë‹¤ë“ ì§€"] },
                    { "term": "ì‚¬ì§„ ë˜ê²Œ ì˜ ì°ëŠ” ì¹œêµ¬", "mainDef": "a friend who takes photos very well.", "subDefs": [ { "subTerm": "â€¢ ì‚¬ì§„ì„ ì˜ ì°ë‹¤", "subDef": "to take photos well." }, { "subTerm": "â€¢ -ëŠ”", "subDef": "used to turn a present-tense verb into an â€œadjective-ishâ€ phrase that describes the following noun" } ], "variants": ["ì‚¬ì§„ ë˜ê²Œ ì˜ ì°ëŠ” ì¹œêµ¬"] },
                    { "term": "ë¨¸ë¦¬ë¥¼ ì˜ ë•‹ì•„ ì£¼ëŠ” ê²ƒ", "mainDef": "the act of braiding hair well (for someone).", "subDefs": [ { "subTerm": "â€¢ ë¨¸ë¦¬ë¥¼ ë•‹ì•„ ì£¼ë‹¤", "subDef": "to braid (someone's) hair (for them)." }, { "subTerm": "â€¢ -ëŠ” ê²ƒ", "subDef": "A colloquial form of -ëŠ” ê²ƒ, used to nominalize verbs by turning a verb into a noun phrase meaning â€œthe act of â€¦,â€ â€œthe fact of â€¦,â€ or â€œthe thing that â€¦â€" } ], "variants": ["ë¨¸ë¦¬ë¥¼ ì˜ ë•‹ì•„ ì£¼ëŠ” ê²ƒ"] },
                    { "term": "í•™êµ ë‹¤ë‹ ë•Œ", "mainDef": "when (I) was in school; when attending school.", "subDefs": [ { "subTerm": "â€¢ í•™êµì— ë‹¤ë‹ˆë‹¤", "subDef": "to attend school." }, { "subTerm": "â€¢ -ã„¹/ì„ ë•Œ", "subDef": "\"when; at the time of.\"" } ], "variants": ["í•™êµ ë‹¤ë‹ ë•Œ"] },
                    { "term": "ê·¸ëŸ° ê±° ìˆì–ì•„ìš”", "mainDef": "There's that kind of thing, you know.", "subDefs": [ { "subTerm": "â€¢ -ì–ì•„ìš”", "subDef": "used to remind the listener of shared or obvious information, or to emphasize that something is already known" } ], "variants": ["ê·¸ëŸ° ê±° ìˆì–ì•„ìš”"] },
                    { "term": "ì•ë¨¸ë¦¬ ì˜ë¼ ì£¼ëŠ” ì• ë“¤", "mainDef": "kids who cut bangs (for others).", "subDefs": [ { "subTerm": "â€¢ ì•ë¨¸ë¦¬", "subDef": "bangs (hair)." }, { "subTerm": "â€¢ ë¨¸ë¦¬ë¥¼ ì˜ë¼ ì£¼ë‹¤", "subDef": "to cut hair (for someone)." }, { "subTerm": "â€¢ -ëŠ” ì• ", "subDef": "\"kid/person who... (colloquial).\"" } ], "variants": ["ì•ë¨¸ë¦¬ ì˜ë¼ ì£¼ëŠ” ì• ë“¤"] },
                    { "term": "ëˆ„êµ¬ì—ê²Œë‚˜", "mainDef": "to everyone; for everyone.", "subDefs": [], "variants": ["ëˆ„êµ¬ì—ê²Œë‚˜"] },
                    { "term": "ì† ìˆ˜ì „ì¦ ê´œì°®ì•„ìš”?", "mainDef": "Is a hand tremor (shaky hands) okay?", "subDefs": [ { "subTerm": "â€¢ ìˆ˜ì „ì¦", "subDef": "hand tremor; shaky hands." } ], "variants": ["ì† ìˆ˜ì „ì¦ ê´œì°®ì•„ìš”?"] },
                    { "term": "ë¬¼ê±´ì€ íŒ”ì§€ ì•ŠëŠ” ë¬´í˜•ì˜ ë§ˆì¼“", "mainDef": "an intangible market that doesn't sell physical items.", "subDefs": [ { "subTerm": "â€¢ ë¬¼ê±´", "subDef": "item; object; thing." }, { "subTerm": "â€¢ íŒ”ì§€ ì•Šë‹¤", "subDef": "\"to not sell.\"" }, { "subTerm": "â€¢ -ëŠ”", "subDef": "used to turn a present-tense verb into an â€œadjective-ishâ€ phrase that describes the following noun" }, { "subTerm": "â€¢ ë¬´í˜•", "subDef": "intangible; formless." }, { "subTerm": "â€¢ ë§ˆì¼“", "subDef": "market (loanword)." } ], "variants": ["ë¬¼ê±´ì€ íŒ”ì§€ ì•ŠëŠ” ë¬´í˜•ì˜ ë§ˆì¼“"] },
                    { "term": "ë¬´í˜•", "mainDef": "intangible; formless.", "subDefs": [], "variants": ["ë¬´í˜•", "ë¬´í˜•ì´ì—ìš”", "ë¬´í˜•ì˜"] },
                    { "term": "ìœ í˜• ë§ê³ ", "mainDef": "not tangible (things), but...", "subDefs": [ { "subTerm": "â€¢ ìœ í˜•", "subDef": "tangible; physical form." }, { "subTerm": "â€¢ ë§ê³ ", "subDef": "\"not (A), but (B); instead of (A).\"" } ], "variants": ["ìœ í˜• ë§ê³ "] },
                    { "term": "íŒë§¤í•˜ëŠ” ê³³", "mainDef": "a place that sells; a place for selling.", "subDefs": [ { "subTerm": "â€¢ íŒë§¤í•˜ë‹¤", "subDef": "to sell." }, { "subTerm": "â€¢ -ëŠ” ê³³", "subDef": "\"a place where (one) does...\"" } ], "variants": ["íŒë§¤í•˜ëŠ” ê³³"] },
                    { "term": "ì•…ì„¸ì„œë¦¬", "mainDef": "accessories (loanword).", "subDefs": [], "variants": ["ì•…ì„¸ì„œë¦¬", "ì•…ì„¸ì„œë¦¬ë¥¼"] },
                    { "term": "ê°€ì ¸ê°€ëŠ” ê±´", "mainDef": "taking (it) (is)...", "subDefs": [ { "subTerm": "â€¢ ê°€ì ¸ê°€ë‹¤", "subDef": "to take; to carry away." }, { "subTerm": "â€¢ -ëŠ” ê±´", "subDef": "A colloquial form of -ëŠ” ê²ƒì€, used to nominalize verbs by turning a verb into a noun phrase meaning â€œthe act of â€¦,â€ â€œthe fact of â€¦,â€ or â€œthe thing that â€¦.â€" } ], "variants": ["ê°€ì ¸ê°€ëŠ” ê±´"] },
                    { "term": "ì•ˆ ëœë‹¤ëŠ” ê±°ì£ ?", "mainDef": "That means it's not allowed, right?", "subDefs": [ { "subTerm": "â€¢ -ëŠ” ê±°ì£ ", "subDef": "A colloquial form of -ëŠ” ê²ƒì´ë‹¤, used to explain, clarify, or emphasize what something really is; \"it is that ...\"" } ], "variants": ["ì•ˆ ëœë‹¤ëŠ” ê±°ì£ "] },
                    { "term": "íŒë§¤í•˜ëŠ” ê±´", "mainDef": "selling (it) (is)...", "subDefs": [ { "subTerm": "â€¢ íŒë§¤í•˜ë‹¤", "subDef": "to sell." }, { "subTerm": "â€¢ -ëŠ” ê±´", "subDef": "A colloquial form of -ëŠ” ê²ƒì€, used to nominalize verbs by turning a verb into a noun phrase meaning â€œthe act of â€¦,â€ â€œthe fact of â€¦,â€ or â€œthe thing that â€¦.â€" } ], "variants": ["íŒë§¤í•˜ëŠ” ê±´"] },
                    { "term": "ê·¸ëŸ° ê³³", "mainDef": "that kind of place.", "subDefs": [], "variants": ["ê·¸ëŸ° ê³³"] },
                    { "term": "í”Œë¦¬ë§ˆì¼“ë„ ë‚˜ê°ˆ ìˆ˜ ìˆê³ ", "mainDef": "(you) can also participate in flea markets, and...", "subDefs": [ { "subTerm": "â€¢ í”Œë¦¬ë§ˆì¼“", "subDef": "flea market (loanword)." }, { "subTerm": "â€¢ ë‚˜ê°€ë‹¤", "subDef": "to go out; to participate in." }, { "subTerm": "â€¢ -ã„¹/ì„ ìˆ˜ ìˆë‹¤", "subDef": "\"can; to be able to.\"" } ], "variants": ["í”Œë¦¬ë§ˆì¼“ë„ ë‚˜ê°ˆ ìˆ˜ ìˆê³ "] },
                    { "term": "ê¸°íší•˜ê²Œ ëœ í° ì´ìœ ", "mainDef": "the big reason (I) came to plan (this).", "subDefs": [ { "subTerm": "â€¢ ê¸°íší•˜ë‹¤", "subDef": "to plan; to organize (an event)." }, { "subTerm": "â€¢ -ê²Œ ë˜ë‹¤", "subDef": "\"to end up (doing); to come to (do).\"" }, { "subTerm": "â€¢ -ã„´/ì€", "subDef": "used to turn a past-tense verb into an \"adjective-ish\" phrase that describes the following noun" }, { "subTerm": "â€¢ ì´ìœ ", "subDef": "reason." } ], "variants": ["ê¸°íší•˜ê²Œ ëœ í° ì´ìœ "] },
                    { "term": "ë‚´ê°€ ê°€ì§€ê³  ìˆëŠ” ë¬´í˜•ì˜ ì¬ëŠ¥", "mainDef": "the intangible talent that I have.", "subDefs": [ { "subTerm": "â€¢ ê°€ì§€ê³  ìˆë‹¤", "subDef": "to have." }, { "subTerm": "â€¢ -ëŠ”", "subDef": "used to turn a present-tense verb into an â€œadjective-ishâ€ phrase that describes the following noun" }, { "subTerm": "â€¢ ë¬´í˜•", "subDef": "intangible; formless." }, { "subTerm": "â€¢ ì¬ëŠ¥", "subDef": "talent; skill." } ], "variants": ["ë‚´ê°€ ê°€ì§€ê³  ìˆëŠ” ë¬´í˜•ì˜ ì¬ëŠ¥"] },
                    { "term": "ëˆìœ¼ë¡œ í™˜ì‚°í•  ìˆ˜ ìˆëŠ” ê·¸ëŸ° ìë¦¬", "mainDef": "a place like that where (you) can convert (it) into money.", "subDefs": [ { "subTerm": "â€¢ ëˆìœ¼ë¡œ í™˜ì‚°í•˜ë‹¤", "subDef": "to convert into money; to put a monetary value on." }, { "subTerm": "â€¢ -ã„¹/ì„ ìˆ˜ ìˆë‹¤", "subDef": "\"can; to be able to.\"" }, { "subTerm": "â€¢ -ëŠ”", "subDef": "used to turn a present-tense verb into an â€œadjective-ishâ€ phrase that describes the following noun" }, { "subTerm": "â€¢ ìë¦¬", "subDef": "place; spot; opportunity." } ], "variants": ["ëˆìœ¼ë¡œ í™˜ì‚°í•  ìˆ˜ ìˆëŠ” ê·¸ëŸ° ìë¦¬"] },
                    { "term": "ë‹¨ìˆœíˆ", "mainDef": "simply; just.", "subDefs": [], "variants": ["ë‹¨ìˆœíˆ"] },
                    { "term": "íŒë§¤í•˜ëŠ” ê²ƒ", "mainDef": "the act of selling; selling (something).", "subDefs": [ { "subTerm": "â€¢ íŒë§¤í•˜ë‹¤", "subDef": "to sell." }, { "subTerm": "â€¢ -ëŠ” ê²ƒ", "subDef": "A colloquial form of -ëŠ” ê²ƒ, used to nominalize verbs by turning a verb into a noun phrase meaning â€œthe act of â€¦,â€ â€œthe fact of â€¦,â€ or â€œthe thing that â€¦â€" } ], "variants": ["íŒë§¤í•˜ëŠ” ê²ƒ"] },
                    { "term": "ê°™ì€ ê²½ìš°ì—ëŠ”", "mainDef": "in the case of...; as for...", "subDefs": [ { "subTerm": "â€¢ ê²½ìš°", "subDef": "case; instance." } ], "variants": ["ê°™ì€ ê²½ìš°ì—ëŠ”"] },
                    { "term": "íŠ¹íˆë‚˜", "mainDef": "especially (emphasized form of íŠ¹íˆ).", "subDefs": [], "variants": ["íŠ¹íˆë‚˜"] },
                    { "term": "ì´ ê°’ì„ ì–´ë–»ê²Œ ë§¤ê²¨ì•¼ í• ì§€ë„ ì¢€ ì•„ë¦¬ì†¡í•˜ê³ ", "mainDef": "(I'm) also a bit unsure how to set this price, and...", "subDefs": [ { "subTerm": "â€¢ ê°’ì„ ë§¤ê¸°ë‹¤", "subDef": "to set a price; to appraise." }, { "subTerm": "â€¢ ì–´ë–»ê²Œ -ì§€ ì•„ë¦¬ì†¡í•˜ë‹¤", "subDef": "\"to be unsure/confused about how to...\"" } ], "variants": ["ì´ ê°’ì„ ì–´ë–»ê²Œ ë§¤ê²¨ì•¼ í• ì§€ë„ ì¢€ ì•„ë¦¬ì†¡í•˜ê³ "] },
                    { "term": "íŒë§¤í•´ ë³´ë©´ì„œ", "mainDef": "while trying to sell (it)...", "subDefs": [ { "subTerm": "â€¢ íŒë§¤í•˜ë‹¤", "subDef": "to sell." }, { "subTerm": "â€¢ -ì•„/ì–´ ë³´ë‹¤", "subDef": "\"to try (doing something).\"" }, { "subTerm": "â€¢ -(ìœ¼)ë©´ì„œ", "subDef": "\"while (doing); as (one) does.\"" } ], "variants": ["íŒë§¤í•´ ë³´ë©´ì„œ"] },
                    { "term": "ê³¼ì •", "mainDef": "process; course.", "subDefs": [], "variants": ["ê³¼ì •"] },
                    { "term": "ë‚´ ìŠ¤ìŠ¤ë¡œ íš¨ëŠ¥ê°ì„ ì–»ê²Œ ëìœ¼ë©´ ì¢‹ê² ë‹¤", "mainDef": "I hope (people) come to gain a sense of self-efficacy for themselves.", "subDefs": [ { "subTerm": "â€¢ ìŠ¤ìŠ¤ë¡œ", "subDef": "for oneself; by oneself." }, { "subTerm": "â€¢ íš¨ëŠ¥ê°ì„ ì–»ë‹¤", "subDef": "to gain a sense of (self-)efficacy." }, { "subTerm": "â€¢ -ê²Œ ë˜ë‹¤", "subDef": "\"to come to (do); to end up (doing).\"" }, { "subTerm": "â€¢ -(ìœ¼)ë©´ ì¢‹ê² ë‹¤", "subDef": "\"I hope...; it would be good if...\"" } ], "variants": ["ë‚´ ìŠ¤ìŠ¤ë¡œ íš¨ëŠ¥ê°ì„ ì–»ê²Œ ëìœ¼ë©´ ì¢‹ê² ë‹¤"] }
                ];

                // --- Assemble All Parts ---
                const allVideoParts = [
                    {
                        part: "Part 1",
                        videoId: "TwJUbLOmBCM",
                        scriptContent: part1Script
                    },
                    {
                        part: "Part 2",
                        videoId: "jmx1APJhDhQ",
                        scriptContent: part2Script
                    },
                    {
                        part: "Part 3",
                        videoId: "IC6HTFlYTIw",
                        scriptContent: part3Script
                    }
                ];

                return { allVideoParts, vocabAndGrammarList, globalSentences, globalDiscussionQuestions };
            }, []);

            const currentPartData = allVideoParts[activeVideoPart];

            const { vocabMap, highlightData } = useMemo(() => {
                const vocabMap = new Map(vocabAndGrammarList.map(item => [item.term, item]));
                const wordMap = new Map();
                vocabAndGrammarList.forEach(item => wordMap.set(item.term, item));
                const allWords = Array.from(wordMap.keys()).sort((a, b) => b.length - a.length);
                const regexParts = [];
                allWords.forEach(word => {
                    const item = wordMap.get(word);
                    if (item.variants) item.variants.forEach(v => regexParts.push(v.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')));
                    let processed = word.replace(/[.*+?^${}()|[\]\\]/g, '\\$&').replace(/\s+/g, '\\s*');
                    if (word.endsWith('ë‹¤')) {
                        const parts = word.split(' ');
                        const lastPart = parts[parts.length - 1];
                        if (lastPart.endsWith('ë‹¤')) {
                            const stem = lastPart.slice(0, -1).replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                            const firstParts = parts.slice(0, -1).map(p => p.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'));
                            regexParts.push([...firstParts, `${stem}[ê°€-í£]*`].join('\\s*'));
                        } else { regexParts.push(`${processed.slice(0, -1)}[ê°€-í£]*`); }
                    } else { regexParts.push(processed); }
                });
                const regexString = [...new Set(regexParts)].sort((a,b) => b.length - a.length).join('|');
                return { vocabMap, highlightData: { regex: new RegExp(`(${regexString})`, 'g'), wordMap, sortedWords: allWords }};
            }, [vocabAndGrammarList]);

            const tabs = useMemo(() => {
                const baseTabs = [
                    { 
                        koreanName: 'ëŒ€í™” ìŠ¤í¬ë¦½íŠ¸', 
                        englishName: '(Transcript)', 
                        icon: <Video className="w-6 h-6"/>, 
                        content: <VideoMaterialsTab 
                            allVideoParts={allVideoParts}
                            activeVideoPart={activeVideoPart}
                            setActiveVideoPart={setActiveVideoPart}
                            currentScriptContent={currentPartData.scriptContent}
                            vocabAndGrammarList={vocabAndGrammarList} 
                            highlightData={highlightData} 
                            vocabMap={vocabMap} 
                            vocabRefs={vocabRefs} 
                            highlightedVocab={highlightedVocab} 
                            setHighlightedVocab={setHighlightedVocab} /> 
                    },
                    { 
                        koreanName: 'í•µì‹¬ ì–´íœ˜', 
                        englishName: '(Key Vocabulary)', 
                        icon: <List className="w-6 h-6"/>, 
                        content: (
                            <div>
                                <h2 className="text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3"><List className="w-8 h-8 text-green-600"/> í•µì‹¬ ì–´íœ˜ (Key Vocabulary)</h2>
                                <div className="w-full overflow-y-auto" style={{maxHeight: `calc(100vh - 150px)`}}>
                                    <div className="border rounded-lg bg-white p-2 shadow-lg">
                                        <div className="space-y-1">{vocabAndGrammarList.map(item => <VocabItem key={item.term} item={item} isHighlighted={item.term === highlightedVocab} ref={el => vocabRefs.current[item.term] = el} />)}</div>
                                    </div>
                                </div>
                            </div>
                        )
                    },
                    { 
                        koreanName: 'ë‚´ìš© í™•ì¸ í€´ì¦ˆ', 
                        englishName: '(Check-Up)', 
                        icon: <BookOpen className="w-6 h-6"/>, 
                        content: (
                            <div>
                                <h2 className="text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3"><BookOpen className="w-8 h-8 text-green-600"/> ë‚´ìš© í™•ì¸ í€´ì¦ˆ (Comprehension Check-Up)</h2>
                                <ComprehensionQuiz sentences={globalSentences} />
                            </div>
                        )
                    },
                    { 
                        koreanName: 'ìƒê°í•´ ë³´ê¸°', 
                        englishName: '(Discussion)', 
                        icon: <MessageSquare className="w-6 h-6"/>, 
                        content: (
                            <div>
                                <h2 className="text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3"><MessageSquare className="w-8 h-8 text-green-600"/> ìƒê°í•´ ë³´ê¸° (Food For Thought)</h2>
                                <DiscussionSection questions={globalDiscussionQuestions} />
                            </div>
                        ) 
                    }
                ];
                return baseTabs;
            }, [layoutMode, allVideoParts, activeVideoPart, vocabAndGrammarList, highlightData, vocabMap, highlightedVocab, vocabRefs, currentPartData, globalSentences, globalDiscussionQuestions]);

            return (
                <div className="bg-gray-50 text-gray-800 p-4 sm:p-6 md:p-8">
                    <div className="mx-auto transition-all duration-300" style={{ maxWidth: containerWidth }}>
                        <header className="text-center mb-12">
                            <h1 className="text-4xl md:text-5xl font-black text-gray-900 mb-2">ëˆ„êµ¬ì—ê²Œë‚˜ 1000ì›ì˜ ì¬ëŠ¥ì€ ìˆë‹¤?</h1>
                            <p className="text-xl text-gray-500" style={{fontFamily: "'Nanum Gothic', sans-serif"}}>Does Everyone Have a 1000 Won Talent?</p>
                        </header>
                        <Tabs tabs={tabs} />
                    </div>
                </div>
            );
        };
    
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
