<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÎàÑÍµ¨ÏóêÍ≤åÎÇò 1000ÏõêÏùò Ïû¨Îä•ÏùÄ ÏûàÎã§?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&family=IBM+Plex+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Í∏∞Î≥∏ Ìè∞Ìä∏ ÏÑ§Ï†ï */
        body { font-family: 'Nanum Gothic', sans-serif; }
        /* Ïñ¥Ìúò Î™©Î°ù ÏÇ¨Ïù¥ÎìúÎ∞î Ìè∞Ìä∏ */
        .vocab-sidebar { font-family: 'IBM Plex Sans KR', sans-serif; }
        /* Ïñ¥Ìúò ÌåùÏóÖ Ïä§ÌÉÄÏùº */
        .vocab-popup { font-family: 'Nanum Gothic', sans-serif; z-index: 50; max-width: 320px; white-space: normal; }
        /* Ìò∏Î≤Ñ Ìà¥ÌåÅ Ïä§ÌÉÄÏùº */
        .hover-tooltip { position: fixed; z-index: 9999; background: white; border: 2px solid #22c55e; border-radius: 8px; padding: 12px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); max-width: 320px; font-family: 'Nanum Gothic', sans-serif; animation: fadeIn 0.15s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
        /* ÏùºÎ∞ò Ïñ¥Ìúò Í∞ïÏ°∞ Ïä§ÌÉÄÏùº */
        .highlight-general { font-weight: 600; color: #374151; cursor: pointer; position: relative; transition: background-color 0.2s; }
        /* ÎßàÏö∞Ïä§ Ìò∏Î≤Ñ ÎòêÎäî ÌôúÏÑ±Ìôî Ïãú Ïä§ÌÉÄÏùº */
        .highlight-general:hover, .active-highlight { background-color: #dcfce7; border-radius: 3px; }
        .script-highlight { background-color: #e0f2fe; border-radius: 8px; }
        .vocab-highlight { background-color: #dcfce7; border: 2px solid #22c55e; border-radius: 8px; }

        /* --- ÎßêÌíçÏÑ† Ïä§ÌÉÄÏùº --- */
        .bubble-tail-left.bubble-kkn20::after {
            content: "";
            position: absolute;
            bottom: 6px;
            left: -8px;
            width: 0px;
            height: 0px;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-right: 8px solid #dcfce7;
            transition: border-color 0.3s;
        }

        .bubble-tail-right.bubble-other::after {
            content: "";
            position: absolute;
            bottom: 6px;
            right: -8px;
            width: 0px;
            height: 0px;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-left: 8px solid white;
            transition: border-color 0.3s;
        }

        .bubble-active.bubble-tail-left.bubble-kkn20::after,
        .bubble-active.bubble-tail-right.bubble-other::after {
            border-right-color: #fef9c3;
            border-left-color: #fef9c3;
        }

        /* Ïù∏ÏáÑ Ï†ÑÏö© Ïä§ÌÉÄÏùº */
        .print-only { display: none; }
        @media print {
            @page { size: A4; margin: 0.75cm 1cm; }
            .no-print { display: none !important; }
            .print-only { display: inline-block !important; }
            body, html { background: white !important; font-size: 9pt; }
            .mx-auto { max-width: none !important; padding: 0 !important; margin: 0 !important; border: none !important; box-shadow: none !important; }
            body > #root > div { padding: 0 !important; }
            * { box-shadow: none !important; border-color: transparent !important; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
            p, h1, h2, h3, h4, span, li { color: black !important; }
            p, li { line-height: 1.5; }
            header.text-center { margin-bottom: 1rem !important; }
            .pt-10 { padding-top: 1rem !important; }
            .mb-8 { margin-bottom: 0.4pt !important; }
            h1, h2 { font-size: 12pt !important; margin-bottom: 15px; }
            h3 { font-size: 12pt !important; margin-bottom: 10px; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>
    <script type="text/babel">
        // --- ÏïÑÏù¥ÏΩò Ïª¥Ìè¨ÎÑåÌä∏ ---
        const Icon = React.memo(({ children, className = 'w-6 h-6' }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>);
        const Video = ({ className }) => <Icon className={className}><path d="m22 8-6 4 6 4V8Z"></path><rect width="14" height="12" x="2" y="6" rx="2" ry="2"></rect></Icon>;
        const BookOpen = ({ className }) => <Icon className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></Icon>;
        const MessageSquare = ({ className }) => <Icon className={className}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></Icon>;
        const ThumbsUp = ({ className }) => <Icon className={className}><path d="M7 10v12"></path><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a2 2 0 0 1 3 1.88V5Z"></path></Icon>;
        const List = ({ className }) => <Icon className={className}><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></Icon>;
        const Spinner = ({ className = 'w-5 h-5' }) => (
            <svg className={`animate-spin ${className}`} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
        );

        // --- Í≥µÏö© Ïª¥Ìè¨ÎÑåÌä∏: Î≤àÏó≠ Î≤ÑÌäº ---
        const TranslateButton = React.memo(({ textToTranslate }) => {
            const { useState, useEffect, useRef, useCallback } = React;
            const [translation, setTranslation] = useState(null);
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState(null);
            const [show, setShow] = useState(false);
            const [buttonLang, setButtonLang] = useState('Translation');
            const isMounted = useRef(true);

            useEffect(() => {
                isMounted.current = true;
                setButtonLang('English');
                return () => { isMounted.current = false; };
            }, []);

            const handleTranslate = useCallback(async () => {
                if (show) { setShow(false); return; }
                if (translation) { setShow(true); return; }
                if (!textToTranslate || !textToTranslate.trim()) return; // ÎπÑÏñ¥ÏûàÎäî ÌÖçÏä§Ìä∏ Î≤àÏó≠ Î∞©ÏßÄ

                setIsLoading(true);
                setError(null);
                try {
                    const targetLanguage = 'English';
                    const prompt = `Translate the following Korean text to ${targetLanguage}. Provide only the most natural-sounding translation, without any additional explanations or quotation marks.`;
                    const payload = { contents: [{ role: "user", parts: [{ text: prompt }, { text: textToTranslate }] }] };
                    // NOTE: The API key is intentionally left blank.
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) throw new Error(`API Error: ${response.status}`);
                    const result = await response.json();
                    if (isMounted.current && result.candidates?.[0]?.content.parts[0].text) {
                        setTranslation(result.candidates[0].content.parts[0].text.trim());
                        setShow(true);
                    } else { throw new Error("Invalid API response format."); }
                } catch (err) { if (isMounted.current) setError("Î≤àÏó≠Ïóê Ïã§Ìå®ÌñàÏñ¥Ïöî."); }
                finally { if (isMounted.current) setIsLoading(false); }
            }, [show, translation, textToTranslate]);

            // textToTranslateÍ∞Ä ÎπÑÏñ¥ÏûàÏúºÎ©¥ Î≤ÑÌäºÏùÑ Î†åÎçîÎßÅÌïòÏßÄ ÏïäÏùå
            if (!textToTranslate || !textToTranslate.trim()) {
                return null;
            }

            return (
                <div className="mt-1 no-print">
                    <button onClick={handleTranslate} disabled={isLoading} className="text-xs text-gray-500 hover:text-gray-800 font-semibold py-1 px-2 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors disabled:text-gray-300">{isLoading ? 'Î≤àÏó≠ Ï§ë...' : (show ? 'Î≤àÏó≠ Ïà®Í∏∞Í∏∞' : `Î≤àÏó≠ (${buttonLang})`)}</button>
                    {show && translation && <p className="text-gray-600 text-base mt-2 mb-2 whitespace-pre-wrap">{translation}</p>}
                    {error && <p className="text-red-500 text-sm mt-1">{error}</p>}
                </div>
            );
        });

        // --- [ÎèôÏòÅÏÉÅ ÏûêÎ£å] ÌÉ≠ Í¥ÄÎ†® Ïª¥Ìè¨ÎÑåÌä∏ ---
        const HighlightedText = React.memo(({ text, highlightData, onWordHover, onWordLeave, lineId, activeWordId }) => {
            if (!text || !highlightData) return text;
            const { regex, wordMap, sortedWords } = highlightData;
            const parts = text.split(regex);
            return (<>{parts.map((part, index) => {
                if (!part) return null;
                if (index % 2 === 0) return part;
                const trimmedPart = part.trim();
                const baseForm = sortedWords.find(word => {
                    const vocabItem = wordMap.get(word);
                    if (vocabItem.variants && vocabItem.variants.includes(trimmedPart)) return true;
                    const cleanPart = trimmedPart.replace(/\s/g, '');
                    const cleanWord = word.replace(/\s/g, '');
                    if (word.endsWith('Îã§')) return cleanPart.startsWith(cleanWord.slice(0, -1));
                    return cleanPart.startsWith(cleanWord);
                });
                if (!baseForm) return part;
                const info = wordMap.get(baseForm);
                if (!info) return part;
                const uniqueWordId = `${lineId}-${index}-${baseForm}`;
                const classes = ['highlight-general', 'font-bold', activeWordId === uniqueWordId ? 'active-highlight' : ''].join(' ');
                return <span
                    key={index}
                    className={classes}
                    onMouseEnter={(e) => onWordHover(e, baseForm, lineId, index)}
                    onMouseLeave={onWordLeave}
                >{part}</span>;
            })}</>);
        });

        const HoverTooltip = React.memo(({ data, position }) => {
            if (!data || !position) return null;
            return (
                <div
                    className="hover-tooltip"
                    style={{ left: `${position.x}px`, top: `${position.y}px` }}
                >
                    <p className="font-bold text-lg text-green-700 mb-2">{data.term}</p>
                    <p className="text-gray-700 text-base">{data.mainDef}</p>
                    {data.subDefs && data.subDefs.length > 0 && (
                        <div className="mt-3 pt-3 border-t border-gray-200">
                            <ul className="space-y-1">
                                {data.subDefs.map((sub, i) => (
                                    <li key={i} className="text-sm">
                                        <span className="font-semibold text-gray-600">{sub.subTerm}:</span>{' '}
                                        <span className="text-gray-600">{sub.subDef}</span>
                                    </li>
                                ))}
                            </ul>
                        </div>
                    )}
                </div>
            );
        });

        const VocabItem = React.memo(React.forwardRef(({ item, isHighlighted }, ref) => {
            const { useState } = React;
            const [showExamples, setShowExamples] = useState(false);

            return (
                <div ref={ref} className={`p-4 rounded-lg border-b ${isHighlighted ? 'vocab-highlight' : 'bg-white'}`}>
                    <p className="font-bold text-[18px] text-green-700">{item.term}</p>
                    <div className="pl-4 mt-2 border-l-2">
                        <p className="text-gray-700 text-[17px]">{item.mainDef}</p>
                        {item.subDefs && item.subDefs.length > 0 && (
                            <div className="mt-3 pt-3 border-t">{item.subDefs.map((sub, index) => (
                                <div key={index} className="mt-2">
                                    <p className="font-semibold text-[17px]">{sub.subTerm}</p>
                                    <p className="text-gray-600 pl-2 text-[16px]">{sub.subDef}</p>
                                </div>
                            ))}</div>
                        )}
                    </div>
                    {item.examples && item.examples.length > 0 && (
                        <div className="mt-3 no-print">
                            <button onClick={() => setShowExamples(!showExamples)} className="text-xs bg-green-200 hover:bg-green-300 text-gray-600 py-1 px-2 rounded-md">
                                {showExamples ? 'Close Examples' : 'Sentence Examples'}
                            </button>
                            {showExamples && (
                                <div className="mt-3 p-3 bg-green-50 rounded-lg space-y-3 text-[15px]">
                                    {item.examples.map((ex, index) => (
                                        <div key={index}>
                                            <p className="font-medium text-gray-800">{ex.kor}</p>
                                            <p className="text-gray-400 hover:text-gray-700 transition-colors">{ex.eng}</p>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        }));

        const VideoMaterialsTab = ({currentScriptContent, vocabAndGrammarList, highlightData, vocabMap, vocabRefs, highlightedVocab, setHighlightedVocab, allVideoParts, activeVideoPart, setActiveVideoPart}) => {
            const { useState, useRef, useEffect, useCallback, useMemo } = React;
            const [activeWordId, setActiveWordId] = useState(null);
            const [player, setPlayer] = useState(null);
            const [activeScriptLine, setActiveScriptLine] = useState(null);
            const [isSyncEnabled, setIsSyncEnabled] = useState(true);
            const [hoverPopupData, setHoverPopupData] = useState(null);
            const [translationsVisible, setTranslationsVisible] = useState({});
            const [playerHeight, setPlayerHeight] = useState(0);
            const [isVocabSidebarVisible, setIsVocabSidebarVisible] = useState(true);
            const [isPortrait, setIsPortrait] = useState(window.matchMedia("(orientation: portrait)").matches);
            const [playbackRate, setPlaybackRate] = useState(0.70);

            const scriptLineRefs = useRef({});
            const intervalRef = useRef();
            const playerContainerRef = useRef(null);
            const hoverTimeoutRef = useRef(null);
            const scriptWrapperRef = useRef(null);
            const clipTimeoutRef = useRef(null);

            const activeScriptLineRef = useRef(activeScriptLine);
            activeScriptLineRef.current = activeScriptLine;

            const timeIndex = useMemo(() => {
                return currentScriptContent
                    .filter(line => line.time)
                    .map(line => ({ start: line.time[0], end: line.time[1], id: line.id }))
                    .sort((a, b) => a.start - b.start);
            }, [currentScriptContent]);

            const onPlayerReady = useCallback((event) => {
                setPlayer(event.target);
                event.target.setPlaybackRate(playbackRate);
            }, [playbackRate]);

            const setupPlayer = useCallback(() => {
                if (window.YT && window.YT.Player) {
                    const newPlayer = new window.YT.Player('youtube-player', {
                        height: '100%',
                        width: '100%',
                        videoId: allVideoParts[activeVideoPart].videoId,
                        events: { 'onReady': onPlayerReady }
                    });
                    setPlayer(newPlayer);
                }
            }, [onPlayerReady, allVideoParts, activeVideoPart]);

            useEffect(() => {
                const mediaQuery = window.matchMedia("(orientation: portrait)");
                const handleOrientationChange = (e) => setIsPortrait(e.matches);
                mediaQuery.addEventListener('change', handleOrientationChange);
                return () => mediaQuery.removeEventListener('change', handleOrientationChange);
            }, []);

            useEffect(() => {
                if (window.YT && document.getElementById('youtube-player')) {
                    if (!player) setupPlayer();
                } else if (!window.YT) {
                    window.onYouTubeIframeAPIReady = setupPlayer;
                }
                return () => { 
                    if (intervalRef.current) clearInterval(intervalRef.current); 
                    if (clipTimeoutRef.current) clearTimeout(clipTimeoutRef.current);
                };
            }, [setupPlayer, player]);

            useEffect(() => {
                let ro;
                if (playerContainerRef.current) {
                    const updateHeight = () => { if (playerContainerRef.current) setPlayerHeight(playerContainerRef.current.offsetHeight); };
                    ro = new ResizeObserver(updateHeight);
                    ro.observe(playerContainerRef.current);
                    updateHeight();
                }
                return () => ro?.disconnect();
            }, []);

            useEffect(() => {
                if (player && player.setPlaybackRate) {
                    player.setPlaybackRate(playbackRate);
                }
            }, [player, playbackRate]);

            useEffect(() => {
                if (player && player.loadVideoById) {
                    player.loadVideoById(allVideoParts[activeVideoPart].videoId);
                }
            }, [player, activeVideoPart, allVideoParts]);

            useEffect(() => {
                if (player && isSyncEnabled) {
                    intervalRef.current = setInterval(() => {
                        if (player.getCurrentTime) {
                            const currentTime = player.getCurrentTime();
                            const currentLine = timeIndex.find(line => currentTime >= line.start && currentTime < line.end);
                            const currentLineId = currentLine ? currentLine.id : null;
                            if (activeScriptLineRef.current !== currentLineId) {
                                setActiveScriptLine(currentLineId);
                            }
                        }
                    }, 250);
                } else {
                    clearInterval(intervalRef.current);
                }
                return () => clearInterval(intervalRef.current);
            }, [player, isSyncEnabled, timeIndex]);

            useEffect(() => {
                if (activeScriptLine && isSyncEnabled) {
                    const lineElement = scriptLineRefs.current[activeScriptLine];
                    const scriptWrapper = scriptWrapperRef.current;

                    if (lineElement && scriptWrapper) {
                        const wrapperHeight = scriptWrapper.clientHeight;
                        const lineTop = lineElement.offsetTop;
                        const lineHeight = lineElement.offsetHeight;
                        const targetScrollTop = lineTop - (wrapperHeight / 2) + (lineHeight / 2);

                        scriptWrapper.scrollTo({
                            top: targetScrollTop,
                            behavior: 'smooth'
                        });
                    }
                }
            }, [activeScriptLine, isSyncEnabled]);

            const handlePlayClip = (line) => {
                if (!player || !line.time) return;

                if (clipTimeoutRef.current) {
                    clearTimeout(clipTimeoutRef.current);
                }

                const [start, end] = line.time;
                const duration = (end - start) * 1000;

                if (player.seekTo && player.playVideo && player.pauseVideo && duration > 0) {
                    player.seekTo(start);
                    player.playVideo();

                    clipTimeoutRef.current = setTimeout(() => {
                        player.pauseVideo();
                        clipTimeoutRef.current = null;
                    }, duration);
                }
            };

            const handleRateChange = (e) => {
                const newRate = parseFloat(e.target.value);
                setPlaybackRate(newRate);
            };

            const handleWordHover = useCallback((e, baseForm, lineId, index) => {
                e.stopPropagation();
                if (hoverTimeoutRef.current) clearTimeout(hoverTimeoutRef.current);

                const uniqueWordId = `${lineId}-${index}-${baseForm}`;
                setActiveWordId(uniqueWordId);

                const wordData = vocabMap.get(baseForm);
                if (wordData) {
                    const rect = e.target.getBoundingClientRect();
                    let x = rect.left;
                    let y = rect.bottom + 5;
                    const tooltipWidth = 320;
                    if (x + tooltipWidth > window.innerWidth) {
                        x = rect.right - tooltipWidth;
                        if (x < 0) x = 10;
                    }
                    const tooltipHeight = 200;
                    if (y + tooltipHeight > window.innerHeight + window.scrollY) {
                        y = rect.top - tooltipHeight - 5;
                    }
                    setHoverPopupData({ data: wordData, position: { x, y } });
                    setHighlightedVocab(wordData.term);

                    const vocabElement = vocabRefs.current[wordData.term];
                    if (vocabElement) {
                        vocabElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }
                }
            }, [vocabMap, setHighlightedVocab, setActiveWordId, vocabRefs]);

            const handleWordLeave = useCallback(() => {
                hoverTimeoutRef.current = setTimeout(() => {
                    setHoverPopupData(null);
                    setHighlightedVocab(null);
                    setActiveWordId(null);
                }, 200);
            }, [setHighlightedVocab, setActiveWordId]);

            const toggleTranslation = (lineId) => {
                setTranslationsVisible(prev => ({ ...prev, [lineId]: !prev[lineId] }));
            };

            return (
                <div className="video-materials-content md:flex md:flex-row md:gap-6">
                    {hoverPopupData && <HoverTooltip data={hoverPopupData.data} position={hoverPopupData.position} />}
                    <div ref={playerContainerRef} className="video-wrapper md:w-[41%] md:sticky top-0 z-40 bg-gray-50 py-4 no-print">
                        
                        <div className="mb-4 flex space-x-1 border-b-2 border-gray-200 bg-white rounded-t-lg shadow-inner-sm overflow-hidden">
                            {allVideoParts.map((part, index) => (
                                <button
                                    key={index}
                                    onClick={() => setActiveVideoPart(index)}
                                    className={`flex-1 py-3 px-2 font-bold text-sm transition-colors duration-200 ${
                                        activeVideoPart === index
                                            ? 'border-b-4 border-green-500 text-green-600 bg-green-50'
                                            : 'text-gray-500 hover:text-gray-700 hover:bg-gray-100 border-b-4 border-transparent'
                                    }`}
                                >
                                    {part.part}
                                </button>
                            ))}
                        </div>

                        <div className={`w-full rounded-b-xl shadow-lg border-4 border-white overflow-hidden transition-all duration-300 ease-in-out aspect-[9/16]`}>
                            <div id="youtube-player" className="w-full h-full"></div>
                        </div>
                        <div className="mt-4 flex flex-row justify-between items-center gap-4">
                            <label htmlFor="sync-toggle" className="flex items-center justify-between cursor-pointer bg-white py-1.5 px-3 rounded-lg shadow-md border w-auto flex-none">
                                <span className="text-xs font-medium text-gray-900 whitespace-nowrap">Auto-scroll</span>
                                <div className="relative ml-3">
                                    <input type="checkbox" id="sync-toggle" className="sr-only" checked={isSyncEnabled} onChange={() => setIsSyncEnabled(!isSyncEnabled)} />
                                    <div className={`block w-10 rounded-full transition-colors ${isSyncEnabled ? 'bg-green-500' : 'bg-gray-200'}`} style={{ height: '0.35cm' }}></div>
                                    <div className={`dot absolute left-1 top-[2.6px] bg-white w-2 h-2 rounded-full transition-transform ${isSyncEnabled ? 'transform translate-x-6' : ''}`}></div>
                                </div>
                            </label>
                            
                            <div className="flex items-center gap-2 bg-white py-1.5 px-3 rounded-lg shadow-md border w-auto flex-1">
                                <span className="text-xs font-medium text-gray-900">Speed</span>
                                <input
                                    type="range"
                                    min="0.70"
                                    max="1.20"
                                    step="0.01"
                                    value={playbackRate}
                                    onChange={handleRateChange}
                                    className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer mx-2"
                                    aria-label="Playback speed"
                                />
                                <span className="text-xs font-semibold text-green-700 w-12 text-right">{playbackRate.toFixed(2)}x</span>
                            </div>
                        </div>
                    </div>
                    <div className="script-wrapper md:w-[59%] md:max-h-[calc(100vh-4rem)] md:overflow-y-auto" ref={scriptWrapperRef}>
                        <main className="flex-grow">
                            <div className="space-y-6">
                                {currentScriptContent.map(line => {
                                    const hasTranslation = !!line.eng;
                                    const isActive = activeScriptLine === line.id;

                                    if (line.kor.startsWith('‚Ä¢')) {
                                        return (
                                            <div key={line.id} ref={el => scriptLineRefs.current[line.id] = el}
                                                className={`p-3 my-2 rounded-lg transition-colors duration-300 ${isActive ? 'bg-yellow-100' : ''}`}>
                                                <p className="whitespace-pre-wrap text-lg text-gray-800">
                                                    <HighlightedText text={line.kor} highlightData={highlightData} onWordHover={handleWordHover} onWordLeave={handleWordLeave} lineId={line.id} activeWordId={activeWordId} />
                                                </p>
                                                {translationsVisible[line.id] && hasTranslation && (
                                                    <p className="text-gray-600 text-base mt-2">{line.eng}</p>
                                                )}
                                                <div className="flex items-center gap-2 mt-2 no-print">
                                                    {hasTranslation && (
                                                        <button onClick={() => toggleTranslation(line.id)} className="text-xs text-gray-600 bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition">
                                                            {translationsVisible[line.id] ? 'Hide translation' : 'Translation'}
                                                        </button>
                                                    )}
                                                    {/* <TranslateButton textToTranslate={line.eng ? '' : line.kor} /> */}
                                                </div>
                                            </div>
                                        );
                                    }

                                    const isYuna = line.speaker === 'ÎÇòÎ†àÏù¥ÏÖò' || line.speaker === 'Ïö¥ÏòÅÏûê';
                                    const bubbleWrapperClasses = `flex flex-col max-w-[100%] sm:max-w-[100%] ${isYuna ? 'items-start ml-3' : 'items-end self-end mr-3'}`;
                                    const bubbleBaseClasses = 'relative px-5 py-3 rounded-2xl shadow-md transition-colors duration-300';
                                    const yunaBubbleColor = 'bg-green-100';
                                    const woodyBubbleColor = 'bg-white';
                                    const activeBubbleColor = 'bg-yellow-100';
                                    const tailClass = isYuna ? 'bubble-tail-left bubble-kkn20' : 'bubble-tail-right bubble-other';
                                    const bubbleClasses = `${bubbleBaseClasses} ${isActive ? activeBubbleColor : (isYuna ? yunaBubbleColor : woodyBubbleColor)} ${tailClass} ${isActive ? 'bubble-active' : ''}`;
                                    const speakerNameClasses = `font-bold mb-1 ${isYuna ? 'text-green-800' : 'text-blue-800'}`;

                                    return (
                                        <div key={line.id} ref={el => scriptLineRefs.current[line.id] = el} className="flex flex-col w-full">
                                            <div className={bubbleWrapperClasses}>
                                                <p className={`${speakerNameClasses} ${isYuna ? 'self-start' : 'self-end'}`}>{line.speaker}</p>
                                                <div className={bubbleClasses}>
                                                    <p className="whitespace-pre-wrap text-lg text-gray-800">
                                                        <HighlightedText text={line.kor} highlightData={highlightData} onWordHover={handleWordHover} onWordLeave={handleWordLeave} lineId={line.id} activeWordId={activeWordId} />
                                                    </p>
                                                </div>
                                                <div className={`w-full flex flex-col ${isYuna ? 'items-start' : 'items-end'}`}>
                                                    {translationsVisible[line.id] && hasTranslation && (
                                                        <p className="text-gray-500 text-base mt-2 px-2">{line.eng}</p>
                                                    )}
                                                    <div className="flex items-center gap-2 mt-2 px-2 no-print">
                                                        {line.time && (
                                                            <button onClick={() => handlePlayClip(line)} className="text-xs px-2 py-1 rounded-md transition bg-gray-100 hover:bg-gray-200 text-gray-600">
                                                                Play Clip
                                                            </button>
                                                        )}
                                                        {hasTranslation && (
                                                            <button onClick={() => toggleTranslation(line.id)} className="text-xs text-gray-600 bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition">
                                                                {translationsVisible[line.id] ? 'Î≤àÏó≠ Ïà®Í∏∞Í∏∞' : 'Î≤àÏó≠ Î≥¥Í∏∞'}
                                                            </button>
                                                        )}
                                                        {/* <TranslateButton textToTranslate={line.eng ? '' : line.kor} /> */}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </main>
                    </div>
                </div>
            )
        }

        // --- [ÌÄ¥Ï¶à&ÌÜ†Î°†] ÌÉ≠ Í¥ÄÎ†® Ïª¥Ìè¨ÎÑåÌä∏ ---
        const ComprehensionQuiz = ({ sentences }) => {
            const { useState, useMemo } = React;
            const [selectedWords, setSelectedWords] = useState({});
            const [results, setResults] = useState({});
            const [translationsVisible, setTranslationsVisible] = useState({});
            const [hintsVisible, setHintsVisible] = useState({});

            const shuffledSentences = useMemo(() => {
                const shuffleArray = (array) => {
                    const newArray = [...array];
                    for (let i = newArray.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                    }
                    return newArray;
                };
                return sentences.map(sentence => ({ ...sentence, bank: shuffleArray(sentence.bank) }));
            }, [sentences]);

            const handleWordSelect = (id, word) => {
                setSelectedWords(prev => ({...prev, [id]: word}));
                const isCorrect = sentences.find(s => s.id === id).answer === word;
                setResults(prev => ({...prev, [id]: isCorrect}));
                setHintsVisible(prev => ({ ...prev, [id]: false }));
            };
            const handleToggleTranslation = (id) => { setTranslationsVisible(prev => ({...prev, [id]: !prev[id]})); };
            const handleToggleHint = (id) => { if (results[id] !== true) setHintsVisible(prev => ({...prev, [id]: !prev[id]})); };

            return (
                <div className="space-y-8">
                    {shuffledSentences.map((s, index) => (
                        <div key={s.id} className="p-6 border rounded-xl bg-white shadow-lg transition-all duration-300">
                            <p className="text-gray-700 font-bold text-lg mb-4">{index + 1}. Îã§Ïùå ÎπàÏπ∏Ïóê ÏïåÎßûÏùÄ ÎßêÏùÑ Í≥†Î•¥ÏÑ∏Ïöî. (Choose the correct word for the blank.)</p>
                            <div className="p-4 bg-gray-100 rounded-lg text-left mb-3 text-gray-900 text-xl font-bold">
                                {s.parts[0]}
                                <span className="inline-block bg-yellow-200 text-green-800 px-3 py-1 rounded-md font-extrabold mx-2">
                                    {hintsVisible[s.id] ? `[ ${s.eng_hint} ]` : (selectedWords[s.id] || '___')}
                                </span>
                                {s.parts[1]}
                                {s.parts[2] && (
                                    <React.Fragment>
                                        <span className="inline-block bg-yellow-200 text-green-800 px-3 py-1 rounded-md font-extrabold mx-2">
                                            {hintsVisible[s.id] ? `[ ${s.eng_hint} ]` : (selectedWords[s.id] || '___')}
                                        </span>
                                        {s.parts[2]}
                                    </React.Fragment>
                                )}
                                {s.parts[3] && (
                                    <React.Fragment>
                                        <span className="inline-block bg-yellow-200 text-green-800 px-3 py-1 rounded-md font-extrabold mx-2">
                                            {hintsVisible[s.id] ? `[ ${s.eng_hint} ]` : (selectedWords[s.id] || '___')}
                                        </span>
                                        {s.parts[3]}
                                    </React.Fragment>
                                )}
                                {results[s.id] === true && <span className="inline-block ml-2 text-green-500">‚úì</span>}
                                {results[s.id] === false && <span className="inline-block ml-2 text-red-500">‚úó</span>}
                            </div>
                            {translationsVisible[s.id] && (
                                <div className="text-gray-600 italic p-3 bg-gray-50 rounded-lg text-left mt-2 text-base">
                                    {results[s.id] ? (<span>{s.eng_parts[0]}<strong className="text-green-600">{s.eng_answer}</strong>{s.eng_parts[1]} {s.eng_parts[2] && <React.Fragment><strong className="text-green-600">{s.eng_answer}</strong>{s.eng_parts[2]}</React.Fragment>} {s.eng_parts[3] && <React.Fragment><strong className="text-green-600">{s.eng_answer}</strong>{s.eng_parts[3]}</React.Fragment>}</span>)
                                    : (<span>{s.eng_parts[0]}<span className="font-bold">___</span>{s.eng_parts[1]} {s.eng_parts[2] && <React.Fragment><span className="font-bold">___</span>{s.eng_parts[2]}</React.Fragment>} {s.eng_parts[3] && <React.Fragment><span className="font-bold">___</span>{s.eng_parts[3]}</React.Fragment>}</span>)}
                                </div>
                            )}
                            <div className="text-left mb-4 flex gap-2">
                                <button onClick={() => handleToggleHint(s.id)} className="text-xs bg-yellow-200 hover:bg-yellow-300 text-yellow-800 font-bold py-1 px-3 rounded-full transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed" disabled={results[s.id] === true}>ÌûåÌä∏ (Hint)</button>
                                <button onClick={() => handleToggleTranslation(s.id)} className="text-xs bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-1 px-3 rounded-full transition duration-200">Î≤àÏó≠ (Translation)</button>
                            </div>
                            <div className="flex justify-start flex-wrap gap-3">
                                {s.bank.map(word => (
                                    <button
                                        key={word}
                                        onClick={() => handleWordSelect(s.id, word)}
                                        className={`px-4 py-2 rounded-lg text-lg font-bold transition-all transform hover:scale-105 shadow-md ${selectedWords[s.id] === word ? (results[s.id] ? 'bg-green-500 text-white ring-2 ring-opacity-50 ring-green-400' : 'bg-red-500 text-white ring-2 ring-red-300') : 'bg-white text-gray-800 hover:bg-gray-100 border'}`}
                                    >{word}</button>
                                ))}
                            </div>
                            {results[s.id] !== undefined && (
                                <div className={`mt-4 p-4 border-l-4 rounded-r-lg ${results[s.id] ? 'bg-green-50 border-green-400' : 'bg-red-50 border-red-400'}`}>
                                    <p className={`font-bold ${results[s.id] ? 'text-green-800' : 'text-red-800'} flex items-center gap-2 text-lg`}>{results[s.id] ? 'Correct!' : 'Try again.'}</p>
                                    <p className="mt-2 text-gray-700 text-base italic">{results[s.id] ? s.eng_explanation : s.eng_wrongAnswerExplanations[selectedWords[s.id]]}</p>
                                </div>
                            )}
                        </div>
                    ))}
                </div>
            );
        };

        const SentenceChecker = ({ value, onChange, placeholder, question }) => {
            const { useState } = React;
            const [feedback, setFeedback] = useState(null);
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState(null);

            const checkSentence = async () => {
                if (!value || value.trim() === '') {
                    setError("Î¨∏Ïû•ÏùÑ ÏûÖÎ†•Ìï¥Ïïº ÌîºÎìúÎ∞±ÏùÑ Î∞õÏùÑ Ïàò ÏûàÏñ¥Ïöî.");
                    setFeedback(null); return;
                }
                setIsLoading(true); setError(null); setFeedback(null);
                const prompt = `You are an advanced Korean language tutor AI for B1-C2 level learners. Analyze the user's sentence in response to a specific question. The user's answer is in Korean. Your entire response MUST be a JSON object, with all string values in Korean (ending in -Ïöî) and English.\n\nQuestion: "${question}"\nUser's Answer: "${value}"\n\nYour response MUST be a JSON object with the specified schema.`;
                const payload = {
                    contents: [{ role: "user", parts: [{ text: prompt }] }],
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: { type: "OBJECT", properties: { "is_relevant": { "type": "BOOLEAN" }, "relevance_feedback_kor": { "type": "STRING", "nullable": true }, "relevance_feedback_eng": { "type": "STRING", "nullable": true }, "is_correct": { "type": "BOOLEAN", "nullable": true }, "feedback_message_kor": { "type": "STRING", "nullable": true }, "feedback_message_eng": { "type": "STRING", "nullable": true }, "corrected_sentence": { "type": "STRING", "nullable": true }, "explanation_kor": { "type": "STRING", "nullable": true }, "explanation_eng": { "type": "STRING", "nullable": true }, "alternative_expressions": { "type": "ARRAY", "items": { "type": "OBJECT", "properties": { "expression_kor": { "type": "STRING" }, "expression_eng": { "type": "STRING" } }, "required": ["expression_kor", "expression_eng"] } } }, "required": ["is_relevant"] }
                    }
                };
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                try {
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) throw new Error(`API error: ${response.statusText}`);
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0 && result.candidates[0].content.parts[0].text) {
                        try {
                            const parsedJson = JSON.parse(result.candidates[0].content.parts[0].text);
                            setFeedback(parsedJson);
                        } catch (parseError) {
                            console.error("Error parsing JSON response:", parseError, result.candidates[0].content.parts[0].text);
                            setError("AIÏùò ÏùëÎãµ ÌòïÏãùÏù¥ Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏïÑ Ï≤òÎ¶¨Ìï† Ïàò ÏóÜÏñ¥Ïöî.");
                        }
                    } else {
                        console.error("Invalid API response structure:", result);
                        setError("AIÏùò ÏùëÎãµÏùÑ Ï≤òÎ¶¨ÌïòÎäî Îç∞ Î¨∏Ï†úÍ∞Ä Î∞úÏÉùÌñàÏñ¥Ïöî.");
                    }
                } catch (err) {
                    console.error("Error checking sentence:", err);
                    setError("Î¨∏Ïû• Í≤ÄÏÇ¨Ïóê Ïã§Ìå®ÌñàÏñ¥Ïöî. ÎÑ§Ìä∏ÏõåÌÅ¨ Ïó∞Í≤∞ÏùÑ ÌôïÏù∏ÌïòÍ±∞ÎÇò Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥ Ï£ºÏÑ∏Ïöî.");
                }
                finally { setIsLoading(false); }
            };

            const renderFeedbackSection = (title, content) => (content && content.length > 0 && (
                <div>
                    <p className="text-gray-800 font-bold text-[17px]">{title}</p>
                    {Array.isArray(content) ? (
                        <ul className="list-disc list-inside space-y-2 mt-1">
                            {content.map((item, index) => (
                                <li key={index} className="text-gray-600 text-[16px]">
                                    <p className="font-medium">{item.expression_kor || item.sentence_kor}</p>
                                    <p className="text-gray-500 italic text-sm">{item.expression_eng || item.sentence_eng}</p>
                                </li>
                            ))}
                        </ul>
                    ) : (<p className="text-gray-700 font-medium text-[18px]">{content}</p>)}
                </div>
            ));

            return (
                <div>
                    <textarea className="w-full p-3 border rounded-md focus:ring-2 focus:ring-green-400 transition text-lg" rows="3" placeholder={placeholder} value={value} onChange={onChange} />
                    <button onClick={checkSentence} disabled={isLoading} className="mt-3 flex items-center justify-center gap-2 bg-green-200 text-gray-900 py-2 px-4 rounded-md transition-colors hover:bg-green-300 disabled:opacity-50 disabled:cursor-wait font-semibold text-[14px]">
                        {isLoading ? <Spinner className="w-5 h-5" /> : '‚ú®'} {isLoading ? 'ÌîºÎìúÎ∞± ÏÉùÏÑ± Ï§ë...' : 'AIÏóêÍ≤å ÌîºÎìúÎ∞± Î∞õÍ∏∞'}
                    </button>
                    {error && <p className="mt-2 text-sm text-red-600">{error}</p>}
                    {feedback && (
                        <div className="mt-4 p-4 bg-green-50 border-l-4 border-green-100 rounded-r-lg space-y-4">
                            {!feedback.is_relevant && ( <div><p className="font-bold text-red-800 flex items-center gap-2 text-lg">{feedback.relevance_feedback_kor}</p><p className="text-gray-600 italic">{feedback.relevance_feedback_eng}</p></div> )}
                            {feedback.is_relevant && feedback.is_correct && ( <div><p className="font-bold text-green-800 flex items-center gap-2 text-lg"><ThumbsUp className="w-5 h-5"/> {feedback.feedback_message_kor}</p><p className="text-gray-600 italic">{feedback.feedback_message_eng}</p></div> )}
                            {feedback.is_relevant && !feedback.is_correct && (<>
                                {feedback.corrected_sentence && ( <div><p className="text-gray-800 font-bold text-[17px]">‚ú® ÏàòÏ†ïÎêú Î¨∏Ïû•:</p><p className="text-gray-700 font-medium text-[18px]">{feedback.corrected_sentence}</p></div> )}
                                {(feedback.explanation_kor || feedback.explanation_eng) && ( <div><p className="text-gray-800 font-bold text-[17px]">ÏÑ§Î™Ö:</p>{feedback.explanation_kor && <p className="text-gray-600 text-[16px]">{feedback.explanation_kor}</p>}{feedback.explanation_eng && <p className="text-gray-500 italic mt-1 text-[15px]">{feedback.explanation_eng}</p>}</div> )}
                            </>)}
                            {feedback.alternative_expressions && feedback.alternative_expressions.length > 0 && renderFeedbackSection('üí° Îã§Î•∏ ÌëúÌòÑ:', feedback.alternative_expressions)}
                        </div>
                    )}
                </div>
            );
        };

        const DiscussionSection = ({ questions }) => {
            const { useState } = React;
            const [translationsVisible, setTranslationsVisible] = useState({});
            const [userQuestionAnswers, setUserQuestionAnswers] = useState({});
            const toggleTranslation = (id) => { setTranslationsVisible(prev => ({ ...prev, [id]: !prev[id] })); };

            return (
                <div className="space-y-10">
                    {questions.map((q) => (
                        <div key={q.num} className="p-6 border rounded-xl bg-white shadow-lg">
                            <p className="text-gray-900 text-xl font-bold">{q.num}. {q.kor}</p>
                            {translationsVisible[`q-${q.num}`] && (<p className="whitespace-pre-wrap text-gray-600 italic mt-1 text-base">{q.eng}</p>)}
                            <button onClick={() => toggleTranslation(`q-${q.num}`)} className="text-xs text-gray-800 bg-gray-200 hover:bg-gray-300 font-bold py-1 px-3 rounded-full transition duration-200 mt-2 mb-6">Î≤àÏó≠ (Translation)</button>
                            {q.vocab && q.vocab.length > 0 && (
                                <div className="mt-4 space-y-4">
                                    <h3 className="font-bold text-lg text-gray-800">üìçÌïµÏã¨ ÌëúÌòÑ (Essential phrases)</h3>
                                    {q.vocab.map((v, i) => (
                                        <div key={i} className="pl-4 border-l-2 border-gray-200 py-2">
                                            <p className="font-semibold text-green-700 text-lg">{v.term}: <span className="font-medium text-gray-700 text-base">{v.meaning_eng}</span></p>
                                        </div>
                                    ))}
                                </div>
                            )}
                            <div className="mt-6">
                                <h3 className="font-bold text-lg text-gray-800 mb-2">ÌïµÏã¨ ÌëúÌòÑÏùÑ ÏÇ¨Ïö©Ìï¥ÏÑú ÏßàÎ¨∏Ïóê ÎåÄÎãµÌï¥ Î≥¥ÏÑ∏Ïöî.</h3>
                                <SentenceChecker
                                    value={userQuestionAnswers[`q-${q.num}`] || ''}
                                    onChange={(e) => setUserQuestionAnswers(prev => ({...prev, [`q-${q.num}`]: e.target.value}))}
                                    placeholder="Ïó¨Í∏∞Ïóê ÎãµÎ≥ÄÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî (Type your response here)"
                                    question={q.kor}
                                />
                            </div>
                        </div>
                    ))}
                </div>
            );
        };

        const Tabs = ({ tabs }) => {
            const { useState } = React;
            const [activeTab, setActiveTab] = useState(0);
            return (
                <div>
                    <div className="border-b border-gray-200 no-print">
                        <nav className="-mb-px flex space-x-6" aria-label="Tabs">
                            {tabs.map((tab, index) => (
                                <button
                                    key={tab.name} onClick={() => setActiveTab(index)}
                                    className={`${ index === activeTab ? 'border-green-500 text-green-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm sm:text-base transition-colors flex items-center gap-2`}
                                >{tab.icon} {tab.name}</button>
                            ))}
                        </nav>
                    </div>
                    <div className="pt-10">{tabs[activeTab].content}</div>
                </div>
            );
        };

        // --- Î©îÏù∏ App Ïª¥Ìè¨ÎÑåÌä∏ ---
        const App = () => {
            const { useState, useEffect, useMemo, useRef } = React;
            const [containerWidth, setContainerWidth] = useState('30cm');
            const [layoutMode, setLayoutMode] = useState('large');
            
            const vocabRefs = useRef({});
            const [highlightedVocab, setHighlightedVocab] = useState(null);
            const [activeVideoPart, setActiveVideoPart] = useState(0);

            useEffect(() => {
                const handleResize = () => {
                    const heightInPx = window.innerHeight; const widthInPx = window.innerWidth;
                    const isMobileDevice = /Mobi|Android/i.test(navigator.userAgent);
                    const isTabletDevice = /iPad|Android(?!.*Mobi)/i.test(navigator.userAgent);
                    const isPortrait = window.matchMedia("(orientation: portrait)").matches;
                    let newMode = 'large'; let newContainerWidth = '30cm';

                    if ((isMobileDevice || isTabletDevice) && isPortrait) { newMode = 'mobile'; newContainerWidth = '100%'; }
                    else {
                        if (heightInPx < 832) { newMode = 'split'; newContainerWidth = '100%'; }
                        else if (heightInPx < 907) { newMode = 'small'; newContainerWidth = '22cm'; }
                        else if (heightInPx < 983) { newMode = 'medium'; newContainerWidth = '24cm'; }
                        else { newMode = 'large'; newContainerWidth = '30cm'; }
                    }
                    setContainerWidth(newContainerWidth); setLayoutMode(newMode); document.body.dataset.layoutMode = newMode;
                    const baseWidthPx = 30 * 37.795; let effectiveWidthPx;
                    if (newContainerWidth === '100%') { effectiveWidthPx = widthInPx; }
                    else { const cmValue = parseFloat(newContainerWidth); effectiveWidthPx = cmValue * 37.795; }
                    if (newMode !== 'large') { const scale = Math.min(1.0, effectiveWidthPx / baseWidthPx); const finalScale = Math.max(0.8, scale); document.documentElement.style.fontSize = `${16 * finalScale}px`; }
                    else { document.documentElement.style.fontSize = '16px'; }
                };
                window.addEventListener('resize', handleResize); handleResize();
                return () => window.removeEventListener('resize', handleResize);
            }, []);

            const { allVideoParts, vocabAndGrammarList, globalSentences, globalDiscussionQuestions } = useMemo(() => {
                // --- Script Content for Each Part ---
                const part1Script = [
                    { id: 'p1s1', speaker: 'ÎÇòÎ†àÏù¥ÏÖò', kor: '1000ÏõêÏúºÎ°ú ÎàÑÍµ∞Í∞ÄÏùò Ïû¨Îä•ÏùÑ ÏÇ¥ Ïàò ÏûàÎã§Î©¥?', time: [0.300, 1.567], eng: "What if you could buy someone's talent for 1,000 won?" },
                    { id: 'p1s2', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Î≥¥ÌÜµ Ïö∞Î¶¨Í∞Ä Ïû¨Îä•Ïù¥ÎùºÍ≥† ÌïòÎ©¥,', time: [1.600, 2.800], eng: "Usually, when we say 'talent'," },
                    { id: 'p1s3', speaker: 'Ïö¥ÏòÅÏûê', kor: 'ÎèàÏù¥ ÎêòÎäî Í∑∏Î†áÍ≤å ÎêòÍ≤å Îæ∞Ï°±Ìïú Í±∏ ÏÉùÍ∞ÅÌïòÏûñÏïÑ.', time: [2.833, 4.400], eng: "we think of something very specific that makes money, you know." },
                    { id: 'p1s4', speaker: 'Ïö¥ÏòÅÏûê', kor: 'ÎÇòÎäî Í∑∏Î†áÍ∏∞ ÎïåÎ¨∏Ïóê Î≤ÑÎ†§ÏßÄÎäî Ïû¨Îä•Îì§Ïù¥ ÎêòÍ≤å ÎßéÎã§Í≥† ÏÉùÍ∞ÅÌï¥.', time: [4.333, 6.500], eng: "I think that's why so many talents get thrown away." },
                    { id: 'p1s5', speaker: 'Ïö¥ÏòÅÏûê', kor: '1000ÏõêÏùò Ïû¨Îä• ÎßàÏºìÏùÄ,', time: [6.533, 7.367], eng: "The 1,000 Won Talent Market is," },
                    { id: 'p1s6', speaker: 'Ïö¥ÏòÅÏûê', kor: '‚ÄúÏïÑ, Ïù¥Í≤å Ïû¨Îä•Ïù∏Í∞Ä?",', time: [7.400, 8.000], eng: "\"Ah, is this even a talent?\"," },
                    { id: 'p1s7', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Í∑∏Îü∞ Ïû¨Îä•Îì§ÏùÑ ÌïúÎ≤à 1000ÏõêÏóê ÌåîÏïÑ Î≥¥Îäî Í∑∏Îü∞ ÎßàÏºìÏù¥ÎùºÍ≥† ÏÉùÍ∞ÅÌïòÎ©¥ Îèº.', time: [8.000, 10.900], eng: "you can think of it as a market where you try selling those kinds of talents for 1,000 won." },
                    { id: 'p1s8', speaker: 'Ïö¥ÏòÅÏûê', kor: '1000ÏõêÏù¥ÎùºÎäî ÏùºÎã® ÏïΩÏÜçÏùÑ ÌïòÍ≥†,', time: [10.933, 12.133], eng: "First, we make a promise of 1,000 won," },
                    { id: 'p1s9', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Í∑∏ ÏïàÏóêÏÑú ÌåîÏïÑ Î≥¥Îäî Í±∞ÏßÄ ÎÇ¥ Ïû¨Îä•ÏùÑ.', time: [12.167, 14.067], eng: "and within that, you try selling your talent." },
                    { id: 'p1s10', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Í∑ºÎç∞ Ïó¨Í∏∞ÏÑú ÎÅùÎÇòÎäî Í≤å ÏïÑÎãàÎùº', time: [14.100, 14.933], eng: "But it doesn't end there." },
                    { id: 'p1s11', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Ïù¥ Ïû¨Îä•ÏùÑ Ïù¥Ïö©Ìïú Í≥†Í∞ùÎì§ÏùÄ', time: [14.967, 16.500], eng: "The customers who used this talent" },
                    { id: 'p1s12', speaker: 'Ïö¥ÏòÅÏûê', kor: "'Ïù¥Í±∏ ÎÇ¥Í∞Ä Îèà Ï£ºÍ≥† ÏÇ∞Îã§Î©¥ ÏñºÎßàÏóê ÏÇ¥ Í≤ÉÏù∏ÏßÄ'Î•º Î∏îÎùºÏù∏ÎìúÏóê Ï†ÅÏñ¥ÏÑú", time: [16.533, 20.633], eng: "write down 'how much I would pay for this if I were buying it' anonymously" },
                    { id: 'p1s13', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Ïù¥ ÏÖÄÎü¨ÌïúÌÖå ÎÑòÍ≤® Ï§ò.', time: [20.633, 21.733], eng: "and hand it over to the seller." },
                    { id: 'p1s14', speaker: 'Ïö¥ÏòÅÏûê', kor: 'ÎßàÏºìÏù¥ ÎÅùÎÇòÍ≥† ÎÇòÏÑú,', time: [21.767, 22.600], eng: "After the market is over," },
                    { id: 'p1s15', speaker: 'Ïö¥ÏòÅÏûê', kor: '"ÎÇ¥ Ïû¨Îä•Ïù¥ ÎàÑÍµ∞Í∞ÄÌïúÌÖå Ïù¥ Ï†ïÎèÑÏùò Í∞íÏñ¥ÏπòÎ•º Ï£ºÎäîÍµ¨ÎÇò"ÎùºÎäî Í±∏ ÌåêÎã®Ìï¥ Î≥º Ïàò ÏûàÏñ¥.', time: [22.600, 25.900], eng: "you can judge, \"Oh, my talent has this much value to someone.\"" }
                ];

                const part2Script = [
                    { id: 'p2s1', speaker: 'ÎÇòÎ†àÏù¥ÏÖò', kor: 'Ï†ÄÎäî ÏßÑÏßú Ïû¨Îä•Ïù¥ ÏóÜÎäî Í≤É Í∞ôÏïÑÏöî.', time: [0.300, 1.567], eng: "I really don't think I have any talent." },
                    { id: 'p2s2', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Ï†ÄÎèÑ \'Ïû¨Îä•\'Ïù¥ÎùºÎäî ÎßêÏóê ÎêòÍ≤å ÎßàÏùåÏù¥ ÏûëÏïÑÏßÄÍ±∞Îì†Ïöî.', time: [1.600, 3.800], eng: "The word 'talent' makes me feel small, too." },
                    { id: 'p2s3', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Î∂ÑÎ™Ö ÎÇ®Îì§ÏùÄ ÎêòÍ≤å Ïñ¥Î†§ÏõåÌïòÎäîÎç∞,', time: [3.833, 5.467], eng: "There are definitely things that others find very difficult," },
                    { id: 'p2s4', speaker: 'Ïö¥ÏòÅÏûê', kor: 'ÎÇòÎäî Î¨¥Ïã¨ÏΩî ÌïòÍ≥† ÏûàÎäî Í≤ÉÎì§Ïù¥ ÏûàÏùÑ Í±∞ÏòàÏöî.', time: [5.500, 7.500], eng: "but that you do without even thinking." },
                    { id: 'p2s5', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Î≠ê, Ïù¥Îü∞ Í≤ÉÎì§ ÏûàÏûñÏïÑÏöî.', time: [7.533, 8.433], eng: "You know, things like this." },
                    { id: 'p2s6', speaker: 'Ïö¥ÏòÅÏûê', kor: 'ÎàÑÍµ∞Í∞Ä ÏñòÍ∏∞Î•º ÏßÑÏã¨ÏúºÎ°ú Îì§Ïñ¥Ï£ºÎäî Í≤å ÎÑàÎ¨¥ Ïû¨ÎØ∏ÏûàÏñ¥ÏÑú', time: [8.467, 10.600], eng: "Like, you genuinely enjoy listening to someone's story" },
                    { id: 'p2s7', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Í∑∏Î†áÍ≤å Í≥ÑÏÜç Îì£Í≤å ÎêúÎã§Îì†ÏßÄ.', time: [10.600, 11.800], eng: "so you just keep listening." },
                    { id: 'p2s8', speaker: 'Ïö¥ÏòÅÏûê', kor: 'ÏÇ¨ÏßÑ ÎêòÍ≤å Ïûò Ï∞çÎäî ÏπúÍµ¨Îì§ ÏûàÏûñÏïÑÏöî.', time: [11.833, 13.467], eng: "There are friends who take really good photos, you know." },
                    { id: 'p2s9', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Í∑∏Î¶¨Í≥† Î®∏Î¶¨Î•º Ïûò ÎïãÏïÑ Ï£ºÎäî Í≤ÉÎèÑ Ïû¨Îä•Ïùº Ïàò ÏûàÍ≥†Ïöî.', time: [13.500, 15.267], eng: "And being good at braiding hair can also be a talent." },
                    { id: 'p2s10', speaker: 'Ïö¥ÏòÅÏûê', kor: 'ÌïôÍµê Îã§Îãê Îïå Í∑∏Îü∞ Í±∞ ÏûàÏûñÏïÑÏöî.', time: [15.300, 16.133], eng: "You know, like back in school." },
                    { id: 'p2s11', speaker: 'Ïö¥ÏòÅÏûê', kor: 'ÏïûÎ®∏Î¶¨ ÏûòÎùº Ï£ºÎäî Ïï†Îì§ ÏûàÏóàÏñ¥Ïöî.', time: [16.133, 23.950], eng: "There were kids who would cut bangs for others." }, // Note: This line has a long duration, covering the next one.
                    { id: 'p2s12', speaker: 'Ïö¥ÏòÅÏûê', kor: 'ÎàÑÍµ¨ÏóêÍ≤åÎÇò 1000ÏõêÏùò Ïû¨Îä•ÏùÄ ÏûàÎã§.', time: [19.500, 22.633], eng: "Everyone has a 1,000 won talent." }, // This line is overlapped by p2s11, but we keep it separate as per user data.
                    { id: 'p2s13', speaker: 'Ïö¥ÏòÅÏûê', kor: 'ÏÜê ÏàòÏ†ÑÏ¶ù Í¥úÏ∞ÆÏïÑÏöî?', time: [22.667, 23.950], eng: "Are shaky hands okay?" }
                ];

                const part3Script = [
                    { id: 'p3s1', speaker: 'ÎÇòÎ†àÏù¥ÏÖò', kor: 'Î¨ºÍ±¥ÏùÄ ÌåîÏßÄ ÏïäÎäî Î¨¥ÌòïÏùò ÎßàÏºìÏûÖÎãàÎã§.', time: [0.100, 2.000], eng: "This is an intangible market that doesn't sell physical goods." },
                    { id: 'p3s2', speaker: 'Ïö¥ÏòÅÏûê', kor: '1000ÏõêÏùò Ïû¨Îä• ÎßàÏºìÏùÄ Î¨¥ÌòïÏù¥ÏóêÏöî.', time: [2.033, 3.500], eng: "The 1,000 Won Talent Market is intangible." },
                    { id: 'p3s3', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Ïú†Ìòï ÎßêÍ≥† Î¨¥ÌòïÏùò Ïû¨Îä•ÏùÑ ÌåêÎß§ÌïòÎäî Í≥≥ÏûÖÎãàÎã§.', time: [3.533, 5.333], eng: "It's a place that sells intangible talents, not tangible ones." },
                    { id: 'p3s4', speaker: 'Ï∞∏Í∞ÄÏûê', kor: 'Í∑∏Îüº Ï†úÍ∞Ä ÏïÖÏÑ∏ÏÑúÎ¶¨Î•º Ïûò ÎßåÎì§Ïñ¥ÏÑú', time: [5.367, 6.833], eng: "So if I'm good at making accessories," },
                    { id: 'p3s5', speaker: 'Ï∞∏Í∞ÄÏûê', kor: 'ÏïÖÏÑ∏ÏÑúÎ¶¨Î•º Í∞ÄÏ†∏Í∞ÄÎäî Í±¥ Ïïà ÎêúÎã§Îäî Í±∞Ï£†?', time: [6.867, 8.600], eng: "does that mean I can't have people take the accessories?" },
                    { id: 'p3s6', speaker: 'Ïö¥ÏòÅÏûê', kor: 'ÎßûÏïÑÏöî. Í∑∏Îü∞Îç∞ Í∑∏ ÏïÖÏÑ∏ÏÑúÎ¶¨Î•º ÌåêÎß§ÌïòÎäî Í±¥ ÎÑàÎ¨¥ Ï¢ãÏßÄ.', time: [8.633, 10.267], eng: "Right. But selling those accessories is great." },
                    { id: 'p3s7', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Í∑ºÎç∞ Í∑∏Îü∞ Í≥≥ÏùÄ ÎßéÏïÑ.', time: [10.300, 11.300], eng: "But there are many places for that." },
                    { id: 'p3s8', speaker: 'Ïö¥ÏòÅÏûê', kor: 'ÌîåÎ¶¨ÎßàÏºìÎèÑ ÎÇòÍ∞à Ïàò ÏûàÍ≥† ÎßéÏùÄÎç∞,', time: [11.333, 12.300], eng: "You can go to flea markets and many other places," },
                    { id: 'p3s9', speaker: 'Ïö¥ÏòÅÏûê', kor: 'ÎÇ¥Í∞Ä Ïù¥ ÎßàÏºìÏùÑ Í∏∞ÌöçÌïòÍ≤å Îêú ÌÅ∞ Ïù¥Ïú† Ï§ëÏóê ÌïòÎÇòÎäî', time: [12.333, 14.633], eng: "but one of the big reasons I planned this market is" },
                    { id: 'p3s10', speaker: 'Ïö¥ÏòÅÏûê', kor: "'ÎÇ¥Í∞Ä Í∞ÄÏßÄÍ≥† ÏûàÎäî Î¨¥ÌòïÏùò Ïû¨Îä•ÏùÑ ÎèàÏúºÎ°ú ÌôòÏÇ∞Ìï† Ïàò ÏûàÎäî Í∑∏Îü∞ ÏûêÎ¶¨Îäî Îòê ÏóÜÎã§‚ÄôÎùºÎäî Í±∞Ïïº.", time: [14.667, 18.167], eng: "that there isn't another place where you can convert your intangible talents into money." },
                    { id: 'p3s11', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Îã®ÏàúÌûà ÎÇ¥ Ïû¨Îä•ÏùÑ ÌåêÎß§ÌïòÎäî Í≤ÉÎèÑ ÏûàÏßÄÎßå,', time: [18.200, 19.633], eng: "Of course, there's simply selling your talent," },
                    { id: 'p3s12', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Î¨¥ÌòïÏùò Ïû¨Îä• Í∞ôÏùÄ Í≤ΩÏö∞ÏóêÎäî ÌäπÌûàÎÇò,', time: [19.667, 21.033], eng: "but especially in the case of intangible talents," },
                    { id: 'p3s13', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Ïù¥ Í∞íÏùÑ Ïñ¥ÎñªÍ≤å Îß§Í≤®Ïïº Ìï†ÏßÄÎèÑ Ï¢Ä ÏïÑÎ¶¨ÏÜ°ÌïòÍ≥† Ïûò Î™®Î•¥Í≤†Í≥†,', time: [21.067, 24.000], eng: "it's a bit confusing and you're not sure how to price it," },
                    { id: 'p3s14', speaker: 'Ïö¥ÏòÅÏûê', kor: 'Í∑∏Îü∞ Î¨¥ÌòïÏùò Ïû¨Îä•ÏùÑ ÌåêÎß§Ìï¥ Î≥¥Î©¥ÏÑú Í∑∏ Í≥ºÏ†ïÏóêÏÑú', time: [24.033, 26.067], eng: "and by trying to sell such an intangible talent, in that process," },
                    { id: 'p3s15', speaker: 'Ïö¥ÏòÅÏûê', kor: 'ÎÇ¥ Ïä§Ïä§Î°ú Ìö®Îä•Í∞êÏùÑ ÏñªÍ≤å ÎêêÏúºÎ©¥ Ï¢ãÍ≤†Îã§.', time: [26.100, 28.267], eng: "I hope people gain a sense of self-efficacy." }
                ];

                // --- Global Vocab List (Shared by all parts) ---
                const vocabAndGrammarList = [
                    { "term": "ÎàÑÍµ∞Í∞Ä", "mainDef": "someone; somebody.", "subDefs": [], "variants": ["ÎàÑÍµ∞Í∞ÄÏùò", "ÎàÑÍµ∞Í∞ÄÌïúÌÖå", "ÎàÑÍµ∞Í∞Ä"] },
                    { "term": "Ïû¨Îä•", "mainDef": "talent; skill; gift.", "subDefs": [], "variants": ["Ïû¨Îä•", "Ïû¨Îä•ÏùÑ", "Ïû¨Îä•Ïù¥ÎùºÍ≥†", "Ïû¨Îä•Îì§Ïù¥", "Ïû¨Îä•Ïù∏Í∞Ä", "Ïû¨Îä•Îì§ÏùÑ", "Ïû¨Îä•Ïù¥", "Ïû¨Îä•Ïùº", "Ïû¨Îä•ÏùÄ"] },
                    { "term": "ÏÇ¥ Ïàò ÏûàÎã§Î©¥", "mainDef": "if (you) could buy...", "subDefs": [ { "subTerm": "‚Ä¢ ÏÇ¨Îã§", "subDef": "to buy." }, { "subTerm": "‚Ä¢ -„Ñπ/ÏùÑ Ïàò ÏûàÎã§", "subDef": "\"can; to be able to.\"" }, { "subTerm": "‚Ä¢ -(Ïúº)Î©¥", "subDef": "\"if...\"; conditional particle." } ], "variants": ["ÏÇ¥ Ïàò ÏûàÎã§Î©¥", "ÏÇ¥ Ïàò ÏûàÎã§"] },
                    { "term": "ÎèàÏù¥ ÎêòÎäî Í∑∏Î†áÍ≤å ÎêòÍ≤å Îæ∞Ï°±Ìïú Í±∏", "mainDef": "that kind of very sharp/specific thing that makes money.", "subDefs": [ { "subTerm": "‚Ä¢ ÎèàÏù¥ ÎêòÎã§", "subDef": "to make money; to be profitable." }, { "subTerm": "‚Ä¢ -Îäî", "subDef": "used to turn a present-tense verb into an ‚Äúadjective-ish‚Äù phrase that describes the following noun" }, { "subTerm": "‚Ä¢ ÎêòÍ≤å", "subDef": "very; extremely (colloquial)." }, { "subTerm": "‚Ä¢ Îæ∞Ï°±Ìïú Í≤É", "subDef": "a sharp/specific thing (colloquial for a niche or highly defined skill)." } ], "variants": ["ÎèàÏù¥ ÎêòÎäî Í∑∏Î†áÍ≤å ÎêòÍ≤å Îæ∞Ï°±Ìïú Í±∏"] },
                    { "term": "ÏûñÏïÑÏöî", "mainDef": "...you know; as you know.", "subDefs": [ { "subTerm": "‚Ä¢ -ÏûñÏïÑÏöî", "subDef": "used to remind the listener of shared or obvious information, or to emphasize that something is already known" } ], "variants": ["ÏûñÏïÑÏöî", "ÏûàÏûñÏïÑÏöî"] },
                    { "term": "Í∑∏Î†áÍ∏∞ ÎïåÎ¨∏Ïóê", "mainDef": "because of that; therefore; for that reason.", "subDefs": [], "variants": ["Í∑∏Î†áÍ∏∞ ÎïåÎ¨∏Ïóê"] },
                    { "term": "Î≤ÑÎ†§ÏßÄÎäî Ïû¨Îä•", "mainDef": "talents that are thrown away/wasted.", "subDefs": [ { "subTerm": "‚Ä¢ Î≤ÑÎ†§ÏßÄÎã§", "subDef": "to be thrown away; to be discarded (passive form of Î≤ÑÎ¶¨Îã§)." }, { "subTerm": "‚Ä¢ -Îäî", "subDef": "used to turn a present-tense verb into an ‚Äúadjective-ish‚Äù phrase that describes the following noun" } ], "variants": ["Î≤ÑÎ†§ÏßÄÎäî Ïû¨Îä•"] },
                    { "term": "ÎêòÍ≤å ÎßéÎã§Í≥† ÏÉùÍ∞ÅÌï¥", "mainDef": "I think there are very many.", "subDefs": [ { "subTerm": "‚Ä¢ ÎêòÍ≤å", "subDef": "very; extremely (colloquial)." }, { "subTerm": "‚Ä¢ ÎßéÎã§", "subDef": "to be many; to be much." }, { "subTerm": "‚Ä¢ -Í≥† ÏÉùÍ∞ÅÌïòÎã§", "subDef": "\"to think that...\"" } ], "variants": ["ÎêòÍ≤å ÎßéÎã§Í≥† ÏÉùÍ∞ÅÌï¥"] },
                    { "term": "Í∑∏Îü∞ Ïû¨Îä•Îì§ÏùÑ ÌïúÎ≤à 1000ÏõêÏóê ÌåîÏïÑ Î≥¥Îäî Í∑∏Îü∞ ÎßàÏºì", "mainDef": "a market like that where (you) try selling such talents for 1000 won.", "subDefs": [ { "subTerm": "‚Ä¢ Í∑∏Îü∞", "subDef": "such; that kind of." }, { "subTerm": "‚Ä¢ Ïû¨Îä•", "subDef": "talent; skill." }, { "subTerm": "‚Ä¢ ÌåîÏïÑ Î≥¥Îã§", "subDef": "to try selling (from ÌåîÎã§ + -ÏïÑ/Ïñ¥ Î≥¥Îã§)." }, { "subTerm": "‚Ä¢ -Îäî", "subDef": "used to turn a present-tense verb into an ‚Äúadjective-ish‚Äù phrase that describes the following noun" } ], "variants": ["Í∑∏Îü∞ Ïû¨Îä•Îì§ÏùÑ ÌïúÎ≤à 1000ÏõêÏóê ÌåîÏïÑ Î≥¥Îäî Í∑∏Îü∞ ÎßàÏºì"] },
                    { "term": "-Ïù¥ÎùºÍ≥† ÏÉùÍ∞ÅÌïòÎ©¥ Îèº", "mainDef": "you can just think of it as...", "subDefs": [ { "subTerm": "‚Ä¢ -(Ïù¥)ÎùºÍ≥† ÏÉùÍ∞ÅÌïòÎã§", "subDef": "\"to think of (it) as [Noun].\"" }, { "subTerm": "‚Ä¢ -(Ïúº)Î©¥ ÎêòÎã§", "subDef": "used to say that one condition or action is enough, often translated as ‚Äúall you have to do is ‚Ä¶‚Äù or ‚Äúit‚Äôs fine if ‚Ä¶.‚Äù" } ], "variants": ["Ïù¥ÎùºÍ≥† ÏÉùÍ∞ÅÌïòÎ©¥ Îèº"] },
                    { "term": "1000ÏõêÏù¥ÎùºÎäî ÏùºÎã® ÏïΩÏÜçÏùÑ ÌïòÍ≥†", "mainDef": "First, (we) make a promise of 1000 won, and...", "subDefs": [ { "subTerm": "‚Ä¢ -(Ïù¥)ÎùºÎäî", "subDef": "\"which is called; named (describes the noun 'promise' as '1000 won').\"" }, { "subTerm": "‚Ä¢ ÏùºÎã®", "subDef": "first; for now." }, { "subTerm": "‚Ä¢ ÏïΩÏÜçÏùÑ ÌïòÎã§", "subDef": "to make a promise." } ], "variants": ["1000ÏõêÏù¥ÎùºÎäî ÏùºÎã® ÏïΩÏÜçÏùÑ ÌïòÍ≥†"] },
                    { "term": "Í∑∏ ÏïàÏóêÏÑú", "mainDef": "within that; inside that.", "subDefs": [], "variants": ["Í∑∏ ÏïàÏóêÏÑú"] },
                    { "term": "ÌåîÏïÑ Î≥¥Îäî Í±∞ÏßÄ", "mainDef": "it's that (you) try selling (it).", "subDefs": [ { "subTerm": "‚Ä¢ ÌåîÎã§", "subDef": "to sell." }, { "subTerm": "‚Ä¢ -ÏïÑ/Ïñ¥ Î≥¥Îã§", "subDef": "\"to try (doing something).\"" }, { "subTerm": "‚Ä¢ -Îäî Í±∞ÏßÄ", "subDef": "a colloquial form of -Îäî Í≤ÉÏù¥ÏßÄ, used to explain, clarify, or emphasize what something really is; \"it is that ...\"" } ], "variants": ["ÌåîÏïÑ Î≥¥Îäî Í±∞ÏßÄ"] },
                    { "term": "Ïó¨Í∏∞ÏÑú ÎÅùÎÇòÎäî Í≤å ÏïÑÎãàÎùº", "mainDef": "it's not that it ends here, but...", "subDefs": [ { "subTerm": "‚Ä¢ Ïó¨Í∏∞ÏÑú", "subDef": "here; at this point." }, { "subTerm": "‚Ä¢ ÎÅùÎÇòÎã§", "subDef": "to end; to be over." }, { "subTerm": "‚Ä¢ -Îäî Í≤å ÏïÑÎãàÎùº", "subDef": "\"it's not that... (but...); not [A] but [B].\"" } ], "variants": ["Ïó¨Í∏∞ÏÑú ÎÅùÎÇòÎäî Í≤å ÏïÑÎãàÎùº"] },
                    { "term": "Ïù¥ Ïû¨Îä•ÏùÑ Ïù¥Ïö©Ìïú Í≥†Í∞ùÎì§", "mainDef": "the customers who used this talent.", "subDefs": [ { "subTerm": "‚Ä¢ Ïû¨Îä•", "subDef": "talent; skill." }, { "subTerm": "‚Ä¢ Ïù¥Ïö©ÌïòÎã§", "subDef": "to use." }, { "subTerm": "‚Ä¢ -„Ñ¥/ÏùÄ", "subDef": "used to turn a past-tense verb into an \"adjective-ish\" phrase that describes the following noun" }, { "subTerm": "‚Ä¢ Í≥†Í∞ùÎì§", "subDef": "customers (plural)." } ], "variants": ["Ïù¥ Ïû¨Îä•ÏùÑ Ïù¥Ïö©Ìïú Í≥†Í∞ùÎì§"] },
                    { "term": "Îèà Ï£ºÍ≥† ÏÇ∞Îã§Î©¥ ÏñºÎßàÏóê ÏÇ¥ Í≤ÉÏù∏ÏßÄ", "mainDef": "if they were to buy it with money, how much they would buy it for.", "subDefs": [ { "subTerm": "‚Ä¢ ÎèàÏùÑ Ï£ºÍ≥† ÏÇ¨Îã§", "subDef": "to pay money and buy." }, { "subTerm": "‚Ä¢ -(Ïúº)Î©¥", "subDef": "\"if...\"; conditional particle." }, { "subTerm": "‚Ä¢ ÏñºÎßàÏóê -„Ñπ Í≤ÉÏù∏ÏßÄ", "subDef": "\"how much (one) would... (embedded question about future action/intention).\"" } ], "variants": ["Îèà Ï£ºÍ≥† ÏÇ∞Îã§Î©¥ ÏñºÎßàÏóê ÏÇ¥ Í≤ÉÏù∏ÏßÄ"] },
                    { "term": "Î∏îÎùºÏù∏ÎìúÏóê Ï†ÅÏñ¥ÏÑú", "mainDef": "(they) write it anonymously and...", "subDefs": [ { "subTerm": "‚Ä¢ Î∏îÎùºÏù∏Îìú (Ï¢ÖÏù¥)", "subDef": "anonymously (lit. 'on a blind paper'); context implies an anonymous note." }, { "subTerm": "‚Ä¢ Ï†ÅÎã§", "subDef": "to write down." }, { "subTerm": "‚Ä¢ -ÏïÑÏÑú/Ïñ¥ÏÑú", "subDef": "used when the first action is a necessary step for the second action to happen, or when the first action directly influences the second." } ], "variants": ["Î∏îÎùºÏù∏ÎìúÏóê Ï†ÅÏñ¥ÏÑú"] },
                    { "term": "Ïù¥ ÏÖÄÎü¨ÌïúÌÖå ÎÑòÍ≤® Ï§ò", "mainDef": "give it over to this seller.", "subDefs": [ { "subTerm": "‚Ä¢ ÏÖÄÎü¨", "subDef": "seller (loanword)." }, { "subTerm": "‚Ä¢ -ÌïúÌÖå", "subDef": "\"to (someone) (colloquial particle).\"" }, { "subTerm": "‚Ä¢ ÎÑòÍ≤® Ï£ºÎã§", "subDef": "to hand over; to pass to." } ], "variants": ["Ïù¥ ÏÖÄÎü¨ÌïúÌÖå ÎÑòÍ≤® Ï§ò"] },
                    { "term": "ÎÅùÎÇòÍ≥† ÎÇòÏÑú", "mainDef": "after (it) ends; after finishing.", "subDefs": [ { "subTerm": "‚Ä¢ ÎÅùÎÇòÎã§", "subDef": "to end; to be over." }, { "subTerm": "‚Ä¢ -Í≥† ÎÇòÏÑú", "subDef": "\"after (doing something); upon finishing.\"" } ], "variants": ["ÎÅùÎÇòÍ≥† ÎÇòÏÑú"] },
                    { "term": "ÎàÑÍµ∞Í∞ÄÌïúÌÖå", "mainDef": "to someone.", "subDefs": [], "variants": ["ÎàÑÍµ∞Í∞ÄÌïúÌÖå"] },
                    { "term": "Ïù¥ Ï†ïÎèÑÏùò Í∞íÏñ¥ÏπòÎ•º Ï£ºÎäîÍµ¨ÎÇò", "mainDef": "Oh, it provides this much value!", "subDefs": [ { "subTerm": "‚Ä¢ Ïù¥ Ï†ïÎèÑ", "subDef": "this much; this degree." }, { "subTerm": "‚Ä¢ Í∞íÏñ¥ÏπòÎ•º Ï£ºÎã§", "subDef": "to give value; to be worth." }, { "subTerm": "‚Ä¢ -ÎäîÍµ¨ÎÇò", "subDef": "sentence ending expressing surprise or realization" } ], "variants": ["Ïù¥ Ï†ïÎèÑÏùò Í∞íÏñ¥ÏπòÎ•º Ï£ºÎäîÍµ¨ÎÇò"] },
                    { "term": "-ÎùºÎäî Í±∏ ÌåêÎã®Ìï¥ Î≥º Ïàò ÏûàÏñ¥.", "mainDef": "(you) can try to judge that...", "subDefs": [ { "subTerm": "‚Ä¢ -ÎùºÎäî Í±∏ ÌåêÎã®ÌïòÎã§", "subDef": "\"to judge the fact that...\"" } ], "variants": ["-ÎùºÎäî Í±∏ ÌåêÎã®Ìï¥ Î≥º Ïàò ÏûàÏñ¥"] },
                    { "term": "Ïû¨Îä•Ïù¥ ÏóÜÎäî Í≤É Í∞ôÏïÑÏöî", "mainDef": "I think I don't have any talent; It seems I have no talent.", "subDefs": [ { "subTerm": "‚Ä¢ -(Ïúº)„Ñ¥/Îäî Í≤É Í∞ôÎã§", "subDef": "used to express assumption or guess about something that seems likely, often translated as ‚ÄúI think ‚Ä¶ / It looks like ‚Ä¶ / It seems ‚Ä¶.‚Äù" } ], "variants": ["Ïû¨Îä•Ïù¥ ÏóÜÎäî Í≤É Í∞ôÏïÑÏöî"] },
                    { "term": "'Ïû¨Îä•'Ïù¥ÎùºÎäî Îßê", "mainDef": "the word 'talent'.", "subDefs": [ { "subTerm": "‚Ä¢ -(Ïù¥)ÎùºÎäî Îßê", "subDef": "\"the word/saying (called) [Noun].\"" } ], "variants": ["'Ïû¨Îä•'Ïù¥ÎùºÎäî Îßê"] },
                    { "term": "ÎêòÍ≤å", "mainDef": "very; extremely (colloquial).", "subDefs": [], "variants": ["ÎêòÍ≤å"] },
                    { "term": "ÎßàÏùåÏù¥ ÏûëÏïÑÏßÄÍ±∞Îì†Ïöî", "mainDef": "I feel small / intimidated, you see.", "subDefs": [ { "subTerm": "‚Ä¢ ÎßàÏùå", "subDef": "mind; heart." }, { "subTerm": "‚Ä¢ ÏûëÏïÑÏßÄÎã§", "subDef": "to become small (lit.); to feel intimidated or lose confidence." }, { "subTerm": "‚Ä¢ -Í±∞Îì†Ïöî", "subDef": "used to state a reason or cause (\"because...\"), often in response to a question" } ], "variants": ["ÎßàÏùåÏù¥ ÏûëÏïÑÏßÄÍ±∞Îì†Ïöî"] },
                    { "term": "Î∂ÑÎ™Ö", "mainDef": "clearly; surely.", "subDefs": [], "variants": ["Î∂ÑÎ™Ö"] },
                    { "term": "ÎÇ®Îì§", "mainDef": "others; other people.", "subDefs": [], "variants": ["ÎÇ®Îì§"] },
                    { "term": "Ïñ¥Î†§ÏõåÌïòÎäîÎç∞", "mainDef": "others find it difficult, but...", "subDefs": [ { "subTerm": "‚Ä¢ Ïñ¥Î†§ÏõåÌïòÎã§", "subDef": "to find (something) difficult; to feel difficulty." }, { "subTerm": "‚Ä¢ -ÎäîÎç∞", "subDef": "used to show contrast, or set up background often softening the tone or inviting the listener to respond." } ], "variants": ["Ïñ¥Î†§ÏõåÌïòÎäîÎç∞"] },
                    { "term": "Î¨¥Ïã¨ÏΩî ÌïòÍ≥† ÏûàÎäî Í≤ÉÎì§", "mainDef": "things that (I) am doing mindlessly/unconsciously.", "subDefs": [ { "subTerm": "‚Ä¢ Î¨¥Ïã¨ÏΩî ÌïòÎã§", "subDef": "to do (something) mindlessly; unconsciously; without thinking." }, { "subTerm": "‚Ä¢ -Í≥† ÏûàÎã§", "subDef": "\"present progressive ('is/am ...-ing').\"" }, { "subTerm": "‚Ä¢ -Îäî Í≤É", "subDef": "A colloquial form of -Îäî Í≤É, used to nominalize verbs by turning a verb into a noun phrase meaning ‚Äúthe act of ‚Ä¶,‚Äù ‚Äúthe fact of ‚Ä¶,‚Äù or ‚Äúthe thing that ‚Ä¶‚Äù" } ], "variants": ["Î¨¥Ïã¨ÏΩî ÌïòÍ≥† ÏûàÎäî Í≤ÉÎì§"] },
                    { "term": "Ïù¥Îü∞ Í≤ÉÎì§ ÏûàÏûñÏïÑÏöî", "mainDef": "There are things like this, you know.", "subDefs": [ { "subTerm": "‚Ä¢ -ÏûñÏïÑÏöî", "subDef": "used to remind the listener of shared or obvious information, or to emphasize that something is already known" } ], "variants": ["Ïù¥Îü∞ Í≤ÉÎì§ ÏûàÏûñÏïÑÏöî"] },
                    { "term": "ÎàÑÍµ∞Í∞Ä ÏñòÍ∏∞Î•º ÏßÑÏã¨ÏúºÎ°ú Îì§Ïñ¥Ï£ºÎäî Í≤å", "mainDef": "the act of sincerely listening to someone's story.", "subDefs": [ { "subTerm": "‚Ä¢ ÎàÑÍµ∞Í∞Ä", "subDef": "someone." }, { "subTerm": "‚Ä¢ ÏßÑÏã¨ÏúºÎ°ú", "subDef": "sincerely; wholeheartedly." }, { "subTerm": "‚Ä¢ ÏñòÍ∏∞Î•º Îì§Ïñ¥Ï£ºÎã§", "subDef": "to listen to someone's story (for them)." }, { "subTerm": "‚Ä¢ -Îäî Í≤å", "subDef": "A colloquial form of -Îäî Í≤É, used to nominalize verbs by turning a verb into a noun phrase meaning ‚Äúthe act of ‚Ä¶,‚Äù ‚Äúthe fact of ‚Ä¶,‚Äù or ‚Äúthe thing that ‚Ä¶‚Äù" } ], "variants": ["ÎàÑÍµ∞Í∞Ä ÏñòÍ∏∞Î•º ÏßÑÏã¨ÏúºÎ°ú Îì§Ïñ¥Ï£ºÎäî Í≤å"] },
                    { "term": "Í≥ÑÏÜç Îì£Í≤å ÎêúÎã§Îì†ÏßÄ", "mainDef": "like ending up listening continuously, or...", "subDefs": [ { "subTerm": "‚Ä¢ Í≥ÑÏÜç", "subDef": "continuously." }, { "subTerm": "‚Ä¢ Îì£Îã§", "subDef": "to listen." }, { "subTerm": "‚Ä¢ -Í≤å ÎêòÎã§", "subDef": "\"to end up (doing); to come to (do).\"" }, { "subTerm": "‚Ä¢ -Îì†ÏßÄ", "subDef": "\"or (something like that); used to list examples.\"" } ], "variants": ["Í≥ÑÏÜç Îì£Í≤å ÎêúÎã§Îì†ÏßÄ"] },
                    { "term": "ÏÇ¨ÏßÑ ÎêòÍ≤å Ïûò Ï∞çÎäî ÏπúÍµ¨", "mainDef": "a friend who takes photos very well.", "subDefs": [ { "subTerm": "‚Ä¢ ÏÇ¨ÏßÑÏùÑ Ïûò Ï∞çÎã§", "subDef": "to take photos well." }, { "subTerm": "‚Ä¢ -Îäî", "subDef": "used to turn a present-tense verb into an ‚Äúadjective-ish‚Äù phrase that describes the following noun" } ], "variants": ["ÏÇ¨ÏßÑ ÎêòÍ≤å Ïûò Ï∞çÎäî ÏπúÍµ¨"] },
                    { "term": "Î®∏Î¶¨Î•º Ïûò ÎïãÏïÑ Ï£ºÎäî Í≤É", "mainDef": "the act of braiding hair well (for someone).", "subDefs": [ { "subTerm": "‚Ä¢ Î®∏Î¶¨Î•º ÎïãÏïÑ Ï£ºÎã§", "subDef": "to braid (someone's) hair (for them)." }, { "subTerm": "‚Ä¢ -Îäî Í≤É", "subDef": "A colloquial form of -Îäî Í≤É, used to nominalize verbs by turning a verb into a noun phrase meaning ‚Äúthe act of ‚Ä¶,‚Äù ‚Äúthe fact of ‚Ä¶,‚Äù or ‚Äúthe thing that ‚Ä¶‚Äù" } ], "variants": ["Î®∏Î¶¨Î•º Ïûò ÎïãÏïÑ Ï£ºÎäî Í≤É"] },
                    { "term": "ÌïôÍµê Îã§Îãê Îïå", "mainDef": "when (I) was in school; when attending school.", "subDefs": [ { "subTerm": "‚Ä¢ ÌïôÍµêÏóê Îã§ÎãàÎã§", "subDef": "to attend school." }, { "subTerm": "‚Ä¢ -„Ñπ/ÏùÑ Îïå", "subDef": "\"when; at the time of.\"" } ], "variants": ["ÌïôÍµê Îã§Îãê Îïå"] },
                    { "term": "Í∑∏Îü∞ Í±∞ ÏûàÏûñÏïÑÏöî", "mainDef": "There's that kind of thing, you know.", "subDefs": [ { "subTerm": "‚Ä¢ -ÏûñÏïÑÏöî", "subDef": "used to remind the listener of shared or obvious information, or to emphasize that something is already known" } ], "variants": ["Í∑∏Îü∞ Í±∞ ÏûàÏûñÏïÑÏöî"] },
                    { "term": "ÏïûÎ®∏Î¶¨ ÏûòÎùº Ï£ºÎäî Ïï†Îì§", "mainDef": "kids who cut bangs (for others).", "subDefs": [ { "subTerm": "‚Ä¢ ÏïûÎ®∏Î¶¨", "subDef": "bangs (hair)." }, { "subTerm": "‚Ä¢ Î®∏Î¶¨Î•º ÏûòÎùº Ï£ºÎã§", "subDef": "to cut hair (for someone)." }, { "subTerm": "‚Ä¢ -Îäî Ïï†", "subDef": "\"kid/person who... (colloquial).\"" } ], "variants": ["ÏïûÎ®∏Î¶¨ ÏûòÎùº Ï£ºÎäî Ïï†Îì§"] },
                    { "term": "ÎàÑÍµ¨ÏóêÍ≤åÎÇò", "mainDef": "to everyone; for everyone.", "subDefs": [], "variants": ["ÎàÑÍµ¨ÏóêÍ≤åÎÇò"] },
                    { "term": "ÏÜê ÏàòÏ†ÑÏ¶ù Í¥úÏ∞ÆÏïÑÏöî?", "mainDef": "Is a hand tremor (shaky hands) okay?", "subDefs": [ { "subTerm": "‚Ä¢ ÏàòÏ†ÑÏ¶ù", "subDef": "hand tremor; shaky hands." } ], "variants": ["ÏÜê ÏàòÏ†ÑÏ¶ù Í¥úÏ∞ÆÏïÑÏöî?"] },
                    { "term": "Î¨ºÍ±¥ÏùÄ ÌåîÏßÄ ÏïäÎäî Î¨¥ÌòïÏùò ÎßàÏºì", "mainDef": "an intangible market that doesn't sell physical items.", "subDefs": [ { "subTerm": "‚Ä¢ Î¨ºÍ±¥", "subDef": "item; object; thing." }, { "subTerm": "‚Ä¢ ÌåîÏßÄ ÏïäÎã§", "subDef": "\"to not sell.\"" }, { "subTerm": "‚Ä¢ -Îäî", "subDef": "used to turn a present-tense verb into an ‚Äúadjective-ish‚Äù phrase that describes the following noun" }, { "subTerm": "‚Ä¢ Î¨¥Ìòï", "subDef": "intangible; formless." }, { "subTerm": "‚Ä¢ ÎßàÏºì", "subDef": "market (loanword)." } ], "variants": ["Î¨ºÍ±¥ÏùÄ ÌåîÏßÄ ÏïäÎäî Î¨¥ÌòïÏùò ÎßàÏºì"] },
                    { "term": "Î¨¥Ìòï", "mainDef": "intangible; formless.", "subDefs": [], "variants": ["Î¨¥Ìòï", "Î¨¥ÌòïÏù¥ÏóêÏöî", "Î¨¥ÌòïÏùò"] },
                    { "term": "Ïú†Ìòï ÎßêÍ≥†", "mainDef": "not tangible (things), but...", "subDefs": [ { "subTerm": "‚Ä¢ Ïú†Ìòï", "subDef": "tangible; physical form." }, { "subTerm": "‚Ä¢ ÎßêÍ≥†", "subDef": "\"not (A), but (B); instead of (A).\"" } ], "variants": ["Ïú†Ìòï ÎßêÍ≥†"] },
                    { "term": "ÌåêÎß§ÌïòÎäî Í≥≥", "mainDef": "a place that sells; a place for selling.", "subDefs": [ { "subTerm": "‚Ä¢ ÌåêÎß§ÌïòÎã§", "subDef": "to sell." }, { "subTerm": "‚Ä¢ -Îäî Í≥≥", "subDef": "\"a place where (one) does...\"" } ], "variants": ["ÌåêÎß§ÌïòÎäî Í≥≥"] },
                    { "term": "ÏïÖÏÑ∏ÏÑúÎ¶¨", "mainDef": "accessories (loanword).", "subDefs": [], "variants": ["ÏïÖÏÑ∏ÏÑúÎ¶¨", "ÏïÖÏÑ∏ÏÑúÎ¶¨Î•º"] },
                    { "term": "Í∞ÄÏ†∏Í∞ÄÎäî Í±¥", "mainDef": "taking (it) (is)...", "subDefs": [ { "subTerm": "‚Ä¢ Í∞ÄÏ†∏Í∞ÄÎã§", "subDef": "to take; to carry away." }, { "subTerm": "‚Ä¢ -Îäî Í±¥", "subDef": "A colloquial form of -Îäî Í≤ÉÏùÄ, used to nominalize verbs by turning a verb into a noun phrase meaning ‚Äúthe act of ‚Ä¶,‚Äù ‚Äúthe fact of ‚Ä¶,‚Äù or ‚Äúthe thing that ‚Ä¶.‚Äù" } ], "variants": ["Í∞ÄÏ†∏Í∞ÄÎäî Í±¥"] },
                    { "term": "Ïïà ÎêúÎã§Îäî Í±∞Ï£†?", "mainDef": "That means it's not allowed, right?", "subDefs": [ { "subTerm": "‚Ä¢ -Îäî Í±∞Ï£†", "subDef": "A colloquial form of -Îäî Í≤ÉÏù¥Îã§, used to explain, clarify, or emphasize what something really is; \"it is that ...\"" } ], "variants": ["Ïïà ÎêúÎã§Îäî Í±∞Ï£†"] },
                    { "term": "ÌåêÎß§ÌïòÎäî Í±¥", "mainDef": "selling (it) (is)...", "subDefs": [ { "subTerm": "‚Ä¢ ÌåêÎß§ÌïòÎã§", "subDef": "to sell." }, { "subTerm": "‚Ä¢ -Îäî Í±¥", "subDef": "A colloquial form of -Îäî Í≤ÉÏùÄ, used to nominalize verbs by turning a verb into a noun phrase meaning ‚Äúthe act of ‚Ä¶,‚Äù ‚Äúthe fact of ‚Ä¶,‚Äù or ‚Äúthe thing that ‚Ä¶.‚Äù" } ], "variants": ["ÌåêÎß§ÌïòÎäî Í±¥"] },
                    { "term": "Í∑∏Îü∞ Í≥≥", "mainDef": "that kind of place.", "subDefs": [], "variants": ["Í∑∏Îü∞ Í≥≥"] },
                    { "term": "ÌîåÎ¶¨ÎßàÏºìÎèÑ ÎÇòÍ∞à Ïàò ÏûàÍ≥†", "mainDef": "(you) can also participate in flea markets, and...", "subDefs": [ { "subTerm": "‚Ä¢ ÌîåÎ¶¨ÎßàÏºì", "subDef": "flea market (loanword)." }, { "subTerm": "‚Ä¢ ÎÇòÍ∞ÄÎã§", "subDef": "to go out; to participate in." }, { "subTerm": "‚Ä¢ -„Ñπ/ÏùÑ Ïàò ÏûàÎã§", "subDef": "\"can; to be able to.\"" } ], "variants": ["ÌîåÎ¶¨ÎßàÏºìÎèÑ ÎÇòÍ∞à Ïàò ÏûàÍ≥†"] },
                    { "term": "Í∏∞ÌöçÌïòÍ≤å Îêú ÌÅ∞ Ïù¥Ïú†", "mainDef": "the big reason (I) came to plan (this).", "subDefs": [ { "subTerm": "‚Ä¢ Í∏∞ÌöçÌïòÎã§", "subDef": "to plan; to organize (an event)." }, { "subTerm": "‚Ä¢ -Í≤å ÎêòÎã§", "subDef": "\"to end up (doing); to come to (do).\"" }, { "subTerm": "‚Ä¢ -„Ñ¥/ÏùÄ", "subDef": "used to turn a past-tense verb into an \"adjective-ish\" phrase that describes the following noun" }, { "subTerm": "‚Ä¢ Ïù¥Ïú†", "subDef": "reason." } ], "variants": ["Í∏∞ÌöçÌïòÍ≤å Îêú ÌÅ∞ Ïù¥Ïú†"] },
                    { "term": "ÎÇ¥Í∞Ä Í∞ÄÏßÄÍ≥† ÏûàÎäî Î¨¥ÌòïÏùò Ïû¨Îä•", "mainDef": "the intangible talent that I have.", "subDefs": [ { "subTerm": "‚Ä¢ Í∞ÄÏßÄÍ≥† ÏûàÎã§", "subDef": "to have." }, { "subTerm": "‚Ä¢ -Îäî", "subDef": "used to turn a present-tense verb into an ‚Äúadjective-ish‚Äù phrase that describes the following noun" }, { "subTerm": "‚Ä¢ Î¨¥Ìòï", "subDef": "intangible; formless." }, { "subTerm": "‚Ä¢ Ïû¨Îä•", "subDef": "talent; skill." } ], "variants": ["ÎÇ¥Í∞Ä Í∞ÄÏßÄÍ≥† ÏûàÎäî Î¨¥ÌòïÏùò Ïû¨Îä•"] },
                    { "term": "ÎèàÏúºÎ°ú ÌôòÏÇ∞Ìï† Ïàò ÏûàÎäî Í∑∏Îü∞ ÏûêÎ¶¨", "mainDef": "a place like that where (you) can convert (it) into money.", "subDefs": [ { "subTerm": "‚Ä¢ ÎèàÏúºÎ°ú ÌôòÏÇ∞ÌïòÎã§", "subDef": "to convert into money; to put a monetary value on." }, { "subTerm": "‚Ä¢ -„Ñπ/ÏùÑ Ïàò ÏûàÎã§", "subDef": "\"can; to be able to.\"" }, { "subTerm": "‚Ä¢ -Îäî", "subDef": "used to turn a present-tense verb into an ‚Äúadjective-ish‚Äù phrase that describes the following noun" }, { "subTerm": "‚Ä¢ ÏûêÎ¶¨", "subDef": "place; spot; opportunity." } ], "variants": ["ÎèàÏúºÎ°ú ÌôòÏÇ∞Ìï† Ïàò ÏûàÎäî Í∑∏Îü∞ ÏûêÎ¶¨"] },
                    { "term": "Îã®ÏàúÌûà", "mainDef": "simply; just.", "subDefs": [], "variants": ["Îã®ÏàúÌûà"] },
                    { "term": "ÌåêÎß§ÌïòÎäî Í≤É", "mainDef": "the act of selling; selling (something).", "subDefs": [ { "subTerm": "‚Ä¢ ÌåêÎß§ÌïòÎã§", "subDef": "to sell." }, { "subTerm": "‚Ä¢ -Îäî Í≤É", "subDef": "A colloquial form of -Îäî Í≤É, used to nominalize verbs by turning a verb into a noun phrase meaning ‚Äúthe act of ‚Ä¶,‚Äù ‚Äúthe fact of ‚Ä¶,‚Äù or ‚Äúthe thing that ‚Ä¶‚Äù" } ], "variants": ["ÌåêÎß§ÌïòÎäî Í≤É"] },
                    { "term": "Í∞ôÏùÄ Í≤ΩÏö∞ÏóêÎäî", "mainDef": "in the case of...; as for...", "subDefs": [ { "subTerm": "‚Ä¢ Í≤ΩÏö∞", "subDef": "case; instance." } ], "variants": ["Í∞ôÏùÄ Í≤ΩÏö∞ÏóêÎäî"] },
                    { "term": "ÌäπÌûàÎÇò", "mainDef": "especially (emphasized form of ÌäπÌûà).", "subDefs": [], "variants": ["ÌäπÌûàÎÇò"] },
                    { "term": "Ïù¥ Í∞íÏùÑ Ïñ¥ÎñªÍ≤å Îß§Í≤®Ïïº Ìï†ÏßÄÎèÑ Ï¢Ä ÏïÑÎ¶¨ÏÜ°ÌïòÍ≥†", "mainDef": "(I'm) also a bit unsure how to set this price, and...", "subDefs": [ { "subTerm": "‚Ä¢ Í∞íÏùÑ Îß§Í∏∞Îã§", "subDef": "to set a price; to appraise." }, { "subTerm": "‚Ä¢ Ïñ¥ÎñªÍ≤å -ÏßÄ ÏïÑÎ¶¨ÏÜ°ÌïòÎã§", "subDef": "\"to be unsure/confused about how to...\"" } ], "variants": ["Ïù¥ Í∞íÏùÑ Ïñ¥ÎñªÍ≤å Îß§Í≤®Ïïº Ìï†ÏßÄÎèÑ Ï¢Ä ÏïÑÎ¶¨ÏÜ°ÌïòÍ≥†"] },
                    { "term": "ÌåêÎß§Ìï¥ Î≥¥Î©¥ÏÑú", "mainDef": "while trying to sell (it)...", "subDefs": [ { "subTerm": "‚Ä¢ ÌåêÎß§ÌïòÎã§", "subDef": "to sell." }, { "subTerm": "‚Ä¢ -ÏïÑ/Ïñ¥ Î≥¥Îã§", "subDef": "\"to try (doing something).\"" }, { "subTerm": "‚Ä¢ -(Ïúº)Î©¥ÏÑú", "subDef": "\"while (doing); as (one) does.\"" } ], "variants": ["ÌåêÎß§Ìï¥ Î≥¥Î©¥ÏÑú"] },
                    { "term": "Í≥ºÏ†ï", "mainDef": "process; course.", "subDefs": [], "variants": ["Í≥ºÏ†ï"] },
                    { "term": "ÎÇ¥ Ïä§Ïä§Î°ú Ìö®Îä•Í∞êÏùÑ ÏñªÍ≤å ÎêêÏúºÎ©¥ Ï¢ãÍ≤†Îã§", "mainDef": "I hope (people) come to gain a sense of self-efficacy for themselves.", "subDefs": [ { "subTerm": "‚Ä¢ Ïä§Ïä§Î°ú", "subDef": "for oneself; by oneself." }, { "subTerm": "‚Ä¢ Ìö®Îä•Í∞êÏùÑ ÏñªÎã§", "subDef": "to gain a sense of (self-)efficacy." }, { "subTerm": "‚Ä¢ -Í≤å ÎêòÎã§", "subDef": "\"to come to (do); to end up (doing).\"" }, { "subTerm": "‚Ä¢ -(Ïúº)Î©¥ Ï¢ãÍ≤†Îã§", "subDef": "\"I hope...; it would be good if...\"" } ], "variants": ["ÎÇ¥ Ïä§Ïä§Î°ú Ìö®Îä•Í∞êÏùÑ ÏñªÍ≤å ÎêêÏúºÎ©¥ Ï¢ãÍ≤†Îã§"] }
                ];

                // --- Global Quiz Sentences (Shared by all parts) ---
                const globalSentences = [
                    {
                        id: 1,
                        parts: ["Ï≤ú ÏõêÏùò ", " ÎßàÏºìÏùÄ ‚ÄúÏïÑ, Ïù¥Í≤å ", "Ïù∏Í∞Ä?‚ÄùÎùºÎäî ", "ÎèÑ Ìåî Ïàò ÏûàÎäî Í≥≥Ïù¥ÏóêÏöî."],
                        answer: 'Ïû¨Îä•',
                        bank: ['Î¨ºÍ±¥', 'ÏÑúÎπÑÏä§', 'Ïû¨Îä•', 'ÏÉÅÌíà'],
                        eng_explanation: "The market's main theme is selling 'talent' (Ïû¨Îä•), even small ones you might doubt.",
                        eng_hint: "The main topic of the market",
                        eng_parts: ["The '1000 won ", " Market' is a place where you can sell even a ", " that makes you think, 'Is this even a ", "?'"],
                        eng_answer: "Talent",
                        eng_wrongAnswerExplanations: {
                            'Î¨ºÍ±¥': "'Î¨ºÍ±¥' means 'object', but this market sells intangible things.",
                            'ÏÑúÎπÑÏä§': "'ÏÑúÎπÑÏä§' means 'service', which is close, but 'Ïû¨Îä•' (talent) is the core theme.",
                            'ÏÉÅÌíà': "'ÏÉÅÌíà' means 'product', which is usually a physical item."
                        }
                    },
                    {
                        id: 2,
                        parts: ["Ïù¥ ÎßàÏºìÏùò Ïö¥ÏòÅÏûêÎäî \"", " 1000ÏõêÏùò Ïû¨Îä•Ïù¥ ÏûàÏñ¥Ïöî‚ÄùÎùºÍ≥† ÎßêÌï¥Ïöî."],
                        answer: 'ÎàÑÍµ¨ÏóêÍ≤åÎÇò',
                        bank: ['Î∂ÄÏûêÏóêÍ≤å', 'Î™®ÎëêÏóêÍ≤å', 'ÎÇòÏóêÍ≤åÎßå', 'ÎàÑÍµ¨ÏóêÍ≤åÎÇò'],
                        eng_explanation: "The operator believes 'everyone' (ÎàÑÍµ¨ÏóêÍ≤åÎÇò) has a talent they can sell.",
                        eng_hint: "Everyone / To anyone",
                        eng_parts: ["The market operator says, '", " has a 1000 won talent.'"],
                        eng_answer: "Everyone (to anyone)",
                        eng_wrongAnswerExplanations: {
                            'Î∂ÄÏûêÏóêÍ≤å': "'Î∂ÄÏûêÏóêÍ≤å' means 'to rich people'.",
                            'Î™®ÎëêÏóêÍ≤å': "'Î™®ÎëêÏóêÍ≤å' means 'to all', which is similar, but 'ÎàÑÍµ¨ÏóêÍ≤åÎÇò' (to anyone) fits the context of 'anyone can'.",
                            'ÎÇòÏóêÍ≤åÎßå': "'ÎÇòÏóêÍ≤åÎßå' means 'only to me'."
                        }
                    },
                    {
                        id: 3,
                        parts: ["Ïö¥ÏòÅÏûêÎäî ‚ÄúÎÇ®Îì§ÏùÄ Ïñ¥Î†§ÏõåÌïòÏßÄÎßå ÎÇòÎäî ", " ÌïòÍ≥† ÏûàÎäî Í≤ÉÏù¥ Ïû¨Îä•Ïù¥ÏóêÏöî‚ÄùÎùºÍ≥† ÎßêÌï¥Ïöî."],
                        answer: 'Î¨¥Ïã¨ÏΩî',
                        bank: ['Î¨¥Ïã¨ÏΩî', 'Ïó¥Ïã¨Ìûà', 'ÌûòÎì§Í≤å', 'Ï≤úÏ≤úÌûà'],
                        eng_explanation: "Talent is defined as something you do 'casually' or 'unconsciously' (Î¨¥Ïã¨ÏΩî) that others struggle with.",
                        eng_hint: "Casually / Unconsciously",
                        eng_parts: ["The operator says, 'Talent is something you do ", " that others find difficult.'"],
                        eng_answer: "casually",
                        eng_wrongAnswerExplanations: {
                            'Ïó¥Ïã¨Ìûà': "'Ïó¥Ïã¨Ìûà' means 'diligently'.",
                            'ÌûòÎì§Í≤å': "'ÌûòÎì§Í≤å' means 'with difficulty'.",
                            'Ï≤úÏ≤úÌûà': "'Ï≤úÏ≤úÌûà' means 'slowly'."
                        }
                    },
                    {
                        id: 4,
                        parts: ["Ïù¥ ÎßàÏºìÏóêÏÑúÎäî ÌèâÏÜåÏóê ", " Ïû¨Îä•ÏùÑ Ìåî Ïàò ÏûàÏñ¥Ïöî."],
                        answer: 'Î≤ÑÎ†§ÏßÄÎäî',
                        bank: ['Î≤ÑÎ†§ÏßÄÎäî', 'Ïù∏Í∏∞ ÏûàÎäî', 'Î©ãÏûàÎäî', 'Ïì∞Îäî'],
                        eng_explanation: "The market is for talents that are often 'thrown away' (Î≤ÑÎ†§ÏßÄÎäî) because people don't think they are profitable.",
                        eng_hint: "Wasted / Thrown away",
                        eng_parts: ["In this market, you can sell talents that are usually '", "'."],
                        eng_answer: "thrown away",
                        eng_wrongAnswerExplanations: {
                            'Ïù∏Í∏∞ ÏûàÎäî': "'Ïù∏Í∏∞ ÏûàÎäî' means 'popular'.",
                            'Î©ãÏûàÎäî': "'Î©ãÏûàÎäî' means 'cool' or 'stylish'.",
                            'Ïì∞Îäî': "'Ïì∞Îäî' means 'using'."
                        }
                    },
                    {
                        id: 5,
                        parts: ["Î≥¥ÌÜµ, ÏÇ¨ÎûåÎì§ÏùÄ ", " Í≤ÉÎßå Ïû¨Îä•Ïù¥ÎùºÍ≥† ÏÉùÍ∞ÅÌï¥Ïöî."],
                        answer: 'ÎèàÏù¥ ÎêòÎäî',
                        bank: ['ÎèàÏù¥ ÎêòÎäî', 'Ïû¨ÎØ∏ÏûàÎäî', 'Ïñ¥Î†§Ïö¥', 'ÌäπÎ≥ÑÌïú'],
                        eng_explanation: "The operator says people usually only consider things that are 'profitable' (ÎèàÏù¥ ÎêòÎäî) as talent.",
                        eng_hint: "Profitable / Makes money",
                        eng_parts: ["Usually, people only think things that are '", "' are talents."],
                        eng_answer: "profitable",
                        eng_wrongAnswerExplanations: {
                            'Ïû¨ÎØ∏ÏûàÎäî': "'Ïû¨ÎØ∏ÏûàÎäî' means 'fun'.",
                            'Ïñ¥Î†§Ïö¥': "'Ïñ¥Î†§Ïö¥' means 'difficult'.",
                            'ÌäπÎ≥ÑÌïú': "'ÌäπÎ≥ÑÌïú' means 'special'."
                        }
                    },
                    {
                        id: 6,
                        parts: ["ÌäπÌûà, Î¨¥ÌòïÏùò Ïû¨Îä•ÏùÄ ", "Í∞Ä Ïñ¥Î†§ÏõåÏÑú ÏÇ¨ÎûåÎì§Ïù¥ Ïû¨Îä•Ïù∏ÏßÄ ÏïÑÎãåÏßÄ Ïûò Î™∞ÎùºÏöî."],
                        answer: 'Í∞íÏùÑ Îß§Í∏∞Í∏∞',
                        bank: ['Í∞íÏùÑ Îß§Í∏∞Í∏∞', 'ÎèàÏùÑ Î≤åÍ∏∞', 'ÎßåÎì§Í∏∞', 'ÏÑ†Î¨ºÌïòÍ∏∞'],
                        eng_explanation: "It's hard to know if intangible skills are talents because 'setting a price' (Í∞íÏùÑ Îß§Í∏∞Í∏∞) for them is confusing.",
                        eng_hint: "Setting a price",
                        eng_parts: ["Especially for intangible talents, '", "' is difficult, so people don't know if it's a talent."],
                        eng_answer: "setting a price",
                        eng_wrongAnswerExplanations: {
                            'ÎèàÏùÑ Î≤åÍ∏∞': "'ÎèàÏùÑ Î≤åÍ∏∞' means 'making money'.",
                            'ÎßåÎì§Í∏∞': "'ÎßåÎì§Í∏∞' means 'making (it)'.",
                            'ÏÑ†Î¨ºÌïòÍ∏∞': "'ÏÑ†Î¨ºÌïòÍ∏∞' means 'gifting (it)'."
                        }
                    },
                    {
                        id: 7,
                        parts: ["Í∑∏ÎûòÏÑú Ïù¥ ÎßàÏºìÏóêÏÑúÎäî Ïï°ÏÑ∏ÏÑúÎ¶¨ Í∞ôÏùÄ Î¨ºÍ±¥Ïù¥ ÏïÑÎãàÎùº, ÏÇ¨ÎûåÎì§Ïù¥ Î¨¥ÌòïÏùò Ïû¨Îä•ÏùÑ ", "."],
                        answer: 'ÌåêÎß§Ìï¥Ïöî',
                        bank: ['ÌåêÎß§Ìï¥Ïöî', 'Íµ¨Îß§Ìï¥Ïöî', 'Î≤ÑÎ†§Ïöî', 'ÎßåÎì§Ïñ¥Ïöî'],
                        eng_explanation: "The market's purpose is for people to 'sell' (ÌåêÎß§Ìï¥Ïöî) their intangible talents.",
                        eng_hint: "To sell",
                        eng_parts: ["So in this market, people '", "' intangible talents, not physical objects like accessories."],
                        eng_answer: "sell",
                        eng_wrongAnswerExplanations: {
                            'Íµ¨Îß§Ìï¥Ïöî': "'Íµ¨Îß§Ìï¥Ïöî' means 'buy'. Customers buy, sellers sell.",
                            'Î≤ÑÎ†§Ïöî': "'Î≤ÑÎ†§Ïöî' means 'throw away'.",
                            'ÎßåÎì§Ïñ¥Ïöî': "'ÎßåÎì§Ïñ¥Ïöî' means 'make'."
                        }
                    },
                    {
                        id: 8,
                        parts: ["Ïù¥ ÎßàÏºìÏóêÏÑú ", "ÏùÄ 1000ÏõêÏúºÎ°ú Ïû¨Îä•ÏùÑ ÏÇ¨Í≥†, Í∑∏ Ïû¨Îä•Ïùò Í∞ÄÍ≤©ÏùÑ Ï™ΩÏßÄÏóê Îî∞Î°ú Ï†ÅÏñ¥ Ï§òÏöî."],
                        answer: 'Í≥†Í∞ùÎì§',
                        bank: ['Ïö¥ÏòÅÏûêÎì§', 'Í≥†Í∞ùÎì§', 'ÏßÅÏõêÎì§', 'ÌåêÎß§ÏûêÎì§'],
                        eng_explanation: "The 'customers' (Í≥†Í∞ùÎì§) are the ones who buy the talent and provide the blind valuation.",
                        eng_hint: "People who buy",
                        eng_parts: ["In this market, '", "' buy talents for 1000 won and write down the talent's real value on a note."],
                        eng_answer: "customers",
                        eng_wrongAnswerExplanations: {
                            'Ïö¥ÏòÅÏûêÎì§': "'Ïö¥ÏòÅÏûêÎì§' means 'operators'.",
                            'ÏßÅÏõêÎì§': "'ÏßÅÏõêÎì§' means 'staff'.",
                            'ÌåêÎß§ÏûêÎì§': "'ÌåêÎß§ÏûêÎì§' means 'sellers'."
                        }
                    },
                    {
                        id: 9,
                        parts: ["ÌåêÎß§ÏûêÎì§ÏùÄ Í∑∏ Ï™ΩÏßÄÎ•º Î≥¥Í≥†, Ïû¨Îä•Ïùò ÏßÑÏßú Í∞ÄÏπòÎ•º ", " Ïàò ÏûàÏñ¥Ïöî."],
                        answer: 'ÌåêÎã®Ìï†',
                        bank: ['ÌåêÎã®Ìï†', 'Ïù¥Ïö©Ìï†', 'Íµ¨Í≤ΩÌï†', 'ÌåêÎß§Ìï†'],
                        eng_explanation: "By seeing the notes, sellers can 'judge' or 'assess' (ÌåêÎã®Ìï†) the real-world value of their talent.",
                        eng_hint: "To judge / assess",
                        eng_parts: ["Sellers see that note and can '", "' the true value of their talent."],
                        eng_answer: "judge",
                        eng_wrongAnswerExplanations: {
                            'Ïù¥Ïö©Ìï†': "'Ïù¥Ïö©Ìï†' means 'to use'.",
                            'Íµ¨Í≤ΩÌï†': "'Íµ¨Í≤ΩÌï†' means 'to look at'.",
                            'ÌåêÎß§Ìï†': "'ÌåêÎß§Ìï†' means 'to sell'."
                        }
                    },
                    {
                        id: 10,
                        parts: ["Ïö¥ÏòÅÏûêÎäî ÏÇ¨ÎûåÎì§Ïù¥ Ïû¨Îä•ÏùÑ ÌåîÎ©¥ÏÑú 'ÎÇ¥Í∞Ä Ìï† Ïàò ÏûàÎã§'Îäî '", "'ÏùÑ ÏñªÏóàÏúºÎ©¥ Ï¢ãÍ≤†Îã§Í≥† ÎßêÌñàÏñ¥Ïöî."],
                        answer: 'Ìö®Îä•Í∞ê',
                        bank: ['Ìö®Îä•Í∞ê', 'ÌîºÎ°úÍ∞ê', 'Í∞íÏñ¥Ïπò', 'Ïö∞ÏõîÍ∞ê'],
                        eng_explanation: "The operator's main goal is for sellers to gain 'self-efficacy' (Ìö®Îä•Í∞ê), the belief in their own capabilities.",
                        eng_hint: "A sense of 'I am capable'",
                        eng_parts: ["The operator wants people to gain '", "' ‚Äî the feeling of 'I can do this' ‚Äî while selling their talent."],
                        eng_answer: "self-efficacy",
                        eng_wrongAnswerExplanations: {
                            'ÌîºÎ°úÍ∞ê': "'ÌîºÎ°úÍ∞ê' means 'fatigue'.",
                            'Í∞íÏñ¥Ïπò': "'Í∞íÏñ¥Ïπò' means 'value' or 'worth'.",
                            'Ïö∞ÏõîÍ∞ê': "'Ïö∞ÏõîÍ∞ê' means 'a sense of superiority'."
                        }
                }];
 
                // --- Global Discussion Questions (Shared by all parts) ---
                const globalDiscussionQuestions = [
                    { num: 1, kor: "‚ÄòÎàÑÍµ¨ÏóêÍ≤åÎÇò Ïû¨Îä•ÏùÄ ÏûàÎã§‚ÄôÍ≥† ÏÉùÍ∞ÅÌï¥Ïöî?", eng: "Do you think 'everyone has a talent'?", vocab: [ { term: "ÎàÑÍµ¨ÏóêÍ≤åÎÇò", meaning_eng: "To everyone" }, { term: "Ïû¨Îä•ÏùÄ ÏûàÎã§", meaning_eng: "To have a talent" } ] },
                    { num: 2, kor: "Ïñ¥Îñ§ ÏÇ¨ÎûåÎì§ÏùÄ ‚ÄúÏ†ÄÎäî ÏßÑÏßú Ïû¨Îä•Ïù¥ ÏóÜÎäî Í≤É Í∞ôÏïÑÏöî‚ÄùÎùºÍ≥† ÎßêÌï¥Ïöî. Ïôú ÏÇ¨ÎûåÎì§ÏùÄ ÏûêÏã†Ïù¥ 'Ïû¨Îä•Ïù¥ ÏóÜÎã§'Í≥† ÏÉùÍ∞ÅÌï†ÍπåÏöî?", eng: "Some people say, \"I really don't think I have any talent.\" Why do people think they 'have no talent'?", vocab: [ { term: "Ïû¨Îä•Ïù¥ ÏóÜÎã§", meaning_eng: "To have no talent" }, { term: "ÏÉùÍ∞ÅÌïòÎã§", meaning_eng: "To think" } ] },
                    { num: 3, kor: "Ïû¨Îä•ÏùÄ Î¨¥ÏóáÏùºÍπåÏöî? Ïû¨Îä•ÏùÄ ‚ÄòÎÇ®Îì§ÏùÄ Ïñ¥Î†§ÏõåÌïòÏßÄÎßå ÎÇòÎäî Î¨¥Ïã¨ÏΩî ÌïòÎäî Í≤É‚ÄôÏùºÍπåÏöî?", eng: "What is talent? Is talent 'something others find difficult but I do thoughtlessly'?", vocab: [ { term: "Ïû¨Îä•", meaning_eng: "Talent" }, { term: "ÎÇ®Îì§ÏùÄ Ïñ¥Î†§ÏõåÌïòÎã§", meaning_eng: "Others find it difficult" }, { term: "Î¨¥Ïã¨ÏΩî ÌïòÎã§", meaning_eng: "To do thoughtlessly / effortlessly" } ] },
                    { num: 4, kor: "Ïñ¥Îñ§ Ïû¨Îä•Ïù¥ ÎèàÏù¥ Îê†ÍπåÏöî? Í∑∏Î¶¨Í≥† Ïñ¥Îñ§ Ïû¨Îä•Ïù¥ ÎèàÏù¥ Ïïà Îê†ÍπåÏöî?", eng: "What kind of talents can make money? And what kind of talents do not make money?", vocab: [ { term: "ÎèàÏù¥ ÎêòÎã§", meaning_eng: "To make money / be profitable" }, { term: "ÎèàÏù¥ Ïïà ÎêòÎã§", meaning_eng: "To not make money" } ] },
                    { num: 5, kor: "Ïû¨Îä•Ïù¥ ÎèàÏù¥ ÎêòÏßÄ ÏïäÏúºÎ©¥, Í∑∏ Ïû¨Îä•Ïù¥ Î≤ÑÎ†§ÏßÑÎã§Í≥† ÏÉùÍ∞ÅÌï¥Ïöî?", eng: "If a talent doesn't make money, do you think that talent is 'thrown away'?", vocab: [ { term: "ÎèàÏù¥ ÎêòÏßÄ ÏïäÎã§", meaning_eng: "To not make money" }, { term: "Î≤ÑÎ†§ÏßÄÎã§", meaning_eng: "To be thrown away" } ] },
                    { num: 6, kor: "Ïù¥ ÎßàÏºìÏùÄ Î¨ºÍ±¥Ïù¥ ÏïÑÎãå 'Î¨¥Ìòï'Ïùò Ïû¨Îä•ÏùÑ ÌåîÏïÑÏöî. Ïôú Ïö¥ÏòÅÏûêÎäî 'Ïú†Ìòï'Ïù¥ ÏïÑÎãå 'Î¨¥Ìòï'Ïùò Ïû¨Îä•Ïóê ÏßëÏ§ëÌñàÏùÑÍπåÏöî?", eng: "This market sells 'intangible' talents, not physical items. Why do you think the operator focused on 'intangible' talents instead of 'tangible' ones?", vocab: [ { term: "Î¨¥ÌòïÏùò Ïû¨Îä•", meaning_eng: "Intangible talent" }, { term: "Ïú†Ìòï", meaning_eng: "Tangible" }, { term: "ÏßëÏ§ëÌïòÎã§", meaning_eng: "To focus on" } ] },
                    { num: 7, kor: "‚ÄòÎ¨¥ÌòïÏùò Ïû¨Îä•'ÏùÄ 'Í∞íÏùÑ Îß§Í∏∞Í∏∞ ÏïÑÎ¶¨ÏÜ°ÌïòÎã§'Í≥† Ìï¥Ïöî. Ïôú Î¨¥ÌòïÏùò Ïû¨Îä•ÏùÄ Í∞íÏùÑ Ï†ïÌïòÍ∏∞ Ïñ¥Î†§Ïö∏ÍπåÏöî?", eng: "They say it's 'tricky to price' an 'intangible talent'. Why is it difficult to set a price for intangible talents?", vocab: [ { term: "Í∞íÏùÑ Îß§Í∏∞Îã§", meaning_eng: "To set a price / to value" }, { term: "ÏïÑÎ¶¨ÏÜ°ÌïòÎã§", meaning_eng: "To be tricky / confusing" }, { term: "Í∞íÏùÑ Ï†ïÌïòÍ∏∞ Ïñ¥Î†µÎã§", meaning_eng: "Difficult to set a price" } ] },
                    { num: 8, kor: "Ïù¥ ÎßàÏºìÏóêÏÑú Í≥†Í∞ùÎì§Ïù¥ Ïû¨Îä•Ïùò 'Í∞íÏñ¥Ïπò'Î•º Îã§Ïãú Ï†ïÌï¥ Ï§òÏöî. Íº≠ Ïû¨Îä•Ïùò 'Í∞íÏñ¥Ïπò‚ÄôÎ•º Ï†ïÌï¥Ïïº Ìï†ÍπåÏöî?", eng: "In this market, customers re-evaluate the 'value' of the talent. Is it necessary to define the 'value' of a talent?", vocab: [ { term: "Í∞íÏñ¥Ïπò", meaning_eng: "Value / Worth" }, { term: "Í∞íÏùÑ Ï†ïÌïòÎã§", meaning_eng: "To set a price / value" } ] },
                    { num: 9, kor: "Ïó¨Îü¨Î∂ÑÏùÄ 1000ÏõêÏóê Ïñ¥Îñ§ Ïû¨Îä•ÏùÑ ÌåîÏïÑ Î≥¥Í≥† Ïã∂Ïñ¥Ïöî? Í∑∏Î¶¨Í≥† Ïñ¥Îñ§ Ïû¨Îä•ÏùÑ ÏÇ¨ Î≥¥Í≥† Ïã∂Ïñ¥Ïöî?", eng: "What talent would you want to try selling for 1,000 won? And what talent would you want to buy?", vocab: [ { term: "ÌåîÏïÑ Î≥¥Îã§", meaning_eng: "To try selling" }, { term: "ÏÇ¨ Î≥¥Îã§", meaning_eng: "To try buying" } ] },
                    { num: 10, kor: "Ïû¨Îä•ÏùÑ 1000ÏõêÏóê¬† ÌåîÏïÑ Î≥¥Î©¥, ÏûêÍ∏∞ Ìö®Îä•Í∞êÏùÑ ÏñªÏùÑ Ïàò ÏûàÏùÑÍπåÏöî?", eng: "If you try selling a talent for 1,000 won, do you think you can gain self-efficacy?", vocab: [ { term: "1000ÏõêÏóê ÌåîÎã§", meaning_eng: "To sell for 1,000 won" }, { term: "ÏûêÍ∏∞ Ìö®Îä•Í∞ê", meaning_eng: "Self-efficacy" }, { term: "Ìö®Îä•Í∞êÏùÑ ÏñªÎã§", meaning_eng: "To gain self-efficacy" } ] }
                ];

                // --- Assemble All Parts (without sentences and discussionQuestions) ---
                const allVideoParts = [
                    {
                        part: "Ep1. Ïû¨Îä•ÎßàÏºìÏùò ÏãúÏûë",
                        videoId: "TwJUbLOmBCM",
                        scriptContent: part1Script
                    },
                    {
                        part: "Ep3. Ïû¨Îä• Ï∞æÎäî Î≤ï",
                        videoId: "jmx1APJhDhQ",
                        scriptContent: part2Script
                    },
                    {
                        part: "Ep5. Í∏∞ÌöçÏùòÎèÑ",
                        videoId: "IC6HTFlYTIw",
                        scriptContent: part3Script
                    }
                ];

                return { allVideoParts, vocabAndGrammarList, globalSentences, globalDiscussionQuestions };
            }, []);

            const currentPartData = allVideoParts[activeVideoPart];

            const { vocabMap, highlightData } = useMemo(() => {
                const vocabMap = new Map(vocabAndGrammarList.map(item => [item.term, item]));
                const wordMap = new Map();
                vocabAndGrammarList.forEach(item => wordMap.set(item.term, item));
                const allWords = Array.from(wordMap.keys()).sort((a, b) => b.length - a.length);
                const regexParts = [];
                allWords.forEach(word => {
                    const item = wordMap.get(word);
                    if (item.variants) item.variants.forEach(v => regexParts.push(v.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')));
                    let processed = word.replace(/[.*+?^${}()|[\]\\]/g, '\\$&').replace(/\s+/g, '\\s*');
                    if (word.endsWith('Îã§')) {
                        const parts = word.split(' ');
                        const lastPart = parts[parts.length - 1];
                        if (lastPart.endsWith('Îã§')) {
                            const stem = lastPart.slice(0, -1).replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                            const firstParts = parts.slice(0, -1).map(p => p.replace(/[.*+?^${}()|[\]\D]/g, '\\$&'));
                            regexParts.push([...firstParts, `${stem}[Í∞Ä-Ìû£]*`].join('\\s*'));
                        } else { regexParts.push(`${processed.slice(0, -1)}[Í∞Ä-Ìû£]*`); }
                    } else { regexParts.push(processed); }
                });
                const regexString = [...new Set(regexParts)].sort((a,b) => b.length - a.length).join('|');
                return { vocabMap, highlightData: { regex: new RegExp(`(${regexString})`, 'g'), wordMap, sortedWords: allWords }};
            }, [vocabAndGrammarList]);

            const tabs = useMemo(() => {
                const baseTabs = [
                    { name: 'ÎåÄÌôî Ïä§ÌÅ¨Î¶ΩÌä∏ (Transcript)', icon: <Video className="w-6 h-6"/>, content: <VideoMaterialsTab 
                        allVideoParts={allVideoParts}
                        activeVideoPart={activeVideoPart}
                        setActiveVideoPart={setActiveVideoPart}
                        currentScriptContent={currentPartData.scriptContent}
                        vocabAndGrammarList={vocabAndGrammarList} 
                        highlightData={highlightData} 
                        vocabMap={vocabMap} 
                        vocabRefs={vocabRefs} 
                        highlightedVocab={highlightedVocab} 
                        setHighlightedVocab={setHighlightedVocab} /> 
                    },
                    { name: 'ÌïµÏã¨ Ïñ¥Ìúò (Key Vocabulary)', icon: <List className="w-6 h-6"/>, content: (
                        <div>
                            <h2 className="text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3"><List className="w-8 h-8 text-green-600"/> ÌïµÏã¨ Ïñ¥Ìúò (Key Vocabulary)</h2>
                            <div className="w-full overflow-y-auto" style={{maxHeight: `calc(100vh - 150px)`}}>
                                <div className="border rounded-lg bg-white p-2 shadow-lg">
                                    <div className="space-y-1">{vocabAndGrammarList.map(item => <VocabItem key={item.term} item={item} isHighlighted={item.term === highlightedVocab} ref={el => vocabRefs.current[item.term] = el} />)}</div>
                                </div>
                            </div>
                        </div>
                    )},
                    { name: 'ÎÇ¥Ïö© ÌôïÏù∏ ÌÄ¥Ï¶à (Comprehension Check-Up)', icon: <BookOpen className="w-6 h-6"/>, content: (
                        <div>
                            <h2 className="text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3"><BookOpen className="w-8 h-8 text-green-600"/> ÎÇ¥Ïö© ÌôïÏù∏ ÌÄ¥Ï¶à (Comprehension Check-Up)</h2>
                            <ComprehensionQuiz sentences={globalSentences} />
                        </div>
                    )},
                    { name: 'ÏÉùÍ∞ÅÌï¥ Î≥¥Í∏∞ (Food For Thought)', icon: <MessageSquare className="w-6 h-6"/>, content: (
                        <div>
                            <h2 className="text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3"><MessageSquare className="w-8 h-8 text-green-600"/> ÏÉùÍ∞ÅÌï¥ Î≥¥Í∏∞ (Food For Thought)</h2>
                            <DiscussionSection questions={globalDiscussionQuestions} />
                        </div>
                    ) }
                ];
                return baseTabs;
            }, [layoutMode, allVideoParts, activeVideoPart, vocabAndGrammarList, highlightData, vocabMap, highlightedVocab, vocabRefs, currentPartData, globalSentences, globalDiscussionQuestions]);

            return (
                <div className="bg-gray-50 text-gray-800 p-4 sm:p-6 md:p-8">
                    <div className="mx-auto transition-all duration-300" style={{ maxWidth: containerWidth }}>
                        <header className="text-center mb-12">
                            <h1 className="text-4xl md:text-5xl font-black text-gray-900 mb-2">ÎàÑÍµ¨ÏóêÍ≤åÎÇò 1000ÏõêÏùò Ïû¨Îä•ÏùÄ ÏûàÎã§?</h1>
                            <p className="text-xl text-gray-500" style={{fontFamily: "'Nanum Gothic', sans-serif"}}>Does everyone have a 1,000 won talent?</p>
                        </header>
                        <Tabs tabs={tabs} />
                        {(layoutMode === 'mobile' || layoutMode === 'split') && (
                            <div className="pt-10">
                                <h2 className="text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3"><List className="w-8 h-8 text-green-600"/> ÌïµÏã¨ Ïñ¥Ìúò (Key Vocabulary)</h2>
                                <div className="w-full">
                                    <div className="border rounded-lg bg-white p-2 shadow-lg">
                                        <div className="space-y-1">{vocabAndGrammarList.map(item => <VocabItem key={item.term} item={item} isHighlighted={item.term === highlightedVocab} ref={el => vocabRefs.current[item.term] = el} />)}</div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };
    
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
