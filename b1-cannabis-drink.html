<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ïà†Î≥¥Îã§ ÎåÄÎßà ÏùåÎ£åÍ∞Ä Í±¥Í∞ïÏóê Ï¢ãÏùÑÍπåÏöî?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://www.youtube.com/iframe_api"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&family=IBM+Plex+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* Í∏∞Î≥∏ Ìè∞Ìä∏ ÏÑ§Ï†ï */
        body { font-family: 'Nanum Gothic', sans-serif; }
        /* Ïñ¥Ìúò Î™©Î°ù ÏÇ¨Ïù¥ÎìúÎ∞î Ìè∞Ìä∏ */
        .vocab-sidebar { font-family: 'IBM Plex Sans KR', sans-serif; }
        /* Ïñ¥Ìúò ÌåùÏóÖ Ïä§ÌÉÄÏùº */
        .vocab-popup { font-family: 'Nanum Gothic', sans-serif; z-index: 50; max-width: 320px; white-space: normal; }
        /* Ìò∏Î≤Ñ Ìà¥ÌåÅ Ïä§ÌÉÄÏùº */
        .hover-tooltip { position: fixed; z-index: 9999; background: white; border: 2px solid #22c55e; border-radius: 8px; padding: 12px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); max-width: 320px; font-family: 'Nanum Gothic', sans-serif; animation: fadeIn 0.15s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
        /* ÏùºÎ∞ò Ïñ¥Ìúò Í∞ïÏ°∞ Ïä§ÌÉÄÏùº */
        .highlight-general { font-weight: 600; color: #374151; cursor: pointer; position: relative; transition: background-color 0.2s; }
        /* ÎßàÏö∞Ïä§ Ìò∏Î≤Ñ ÎòêÎäî ÌôúÏÑ±Ìôî Ïãú Ïä§ÌÉÄÏùº */
        .highlight-general:hover, .active-highlight { background-color: #dcfce7; border-radius: 3px; }
        .script-highlight { background-color: #e0f2fe; border-radius: 8px; }
        .vocab-highlight { background-color: #dcfce7; border: 2px solid #22c55e; border-radius: 8px; }

        /* --- ÎßêÌíçÏÑ† Ïä§ÌÉÄÏùº --- */
        /* Updated tail styles to match new class names */
        .bubble-tail-left.bubble-kkn20::after { /* Yuna Style 1 */
            content: "";
            position: absolute;
            bottom: 6px;
            left: -8px;
            width: 0px;
            height: 0px;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-right: 8px solid #dcfce7; /* green-100 */
            transition: border-color 0.3s;
        }
        /* Add style for Yuna Style 2 if needed */
        /* .bubble-tail-left.bubble-kkn30::after { ... } */

        .bubble-tail-right.bubble-other::after { /* Woody Style */
            content: "";
            position: absolute;
            bottom: 6px;
            right: -8px;
            width: 0px;
            height: 0px;
            border-top: 8px solid transparent;
            border-bottom: 8px solid transparent;
            border-left: 8px solid white;
            transition: border-color 0.3s;
        }

        /* Active styles targeting new classes */
        .bubble-active.bubble-tail-left.bubble-kkn20::after,
        /* Add active style for Yuna Style 2 if needed */
        /* .bubble-active.bubble-tail-left.bubble-kkn30::after, */
        .bubble-active.bubble-tail-right.bubble-other::after {
            border-right-color: #fef9c3; /* yellow-100 */
            border-left-color: #fef9c3; /* yellow-100 */
        }


        /* --- ÎîîÎ∞îÏù¥Ïä§Î≥Ñ Î†àÏù¥ÏïÑÏõÉ Ïä§ÌÉÄÏùº --- */
        /* These rules are removed as layout is now handled by responsive Tailwind classes in the component */
        
        /* Ïù∏ÏáÑ Ï†ÑÏö© Ïä§ÌÉÄÏùº */
        .print-only { display: none; }
        @media print {
            @page { size: A4; margin: 0.75cm 1cm; }
            .no-print { display: none !important; }
            .print-only { display: inline-block !important; }
            body, html { background: white !important; font-size: 9pt; }
            .mx-auto { max-width: none !important; padding: 0 !important; margin: 0 !important; border: none !important; box-shadow: none !important; }
            body > #root > div { padding: 0 !important; }
            * { box-shadow: none !important; border-color: transparent !important; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
            p, h1, h2, h3, h4, span, li { color: black !important; }
            p, li { line-height: 1.5; }
            header.text-center { margin-bottom: 1rem !important; }
            .pt-10 { padding-top: 1rem !important; }
            .mb-8 { margin-bottom: 0.4pt !important; }
            h1, h2 { font-size: 12pt !important; margin-bottom: 15px; }
            h3 { font-size: 12pt !important; margin-bottom: 10px; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>
    <script type="text/babel">
        /**
         * @typedef {Object} ScriptLine
         * @property {string} id - Unique identifier (e.g., 's1')
         * @property {string} speaker - Speaker name ('Ïú†ÎÇò' | 'Ïö∞Îîî')
         * @property {string} kor - Korean text
         * @property {string} eng - English translation
         * @property {[number, number]} [time] - Optional [start, end] timestamps
         */

        // --- ÏïÑÏù¥ÏΩò Ïª¥Ìè¨ÎÑåÌä∏ ---
        const Icon = React.memo(({ children, className = 'w-6 h-6' }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>);
        const Video = ({ className }) => <Icon className={className}><path d="m22 8-6 4 6 4V8Z"></path><rect width="14" height="12" x="2" y="6" rx="2" ry="2"></rect></Icon>;
        const BookOpen = ({ className }) => <Icon className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></Icon>;
        const MessageSquare = ({ className }) => <Icon className={className}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></Icon>;
        const ThumbsUp = ({ className }) => <Icon className={className}><path d="M7 10v12"></path><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a2 2 0 0 1 3 1.88V5Z"></path></Icon>;
        const List = ({ className }) => <Icon className={className}><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></Icon>;
        const Spinner = ({ className = 'w-5 h-5' }) => (
            <svg className={`animate-spin ${className}`} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
        );

        // --- Í≥µÏö© Ïª¥Ìè¨ÎÑåÌä∏: Î≤àÏó≠ Î≤ÑÌäº ---
        const TranslateButton = React.memo(({ textToTranslate }) => {
            const { useState, useEffect, useRef, useCallback } = React;
            const [translation, setTranslation] = useState(null);
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState(null);
            const [show, setShow] = useState(false);
            const [buttonLang, setButtonLang] = useState('Translation');
            const isMounted = useRef(true);

            useEffect(() => {
                isMounted.current = true;
                setButtonLang('English');
                return () => { isMounted.current = false; };
            }, []);

            const handleTranslate = useCallback(async () => {
                if (show) { setShow(false); return; }
                if (translation) { setShow(true); return; }
                if (!textToTranslate.trim()) return;

                setIsLoading(true);
                setError(null);
                try {
                    const targetLanguage = 'English';
                    const prompt = `Translate the following Korean text to ${targetLanguage}. Provide only the most natural-sounding translation, without any additional explanations or quotation marks.`;
                    const payload = { contents: [{ role: "user", parts: [{ text: prompt }, { text: textToTranslate }] }] };
                    // NOTE: The API key is intentionally left blank.
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) throw new Error(`API Error: ${response.status}`);
                    const result = await response.json();
                    if (isMounted.current && result.candidates?.[0]?.content.parts[0].text) {
                        setTranslation(result.candidates[0].content.parts[0].text.trim());
                        setShow(true);
                    } else { throw new Error("Invalid API response format."); }
                } catch (err) { if (isMounted.current) setError("Î≤àÏó≠Ïóê Ïã§Ìå®ÌñàÏñ¥Ïöî."); }
                finally { if (isMounted.current) setIsLoading(false); }
            }, [show, translation, textToTranslate]);

            return (
                <div className="mt-1 no-print">
                    <button onClick={handleTranslate} disabled={isLoading} className="text-xs text-gray-500 hover:text-gray-800 font-semibold py-1 px-2 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors disabled:text-gray-300">{isLoading ? 'Î≤àÏó≠ Ï§ë...' : (show ? 'Î≤àÏó≠ Ïà®Í∏∞Í∏∞' : `Î≤àÏó≠ (${buttonLang})`)}</button>
                    {show && translation && <p className="text-gray-600 text-base mt-2 mb-2 whitespace-pre-wrap">{translation}</p>}
                    {error && <p className="text-red-500 text-sm mt-1">{error}</p>}
                </div>
            );
        });

        // --- [ÎèôÏòÅÏÉÅ ÏûêÎ£å] ÌÉ≠ Í¥ÄÎ†® Ïª¥Ìè¨ÎÑåÌä∏ ---
        const HighlightedText = React.memo(({ text, highlightData, onWordHover, onWordLeave, lineId, activeWordId }) => {
            if (!text || !highlightData) return text;
            const { regex, wordMap, sortedWords } = highlightData;
            const parts = text.split(regex);
            return (<>{parts.map((part, index) => {
                if (!part) return null;
                if (index % 2 === 0) return part;
                const trimmedPart = part.trim();
                const baseForm = sortedWords.find(word => {
                    const vocabItem = wordMap.get(word);
                    if (vocabItem.variants && vocabItem.variants.includes(trimmedPart)) return true;
                    const cleanPart = trimmedPart.replace(/\s/g, '');
                    const cleanWord = word.replace(/\s/g, '');
                    if (word.endsWith('Îã§')) return cleanPart.startsWith(cleanWord.slice(0, -1));
                    return cleanPart.startsWith(cleanWord);
                });
                if (!baseForm) return part;
                const info = wordMap.get(baseForm);
                if (!info) return part;
                const uniqueWordId = `${lineId}-${index}-${baseForm}`;
                const classes = ['highlight-general', 'font-bold', activeWordId === uniqueWordId ? 'active-highlight' : ''].join(' ');
                return <span
                    key={index}
                    className={classes}
                    onMouseEnter={(e) => onWordHover(e, baseForm, lineId, index)}
                    onMouseLeave={onWordLeave}
                >{part}</span>;
            })}</>);
        });

        const HoverTooltip = React.memo(({ data, position }) => {
            if (!data || !position) return null;
            return (
                <div
                    className="hover-tooltip"
                    style={{ left: `${position.x}px`, top: `${position.y}px` }}
                >
                    <p className="font-bold text-lg text-green-700 mb-2">{data.term}</p>
                    <p className="text-gray-700 text-base">{data.mainDef}</p>
                    {data.subDefs && data.subDefs.length > 0 && (
                        <div className="mt-3 pt-3 border-t border-gray-200">
                            <ul className="space-y-1">
                                {data.subDefs.map((sub, i) => (
                                    <li key={i} className="text-sm">
                                        <span className="font-semibold text-gray-600">{sub.subTerm}:</span>{' '}
                                        <span className="text-gray-600">{sub.subDef}</span>
                                    </li>
                                ))}
                            </ul>
                        </div>
                    )}
                </div>
            );
        });

        const VocabItem = React.memo(React.forwardRef(({ item, isHighlighted }, ref) => {
            const { useState } = React;
            const [showExamples, setShowExamples] = useState(false);

            return (
                <div ref={ref} className={`p-4 rounded-lg border-b ${isHighlighted ? 'vocab-highlight' : 'bg-white'}`}>
                    <p className="font-bold text-[18px] text-green-700">{item.term}</p>
                    <div className="pl-4 mt-2 border-l-2">
                        <p className="text-gray-700 text-[17px]">{item.mainDef}</p>
                        {item.subDefs && item.subDefs.length > 0 && (
                            <div className="mt-3 pt-3 border-t">{item.subDefs.map((sub, index) => (
                                <div key={index} className="mt-2">
                                    <p className="font-semibold text-[17px]">{sub.subTerm}</p>
                                    <p className="text-gray-600 pl-2 text-[16px]">{sub.subDef}</p>
                                </div>
                            ))}</div>
                        )}
                    </div>
                    {item.examples && item.examples.length > 0 && (
                        <div className="mt-3 no-print">
                            <button onClick={() => setShowExamples(!showExamples)} className="text-xs bg-green-200 hover:bg-green-300 text-gray-600 py-1 px-2 rounded-md">
                                {showExamples ? 'ÏòàÎ¨∏ Îã´Í∏∞' : 'Sentence Examples'}
                            </button>
                            {showExamples && (
                                <div className="mt-3 p-3 bg-green-50 rounded-lg space-y-3 text-[15px]">
                                    {item.examples.map((ex, index) => (
                                        <div key={index}>
                                            <p className="font-medium text-gray-800">{ex.kor}</p>
                                            <p className="text-gray-400 hover:text-gray-700 transition-colors">{ex.eng}</p>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        }));

        const VideoMaterialsTab = ({scriptContent, vocabAndGrammarList, highlightData, vocabMap}) => {
            const { useState, useRef, useEffect, useCallback, useMemo } = React;
            const [activeWordId, setActiveWordId] = useState(null);
            const [player, setPlayer] = useState(null);
            const [activeScriptLine, setActiveScriptLine] = useState(null);
            const [isSyncEnabled, setIsSyncEnabled] = useState(true);
            const [hoverPopupData, setHoverPopupData] = useState(null);
            const [highlightedVocab, setHighlightedVocab] = useState(null);
            const [translationsVisible, setTranslationsVisible] = useState({});
            const [playerHeight, setPlayerHeight] = useState(0);
            const [isVocabSidebarVisible, setIsVocabSidebarVisible] = useState(true);
            const [isPortrait, setIsPortrait] = useState(window.matchMedia("(orientation: portrait)").matches);
            const [playbackRate, setPlaybackRate] = useState(1); // Ïû¨ÏÉù ÏÜçÎèÑ ÏÉÅÌÉú Ï∂îÍ∞Ä

            const scriptLineRefs = useRef({});
            const vocabRefs = useRef({});
            const intervalRef = useRef();
            const playerContainerRef = useRef(null);
            const hoverTimeoutRef = useRef(null);
            const scriptWrapperRef = useRef(null); // Ïä§ÌÅ¨Î°§ Ïª®ÌÖåÏù¥ÎÑàÎ•º ÏúÑÌïú ref Ï∂îÍ∞Ä
            const clipTimeoutRef = useRef(null); // Ïù¥ Î¨∏Ïû•Îßå Ïû¨ÏÉù ÌÉÄÏûÑÏïÑÏõÉÏùÑ ÏúÑÌïú ref

            const activeScriptLineRef = useRef(activeScriptLine);
            activeScriptLineRef.current = activeScriptLine;

            // --- Phase 2: Indexing for performance ---
            const timeIndex = useMemo(() => {
                return scriptContent
                    .filter(line => line.time)
                    .map(line => ({ start: line.time[0], end: line.time[1], id: line.id }))
                    .sort((a, b) => a.start - b.start);
            }, [scriptContent]);

            const onPlayerReady = useCallback((event) => {
                setPlayer(event.target);
                event.target.setPlaybackRate(playbackRate); // ÌîåÎ†àÏù¥Ïñ¥ Ï§ÄÎπÑ Ïãú ÌòÑÏû¨ ÏÜçÎèÑ ÏÑ§Ï†ï
            }, [playbackRate]);

            const setupPlayer = useCallback(() => {
                if (window.YT && window.YT.Player) {
                    const newPlayer = new window.YT.Player('youtube-player', {
                        height: '100%',
                        width: '100%',
                        videoId: 'or55JENlG2k',
                        events: { 'onReady': onPlayerReady }
                    });
                    setPlayer(newPlayer);
                }
            }, [onPlayerReady]);

            useEffect(() => {
                const mediaQuery = window.matchMedia("(orientation: portrait)");
                const handleOrientationChange = (e) => setIsPortrait(e.matches);
                mediaQuery.addEventListener('change', handleOrientationChange);
                return () => mediaQuery.removeEventListener('change', handleOrientationChange);
            }, []);

            useEffect(() => {
                if (window.YT && document.getElementById('youtube-player')) {
                    if (!player) setupPlayer();
                } else if (!window.YT) {
                    window.onYouTubeIframeAPIReady = setupPlayer;
                }
                return () => { 
                    if (intervalRef.current) clearInterval(intervalRef.current); 
                    if (clipTimeoutRef.current) clearTimeout(clipTimeoutRef.current);
                };
            }, [setupPlayer, player]);

            useEffect(() => {
                let ro;
                if (playerContainerRef.current) {
                    const updateHeight = () => { if (playerContainerRef.current) setPlayerHeight(playerContainerRef.current.offsetHeight); };
                    ro = new ResizeObserver(updateHeight);
                    ro.observe(playerContainerRef.current);
                    updateHeight();
                }
                return () => ro?.disconnect();
            }, []);

            // playbackRate ÏÉÅÌÉúÍ∞Ä Î≥ÄÍ≤ΩÎêòÍ±∞ÎÇò playerÍ∞Ä Ï§ÄÎπÑÎêòÎ©¥ ÏÜçÎèÑ ÏÑ§Ï†ï
            useEffect(() => {
                if (player && player.setPlaybackRate) {
                    player.setPlaybackRate(playbackRate);
                }
            }, [player, playbackRate]);

            useEffect(() => {
                if (player && isSyncEnabled) {
                    intervalRef.current = setInterval(() => {
                        if (player.getCurrentTime) {
                            const currentTime = player.getCurrentTime();
                            const currentLine = timeIndex.find(line => currentTime >= line.start && currentTime < line.end);
                            const currentLineId = currentLine ? currentLine.id : null;
                            if (activeScriptLineRef.current !== currentLineId) {
                                setActiveScriptLine(currentLineId);
                            }
                        }
                    }, 250);
                } else {
                    clearInterval(intervalRef.current);
                }
                return () => clearInterval(intervalRef.current);
            }, [player, isSyncEnabled, timeIndex]);

            useEffect(() => {
                if (activeScriptLine && isSyncEnabled) {
                    const lineElement = scriptLineRefs.current[activeScriptLine];
                    const scriptWrapper = scriptWrapperRef.current; // Ïä§ÌÅ¨Î°§ Ïª®ÌÖåÏù¥ÎÑà ref Í∞ÄÏ†∏Ïò§Í∏∞

                    if (lineElement && scriptWrapper) {
                        // Í∏∞Ï°¥ window.scrollBy Î°úÏßÅÏùÑ ÎåÄÏ≤¥Ìï©ÎãàÎã§.
                        
                        // Ïä§ÌÅ¨Î°§Ìï† ÏúÑÏπò Í≥ÑÏÇ∞
                        const wrapperHeight = scriptWrapper.clientHeight; // Ïª®ÌÖåÏù¥ÎÑàÏùò Î≥¥Ïù¥Îäî ÎÜíÏù¥
                        const lineTop = lineElement.offsetTop; // Ïä§ÌÅ¨Î°§ Ïª®ÌÖåÏù¥ÎÑà ÏΩòÌÖêÏ∏† Í∏∞Ï§Ä ÎùºÏù∏Ïùò ÏÉÅÎã® ÏúÑÏπò
                        const lineHeight = lineElement.offsetHeight; // ÎùºÏù∏Ïùò ÎÜíÏù¥

                        // ÎùºÏù∏ ÏöîÏÜåÏùò Ï§ëÏïôÏù¥ Ïª®ÌÖåÏù¥ÎÑàÏùò Ï§ëÏïôÏóê Ïò§ÎèÑÎ°ù Î™©Ìëú Ïä§ÌÅ¨Î°§ ÏúÑÏπò Í≥ÑÏÇ∞
                        const targetScrollTop = lineTop - (wrapperHeight / 2) + (lineHeight / 2);

                        // windowÍ∞Ä ÏïÑÎãå scriptWrapperÎ•º Ïä§ÌÅ¨Î°§Ìï©ÎãàÎã§.
                        scriptWrapper.scrollTo({
                            top: targetScrollTop,
                            behavior: 'smooth'
                        });
                    }
                }
            }, [activeScriptLine, isSyncEnabled]);

            const handlePlayClip = (line) => {
                if (!player || !line.time) return;

                // Ïù¥ÎØ∏ Ïã§Ìñâ Ï§ëÏù∏ ÌÉÄÏûÑÏïÑÏõÉÏù¥ ÏûàÎã§Î©¥ Ï∑®ÏÜå
                if (clipTimeoutRef.current) {
                    clearTimeout(clipTimeoutRef.current);
                }

                const [start, end] = line.time;
                const duration = (end - start) * 1000;

                if (player.seekTo && player.playVideo && player.pauseVideo && duration > 0) {
                    player.seekTo(start);
                    player.playVideo();

                    // (end - start) ÏãúÍ∞Ñ ÌõÑÏóê ÎπÑÎîîÏò§Î•º Ï†ïÏßÄ
                    clipTimeoutRef.current = setTimeout(() => {
                        player.pauseVideo();
                        clipTimeoutRef.current = null;
                    }, duration);
                }
            };

            // Ïû¨ÏÉù ÏÜçÎèÑ Î≥ÄÍ≤Ω Ìï∏Îì§Îü¨
            const handleRateChange = (e) => {
                const newRate = parseFloat(e.target.value);
                setPlaybackRate(newRate);
                // useEffect [player, playbackRate]Í∞Ä ÌîåÎ†àÏù¥Ïñ¥ ÏÜçÎèÑÎ•º ÏóÖÎç∞Ïù¥Ìä∏Ìï©ÎãàÎã§.
            };

            const handleWordHover = useCallback((e, baseForm) => {
                e.stopPropagation();
                if (hoverTimeoutRef.current) clearTimeout(hoverTimeoutRef.current);

                const wordData = vocabMap.get(baseForm);
                if (wordData) {
                    const rect = e.target.getBoundingClientRect();
                    let x = rect.left;
                    let y = rect.bottom + 5;
                    const tooltipWidth = 320;
                    if (x + tooltipWidth > window.innerWidth) {
                        x = rect.right - tooltipWidth;
                        if (x < 0) x = 10;
                    }
                    const tooltipHeight = 200; // Approximate height
                    if (y + tooltipHeight > window.innerHeight + window.scrollY) {
                        y = rect.top - tooltipHeight - 5;
                    }
                    setHoverPopupData({ data: wordData, position: { x, y } });
                    setHighlightedVocab(wordData.term);

                    const vocabElement = vocabRefs.current[wordData.term];
                    if (vocabElement) {
                        vocabElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }
                }
            }, [vocabMap]);

            const handleWordLeave = useCallback(() => {
                hoverTimeoutRef.current = setTimeout(() => {
                    setHoverPopupData(null);
                    setHighlightedVocab(null);
                }, 200);
            }, []);

            const toggleTranslation = (lineId) => {
                setTranslationsVisible(prev => ({ ...prev, [lineId]: !prev[lineId] }));
            };

            return (
                <div className="video-materials-content md:flex md:flex-row md:gap-6">
                    {hoverPopupData && <HoverTooltip data={hoverPopupData.data} position={hoverPopupData.position} />}
                    <div ref={playerContainerRef} className="video-wrapper md:w-[41%] md:sticky top-0 z-40 bg-gray-50 py-4 no-print">
                        <div className={`w-full rounded-xl shadow-lg border-4 border-white overflow-hidden transition-all duration-300 ease-in-out aspect-[9/16]`}>
                            <div id="youtube-player" className="w-full h-full"></div>
                        </div>
                        <div className="mt-4 flex flex-row justify-between items-center gap-4">
                            <label htmlFor="sync-toggle" className="flex items-center justify-between cursor-pointer bg-white py-1.5 px-3 rounded-lg shadow-md border w-auto flex-none">
                                <span className="text-xs font-medium text-gray-900 whitespace-nowrap">Auto-scroll</span>
                                <div className="relative ml-3">
                                    <input type="checkbox" id="sync-toggle" className="sr-only" checked={isSyncEnabled} onChange={() => setIsSyncEnabled(!isSyncEnabled)} />
                                    <div className={`block w-10 rounded-full transition-colors ${isSyncEnabled ? 'bg-green-500' : 'bg-gray-200'}`} style={{ height: '0.35cm' }}></div>
                                    <div className={`dot absolute left-1 top-[2.6px] bg-white w-2 h-2 rounded-full transition-transform ${isSyncEnabled ? 'transform translate-x-6' : ''}`}></div>
                                </div>
                            </label>
                            
                            <div className="flex items-center gap-2 bg-white py-1.5 px-3 rounded-lg shadow-md border w-auto flex-1">
                                <span className="text-xs font-medium text-gray-900">Speed</span>
                                <input
                                    type="range"
                                    min="0.70"
                                    max="1.20"
                                    step="0.01"
                                    value={playbackRate}
                                    onChange={handleRateChange}
                                    className="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer mx-2"
                                    aria-label="Playback speed"
                                />
                                <span className="text-xs font-semibold text-green-700 w-12 text-right">{playbackRate.toFixed(2)}x</span>
                            </div>
                        </div>
                    </div>
                    <div className="script-wrapper md:w-[59%] md:max-h-[calc(100vh-4rem)] md:overflow-y-auto" ref={scriptWrapperRef}>
                        <main className="flex-grow">
                            <div className="space-y-6">
                                {scriptContent.map(line => {
                                    const hasTranslation = !!line.eng;
                                    const isActive = activeScriptLine === line.id;

                                    if (line.kor.startsWith('‚Ä¢')) {
                                        return (
                                            <div key={line.id} ref={el => scriptLineRefs.current[line.id] = el}
                                                className={`p-3 my-2 rounded-lg transition-colors duration-300 ${isActive ? 'bg-yellow-100' : ''}`}>
                                                <p className="whitespace-pre-wrap text-lg text-gray-800">
                                                    <HighlightedText text={line.kor} highlightData={highlightData} onWordHover={handleWordHover} onWordLeave={handleWordLeave} lineId={line.id} activeWordId={activeWordId} />
                                                </p>
                                                {translationsVisible[line.id] && hasTranslation && (
                                                    <p className="text-gray-600 text-base mt-2">{line.eng}</p>
                                                )}
                                                <div className="flex items-center gap-2 mt-2 no-print">
                                                    {hasTranslation && (
                                                        <button onClick={() => toggleTranslation(line.id)} className="text-xs text-gray-600 bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition">
                                                            {translationsVisible[line.id] ? 'Hide translation' : 'Translation'}
                                                        </button>
                                                    )}
                                                </div>
                                            </div>
                                        );
                                    }

                                    const isYuna = line.speaker === 'Ïä§Î∏åÏä§Îâ¥Ïä§'; // Ïä§Î∏åÏä§Îâ¥Ïä§ÎèÑ ÏôºÏ™Ω
                                    const bubbleWrapperClasses = `flex flex-col max-w-[100%] sm:max-w-[100%] ${isYuna ? 'items-start ml-3' : 'items-end self-end mr-3'}`;
                                    const bubbleBaseClasses = 'relative px-5 py-3 rounded-2xl shadow-md transition-colors duration-300';
                                    const yunaBubbleColor = 'bg-green-100';
                                    const woodyBubbleColor = 'bg-white';
                                    const activeBubbleColor = 'bg-yellow-100';
                                    // Determine tailClass based on speaker
                                    const tailClass = isYuna ? 'bubble-tail-left bubble-kkn20' : 'bubble-tail-right bubble-other';
                                    const bubbleClasses = `${bubbleBaseClasses} ${isActive ? activeBubbleColor : (isYuna ? yunaBubbleColor : woodyBubbleColor)} ${tailClass} ${isActive ? 'bubble-active' : ''}`;
                                    const speakerNameClasses = `font-bold mb-1 ${isYuna ? 'text-green-800' : 'text-blue-800'}`;

                                    return (
                                        <div key={line.id} ref={el => scriptLineRefs.current[line.id] = el} className="flex flex-col w-full">
                                            <div className={bubbleWrapperClasses}>
                                                <p className={`${speakerNameClasses} ${isYuna ? 'self-start' : 'self-end'}`}>{line.speaker}</p>
                                                <div className={bubbleClasses}>
                                                    <p className="whitespace-pre-wrap text-lg text-gray-800">
                                                        <HighlightedText text={line.kor} highlightData={highlightData} onWordHover={handleWordHover} onWordLeave={handleWordLeave} lineId={line.id} activeWordId={activeWordId} />
                                                    </p>
                                                </div>
                                                <div className={`w-full flex flex-col ${isYuna ? 'items-start' : 'items-end'}`}>
                                                    {translationsVisible[line.id] && hasTranslation && (
                                                        <p className="text-gray-500 text-base mt-2 px-2">{line.eng}</p>
                                                    )}
                                                    <div className="flex items-center gap-2 mt-2 px-2 no-print">
                                                        {line.time && (
                                                            <button onClick={() => handlePlayClip(line)} className="text-xs px-2 py-1 rounded-md transition bg-gray-100 hover:bg-gray-200 text-gray-600">
                                                                Play Clip
                                                            </button>
                                                        )}
                                                        {hasTranslation && (
                                                            <button onClick={() => toggleTranslation(line.id)} className="text-xs text-gray-600 bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition">
                                                                {translationsVisible[line.id] ? 'Hide translation' : 'Translation'}
                                                            </button>
                                                        )}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </main>
                        {/* REMOVED: The <aside className="vocab-sidebar ..."> block 
                            which contained the vocabulary list and toggle buttons 
                            has been completely removed from this component.
                        */}
                    </div>
                </div>
            )
        }

        // --- [ÌÄ¥Ï¶à&ÌÜ†Î°†] ÌÉ≠ Í¥ÄÎ†® Ïª¥Ìè¨ÎÑåÌä∏ ---
        const ComprehensionQuiz = ({ sentences }) => {
            const { useState, useMemo } = React;
            const [selectedWords, setSelectedWords] = useState({});
            const [results, setResults] = useState({});
            const [translationsVisible, setTranslationsVisible] = useState({});
            const [hintsVisible, setHintsVisible] = useState({});

            const shuffledSentences = useMemo(() => {
                const shuffleArray = (array) => {
                    const newArray = [...array];
                    for (let i = newArray.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                    }
                    return newArray;
                };
                return sentences.map(sentence => ({ ...sentence, bank: shuffleArray(sentence.bank) }));
            }, [sentences]);

            const handleWordSelect = (id, word) => {
                setSelectedWords(prev => ({...prev, [id]: word}));
                const isCorrect = sentences.find(s => s.id === id).answer === word;
                setResults(prev => ({...prev, [id]: isCorrect}));
                setHintsVisible(prev => ({ ...prev, [id]: false }));
            };
            const handleToggleTranslation = (id) => { setTranslationsVisible(prev => ({...prev, [id]: !prev[id]})); };
            const handleToggleHint = (id) => { if (results[id] !== true) setHintsVisible(prev => ({...prev, [id]: !prev[id]})); };

            return (
                <div className="space-y-8">
                    {shuffledSentences.map((s, index) => (
                        <div key={s.id} className="p-6 border rounded-xl bg-white shadow-lg transition-all duration-300">
                            <p className="text-gray-700 font-bold text-lg mb-4">{index + 1}. Îã§Ïùå ÎπàÏπ∏Ïóê ÏïåÎßûÏùÄ ÎßêÏùÑ Í≥†Î•¥ÏÑ∏Ïöî. (Choose the correct word for the blank.)</p>
                            <div className="p-4 bg-gray-100 rounded-lg text-left mb-3 text-gray-900 text-xl font-bold">
                                {s.parts[0]}
                                <span className="inline-block bg-yellow-200 text-green-800 px-3 py-1 rounded-md font-extrabold mx-2">
                                    {hintsVisible[s.id] ? `[ ${s.eng_hint} ]` : (selectedWords[s.id] || '___')}
                                </span>
                                {s.parts[1]}
                                {results[s.id] === true && <span className="inline-block ml-2 text-green-500">‚úì</span>}
                                {results[s.id] === false && <span className="inline-block ml-2 text-red-500">‚úó</span>}
                            </div>
                            {translationsVisible[s.id] && (
                                <div className="text-gray-600 italic p-3 bg-gray-50 rounded-lg text-left mt-2 text-base">
                                    {results[s.id] ? (<span>{s.eng_parts[0]}<strong className="text-green-600">{s.eng_answer}</strong>{s.eng_parts[1]}</span>)
                                    : (<span>{s.eng_parts[0]}<span className="font-bold">___</span>{s.eng_parts[1]}</span>)}
                                </div>
                            )}
                            <div className="text-left mb-4 flex gap-2">
                                <button onClick={() => handleToggleHint(s.id)} className="text-xs bg-yellow-200 hover:bg-yellow-300 text-yellow-800 font-bold py-1 px-3 rounded-full transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed" disabled={results[s.id] === true}>ÌûåÌä∏ (Hint)</button>
                                <button onClick={() => handleToggleTranslation(s.id)} className="text-xs bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-1 px-3 rounded-full transition duration-200">Î≤àÏó≠ (Translation)</button>
                            </div>
                            <div className="flex justify-start flex-wrap gap-3">
                                {s.bank.map(word => (
                                    <button
                                        key={word}
                                        onClick={() => handleWordSelect(s.id, word)}
                                        className={`px-4 py-2 rounded-lg text-lg font-bold transition-all transform hover:scale-105 shadow-md ${selectedWords[s.id] === word ? (results[s.id] ? 'bg-green-500 text-white ring-2 ring-opacity-50 ring-green-400' : 'bg-red-500 text-white ring-2 ring-red-300') : 'bg-white text-gray-800 hover:bg-gray-100 border'}`}
                                    >{word}</button>
                                ))}
                            </div>
                            {results[s.id] !== undefined && (
                                <div className={`mt-4 p-4 border-l-4 rounded-r-lg ${results[s.id] ? 'bg-green-50 border-green-400' : 'bg-red-50 border-red-400'}`}>
                                    <p className={`font-bold ${results[s.id] ? 'text-green-800' : 'text-red-800'} flex items-center gap-2 text-lg`}>{results[s.id] ? 'Correct!' : 'Try again.'}</p>
                                    <p className="mt-2 text-gray-700 text-base italic">{results[s.id] ? s.eng_explanation : s.eng_wrongAnswerExplanations[selectedWords[s.id]]}</p>
                                </div>
                            )}
                        </div>
                    ))}
                </div>
            );
        };

        const SentenceChecker = ({ value, onChange, placeholder, question }) => {
            const { useState } = React;
            const [feedback, setFeedback] = useState(null);
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState(null);

            const checkSentence = async () => {
                if (!value || value.trim() === '') {
                    setError("Î¨∏Ïû•ÏùÑ ÏûÖÎ†•Ìï¥Ïïº ÌîºÎìúÎ∞±ÏùÑ Î∞õÏùÑ Ïàò ÏûàÏñ¥Ïöî.");
                    setFeedback(null); return;
                }
                setIsLoading(true); setError(null); setFeedback(null);
                const prompt = `You are an advanced Korean language tutor AI for B1-C2 level learners. Analyze the user's sentence in response to a specific question. The user's answer is in Korean. Your entire response MUST be a JSON object, with all string values in Korean (ending in -Ïöî) and English.\n\nQuestion: "${question}"\nUser's Answer: "${value}"\n\nYour response MUST be a JSON object with the specified schema.`;
                const payload = {
                    contents: [{ role: "user", parts: [{ text: prompt }] }],
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: { type: "OBJECT", properties: { "is_relevant": { "type": "BOOLEAN" }, "relevance_feedback_kor": { "type": "STRING", "nullable": true }, "relevance_feedback_eng": { "type": "STRING", "nullable": true }, "is_correct": { "type": "BOOLEAN", "nullable": true }, "feedback_message_kor": { "type": "STRING", "nullable": true }, "feedback_message_eng": { "type": "STRING", "nullable": true }, "corrected_sentence": { "type": "STRING", "nullable": true }, "explanation_kor": { "type": "STRING", "nullable": true }, "explanation_eng": { "type": "STRING", "nullable": true }, "alternative_expressions": { "type": "ARRAY", "items": { "type": "OBJECT", "properties": { "expression_kor": { "type": "STRING" }, "expression_eng": { "type": "STRING" } }, "required": ["expression_kor", "expression_eng"] } } }, "required": ["is_relevant"] }
                    }
                };
                const apiKey = ""; // NOTE: The API key is intentionally left blank.
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                try {
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) throw new Error(`API error: ${response.statusText}`);
                    const result = await response.json();

                    // Enhanced error handling for API response
                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0 && result.candidates[0].content.parts[0].text) {
                        try {
                            const parsedJson = JSON.parse(result.candidates[0].content.parts[0].text);
                            setFeedback(parsedJson);
                        } catch (parseError) {
                            console.error("Error parsing JSON response:", parseError, result.candidates[0].content.parts[0].text);
                            setError("AIÏùò ÏùëÎãµ ÌòïÏãùÏù¥ Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏïÑ Ï≤òÎ¶¨Ìï† Ïàò ÏóÜÏñ¥Ïöî.");
                        }
                    } else {
                        console.error("Invalid API response structure:", result);
                        setError("AIÏùò ÏùëÎãµÏùÑ Ï≤òÎ¶¨ÌïòÎäî Îç∞ Î¨∏Ï†úÍ∞Ä Î∞úÏÉùÌñàÏñ¥Ïöî.");
                    }
                } catch (err) {
                    console.error("Error checking sentence:", err);
                    setError("Î¨∏Ïû• Í≤ÄÏÇ¨Ïóê Ïã§Ìå®ÌñàÏñ¥Ïöî. ÎÑ§Ìä∏ÏõåÌÅ¨ Ïó∞Í≤∞ÏùÑ ÌôïÏù∏ÌïòÍ±∞ÎÇò Ïû†Ïãú ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥ Ï£ºÏÑ∏Ïöî.");
                }
                finally { setIsLoading(false); }
            };


            const renderFeedbackSection = (title, content) => (content && content.length > 0 && (
                <div>
                    <p className="text-gray-800 font-bold text-[17px]">{title}</p>
                    {Array.isArray(content) ? (
                        <ul className="list-disc list-inside space-y-2 mt-1">
                            {content.map((item, index) => (
                                <li key={index} className="text-gray-600 text-[16px]">
                                    <p className="font-medium">{item.expression_kor || item.sentence_kor}</p>
                                    <p className="text-gray-500 italic text-sm">{item.expression_eng || item.sentence_eng}</p>
                                </li>
                            ))}
                        </ul>
                    ) : (<p className="text-gray-700 font-medium text-[18px]">{content}</p>)}
                </div>
            ));

            return (
                <div>
                    <textarea className="w-full p-3 border rounded-md focus:ring-2 focus:ring-green-400 transition text-lg" rows="3" placeholder={placeholder} value={value} onChange={onChange} />
                    <button onClick={checkSentence} disabled={isLoading} className="mt-3 flex items-center justify-center gap-2 bg-green-200 text-gray-900 py-2 px-4 rounded-md transition-colors hover:bg-green-300 disabled:opacity-50 disabled:cursor-wait font-semibold text-[14px]">
                        {isLoading ? <Spinner className="w-5 h-5" /> : '‚ú®'} {isLoading ? 'ÌîºÎìúÎ∞± ÏÉùÏÑ± Ï§ë...' : 'AIÏóêÍ≤å ÌîºÎìúÎ∞± Î∞õÍ∏∞'}
                    </button>
                    {error && <p className="mt-2 text-sm text-red-600">{error}</p>}
                    {feedback && (
                        <div className="mt-4 p-4 bg-green-50 border-l-4 border-green-100 rounded-r-lg space-y-4">
                            {!feedback.is_relevant && ( <div><p className="font-bold text-red-800 flex items-center gap-2 text-lg">{feedback.relevance_feedback_kor}</p><p className="text-gray-600 italic">{feedback.relevance_feedback_eng}</p></div> )}
                            {feedback.is_relevant && feedback.is_correct && ( <div><p className="font-bold text-green-800 flex items-center gap-2 text-lg"><ThumbsUp className="w-5 h-5"/> {feedback.feedback_message_kor}</p><p className="text-gray-600 italic">{feedback.feedback_message_eng}</p></div> )}
                            {feedback.is_relevant && !feedback.is_correct && (<>
                                {feedback.corrected_sentence && ( <div><p className="text-gray-800 font-bold text-[17px]">‚ú® ÏàòÏ†ïÎêú Î¨∏Ïû•:</p><p className="text-gray-700 font-medium text-[18px]">{feedback.corrected_sentence}</p></div> )}
                                {(feedback.explanation_kor || feedback.explanation_eng) && ( <div><p className="text-gray-800 font-bold text-[17px]">ÏÑ§Î™Ö:</p>{feedback.explanation_kor && <p className="text-gray-600 text-[16px]">{feedback.explanation_kor}</p>}{feedback.explanation_eng && <p className="text-gray-500 italic mt-1 text-[15px]">{feedback.explanation_eng}</p>}</div> )}
                            </>)}
                            {feedback.alternative_expressions && feedback.alternative_expressions.length > 0 && renderFeedbackSection('üí° Îã§Î•∏ ÌëúÌòÑ:', feedback.alternative_expressions)}
                        </div>
                    )}
                </div>
            );
        };

        const DiscussionSection = ({ questions }) => {
            const { useState } = React;
            const [translationsVisible, setTranslationsVisible] = useState({});
            const [userQuestionAnswers, setUserQuestionAnswers] = useState({});
            const toggleTranslation = (id) => { setTranslationsVisible(prev => ({ ...prev, [id]: !prev[id] })); };

            return (
                <div className="space-y-10">
                    {questions.map((q) => (
                        <div key={q.num} className="p-6 border rounded-xl bg-white shadow-lg">
                            <p className="text-gray-900 text-xl font-bold">{q.num}. {q.kor}</p>
                            {translationsVisible[`q-${q.num}`] && (<p className="whitespace-pre-wrap text-gray-600 italic mt-1 text-base">{q.eng}</p>)}
                            <button onClick={() => toggleTranslation(`q-${q.num}`)} className="text-xs text-gray-800 bg-gray-200 hover:bg-gray-300 font-bold py-1 px-3 rounded-full transition duration-200 mt-2 mb-6">Î≤àÏó≠ (Translation)</button>
                            {q.vocab && q.vocab.length > 0 && (
                                <div className="mt-4 space-y-4">
                                    <h3 className="font-bold text-lg text-gray-800">üìçÌïµÏã¨ ÌëúÌòÑ (Essential phrases)</h3>
                                    {q.vocab.map((v, i) => (
                                        <div key={i} className="pl-4 border-l-2 border-gray-200 py-2">
                                            <p className="font-semibold text-green-700 text-lg">{v.term}: <span className="font-medium text-gray-700 text-base">{v.meaning_eng}</span></p>
                                        </div>
                                    ))}
                                </div>
                            )}
                            <div className="mt-6">
                                <h3 className="font-bold text-lg text-gray-800 mb-2">ÌïµÏã¨ ÌëúÌòÑÏùÑ ÏÇ¨Ïö©Ìï¥ÏÑú ÏßàÎ¨∏Ïóê ÎåÄÎãµÌï¥ Î≥¥ÏÑ∏Ïöî.</h3>
                                <SentenceChecker
                                    value={userQuestionAnswers[`q-${q.num}`] || ''}
                                    onChange={(e) => setUserQuestionAnswers(prev => ({...prev, [`q-${q.num}`]: e.target.value}))}
                                    placeholder="Ïó¨Í∏∞Ïóê ÎãµÎ≥ÄÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî (Type your response here)"
                                    question={q.kor}
                                />
                            </div>
                        </div>
                    ))}
                </div>
            );
        };

        const Tabs = ({ tabs }) => {
            const { useState } = React;
            const [activeTab, setActiveTab] = useState(0);
            return (
                <div>
                    <div className="border-b border-gray-200 no-print">
                        <nav className="-mb-px flex space-x-6" aria-label="Tabs">
                            {tabs.map((tab, index) => (
                                <button
                                    key={tab.name} onClick={() => setActiveTab(index)}
                                    className={`${ index === activeTab ? 'border-green-500 text-green-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm sm:text-base transition-colors flex items-center gap-2`}
                                >{tab.icon} {tab.name}</button>
                            ))}
                        </nav>
                    </div>
                    <div className="pt-10">{tabs[activeTab].content}</div>
                </div>
            );
        };

        // --- Î©îÏù∏ App Ïª¥Ìè¨ÎÑåÌä∏ ---
        const App = () => {
            const { useState, useEffect, useMemo } = React;
            const [containerWidth, setContainerWidth] = useState('30cm');
            const [layoutMode, setLayoutMode] = useState('large');

            useEffect(() => {
                const handleResize = () => {
                    const heightInPx = window.innerHeight; const widthInPx = window.innerWidth;
                    const isMobileDevice = /Mobi|Android/i.test(navigator.userAgent);
                    const isTabletDevice = /iPad|Android(?!.*Mobi)/i.test(navigator.userAgent);
                    const isPortrait = window.matchMedia("(orientation: portrait)").matches;
                    let newMode = 'large'; let newContainerWidth = '30cm';

                    if ((isMobileDevice || isTabletDevice) && isPortrait) { newMode = 'mobile'; newContainerWidth = '100%'; }
                    else {
                        if (heightInPx < 832) { newMode = 'split'; newContainerWidth = '100%'; }
                        else if (heightInPx < 907) { newMode = 'small'; newContainerWidth = '22cm'; }
                        else if (heightInPx < 983) { newMode = 'medium'; newContainerWidth = '24cm'; }
                        else { newMode = 'large'; newContainerWidth = '30cm'; }
                    }
                    setContainerWidth(newContainerWidth); setLayoutMode(newMode); document.body.dataset.layoutMode = newMode;
                    const baseWidthPx = 30 * 37.795; let effectiveWidthPx;
                    if (newContainerWidth === '100%') { effectiveWidthPx = widthInPx; }
                    else { const cmValue = parseFloat(newContainerWidth); effectiveWidthPx = cmValue * 37.795; }
                    if (newMode !== 'large') { const scale = Math.min(1.0, effectiveWidthPx / baseWidthPx); const finalScale = Math.max(0.8, scale); document.documentElement.style.fontSize = `${16 * finalScale}px`; }
                    else { document.documentElement.style.fontSize = '16px'; }
                };
                window.addEventListener('resize', handleResize); handleResize();
                return () => window.removeEventListener('resize', handleResize);
            }, []);

            const { scriptContent, vocabAndGrammarList, sentences, discussionQuestions } = useMemo(() => {
                // Data structures remain multi-line for readability
                const scriptContent = [
                    { id: 's1', speaker: 'Ïä§Î∏åÏä§Îâ¥Ïä§', kor: 'ÏöîÏ¶ò ÎØ∏Íµ≠ ÏÇ¨ÎûåÎì§ÏùÄ Ïà† ÎåÄÏã† ÎßàÏãúÎäî Í≤å ÏûàÏóàÏúºÎãà,', time: [0.000, 3.100], eng: "These days, Americans have something they drink instead of alcohol," },
                    { id: 's2', speaker: 'Ïä§Î∏åÏä§Îâ¥Ïä§', kor: 'Î∞îÎ°ú "ÎåÄÎßà ÏùåÎ£å"ÎùºÍ≥† Ìï©ÎãàÎã§.', time: [3.100, 4.700], eng: 'and it\'s called "cannabis-infused drinks".' },
                    { id: 's3', speaker: 'Ïä§Î∏åÏä§Îâ¥Ïä§', kor: '‚ÄúÌòÑÏû¨ Ïà†ÏùÑ ÎßàÏã†Îã§"ÎùºÍ≥† ÎãµÌïú ÎØ∏Íµ≠ ÏÑ±Ïù∏Ïù¥ Ïó≠ÎåÄ ÏµúÏ†ÄÏπòÎ•º Í∏∞Î°ùÌï† Ï†ïÎèÑ.', time: [5.550, 10.277], eng: 'It\'s to the point where American adults who answered "I currently drink" has hit an all-time low.' },
                    { id: 's4', speaker: 'Ïä§Î∏åÏä§Îâ¥Ïä§', kor: 'ÎåÄÎßà ÏùåÎ£åÎûÄ ÎåÄÎßàÏ¥àÏùò ÏÑ±Î∂Ñ Ï§ë THCÎ•º Ï≤®Í∞ÄÌïòÏó¨ ÎßåÎì† ÏùåÎ£åÎ•º ÏùòÎØ∏ÌïòÎäîÎç∞Ïöî.', time: [10.300, 15.415], eng: 'A "cannabis drink" means a beverage made by adding THC, one of the components of marijuana.' },
                    { id: 's5', speaker: 'Ïä§Î∏åÏä§Îâ¥Ïä§', kor: 'Ïù¥Îü∞ ÎåÄÎßà ÏùåÎ£å ÏãúÏû•Ïù¥ ÎØ∏Íµ≠ÏóêÏÑú ÏóÑÏ≤≠ÎÇòÍ≤å Ïª§ÏßÄÍ≥† ÏûàÍ≥†,', time: [15.415, 18.785], eng: 'This cannabis drink market is growing enormously in the US, and,' },
                    { id: 's6', speaker: 'Ïä§Î∏åÏä§Îâ¥Ïä§', kor: 'Ïó¨Îü¨ Î∏åÎûúÎìúÏùò ÎåÄÎßà ÏùåÎ£åÎ•º ÎßàÏÖî Î≥º Ïàò ÏûàÎäî Ï∂ïÏ†úÍ∞Ä Ïó¥Î¶¨Í∏∞ÎèÑ ÌïòÍ≥†,', time: [18.819, 22.523], eng: 'festivals are held where you can try various brands of cannabis drinks, and' },
                    { id: 's7', speaker: 'Ïä§Î∏åÏä§Îâ¥Ïä§', kor: 'ÎåÄÎßà ÏùåÎ£åÎ•º Î†àÏä§ÌÜ†ÎûëÍ≥º Ïò®ÎùºÏù∏ÏóêÏÑúÎèÑ ÏâΩÍ≤å Íµ¨Îß§Ìï† Ïàò ÏûàÎã§ÎäîÎç∞.', time: [22.556, 26.260], eng: 'they say you can easily buy cannabis drinks at restaurants and online.' },
                    { id: 's8', speaker: 'Ïä§Î∏åÏä§Îâ¥Ïä§', kor: 'Í∞ÄÏû• ÌÅ∞ Ïù¥Ïú†Îäî Ïà†ÏùÑ ÎåÄÌïòÎäî MZÏÑ∏ÎåÄÏùò ÌÉúÎèÑÍ∞Ä Î≥ÄÌñàÍ∏∞ ÎïåÎ¨∏Ïù¥ÎùºÎäîÎç∞Ïöî.', time: [26.293, 30.898], eng: 'The biggest reason, they say, is because the MZ generation\'s attitude towards alcohol has changed.' },
                    { id: 's9', speaker: 'Ïä§Î∏åÏä§Îâ¥Ïä§', kor: 'Ïã§Ï†úÎ°ú ÎØ∏Íµ≠Ïùò 18ÏÑ∏ÏóêÏÑú 34ÏÑ∏Ïùò ÏùåÏ£ºÏú® Î≥ÄÌôîÍ∞Ä Í∞ÄÏû• ÌÅ¨Í∏∞ÎèÑ ÌïúÎç∞,', time: [30.931, 35.200], eng: 'In fact, the change in the drinking rate for 18 to 34-year-olds in the US is the largest,' },
                    { id: 's10', speaker: 'Ïä§Î∏åÏä§Îâ¥Ïä§', kor: 'ÎØ∏Íµ≠ÎøêÎßå ÏïÑÎãàÎùº Ï†Ñ ÏÑ∏Í≥ÑÏ†ÅÏúºÎ°ú Í±¥Í∞ïÏùÑ Ï§ëÏöîÌïòÍ≤å ÏÉùÍ∞ÅÌïòÎäî Í≤å Ìä∏Î†åÎìúÍ∞Ä ÎêòÎãà,', time: [35.235, 39.673], eng: 'and as prioritizing health has become a trend not just in the US but globally,' },
                    { id: 's11', speaker: 'Ïä§Î∏åÏä§Îâ¥Ïä§', kor: 'Ïà†ÏùÑ Î©ÄÎ¶¨ÌïòÎäî ÎßàÏùåÍπåÏßÄ Ïù¥Ïñ¥ÏßÄÍ≤å Îêú Í≤É!', time: [39.700, 42.476], eng: 'it has led to a mindset of avoiding alcohol!' },
                    { id: 's12', speaker: 'Ïä§Î∏åÏä§Îâ¥Ïä§', kor: '"Ïà†Ïù¥ Í±¥Í∞ïÏóê Ïïà Ï¢ãÏúºÎãàÍπå Ïà† ÎåÄÏã† ÎåÄÎßà ÏùåÎ£åÎ•º ÎßàÏãúÏûê...?"', time: [42.509, 45.946], eng: '"Alcohol is unhealthy, so let\'s drink cannabis drinks instead...?"' },
                    { id: 's13', speaker: 'Ïä§Î∏åÏä§Îâ¥Ïä§', kor: 'Ïù¥Í≤å ÎåÄÏ≤¥ Ïñ¥ÎñªÍ≤å ÎÇòÏò® ÏÉùÍ∞ÅÏù¥Ï£†?', time: [45.979, 48.115], eng: 'Where on earth did this idea come from?' },
                    { id: 's14', speaker: 'ÍπÄÎØºÏßÄ(SWRLOperation Îß§ÎãàÏ†Ä)', kor: 'Ïà†ÏùÄ ÎÑàÎ¨¥ Ïó≠ÏÇ¨Í∞Ä ÍπäÏûñÏïÑÏöî.', time: [48.315, 50.517], eng: 'You know, alcohol has such a deep history.' },
                    { id: 's15', speaker: 'ÍπÄÎØºÏßÄ(SWRLOperation Îß§ÎãàÏ†Ä)', kor: 'Í±¥Í∞ïÏóê Ìï¥Î°≠Îã§Îäî Í≤å Ïù¥Ï†ú ÏùòÌïôÏù¥ Î∞úÎã¨ÏùÑ ÌïòÎ©¥ÏÑú', time: [50.550, 53.787], eng: 'The fact that it\'s harmful to health, as medical science developed,' },
                    { id: 's16', speaker: 'ÍπÄÎØºÏßÄ(SWRLOperation Îß§ÎãàÏ†Ä)', kor: 'Í∞ÑÏóê Ìï¥Î°≠Í≥† ÏàôÏ∑®Í∞Ä ÏûàÍ≥† Ïù¥Îü∞ Í±∏ ÏïåÍ≤å Îêú Í±∞Í≥†,', time: [53.820, 57.491], eng: 'we came to know it\'s harmful to the liver and causes hangovers, and,' },
                    { id: 's17', speaker: 'ÍπÄÎØºÏßÄ(SWRLOperation Îß§ÎãàÏ†Ä)', kor: 'ÎåÄÎßàÎäî ÏïÑÏßÅÏùÄ Ïö∞Ïö∏Ï¶ù ÏïΩÏúºÎ°úÎèÑ ÏπòÎ£åÎ•º ÌïòÎäî Í±∞Í≥†,', time: [57.524, 61.428], eng: 'cannabis is still used as a treatment for depression, and,' },
                    { id: 's18', speaker: 'ÍπÄÎØºÏßÄ(SWRLOperation Îß§ÎãàÏ†Ä)', kor: 'Ï†ïÏã† ÏïàÏ†ïÏóê ÎèÑÏõÄÏù¥ ÎêòÍ≥†,', time: [61.461, 63.096], eng: 'it helps with mental stability, and' },
                    { id: 's19', speaker: 'ÍπÄÎØºÏßÄ(SWRLOperation Îß§ÎãàÏ†Ä)', kor: 'Ïù¥Îü∞ ÏñòÍ∏∞ÎèÑ ÎßéÎã® ÎßêÏù¥ÏóêÏöî.', time: [63.130, 65.096], eng: 'there are many stories like that.' }
                ];
                const vocabAndGrammarList = [
                    { "term": "Ïà† ÎåÄÏã† ÎßàÏãúÎäî Í≤å ÏûàÏóàÏúºÎãà", "mainDef": "There was something they drink instead of alcohol, so...", "subDefs": [ { "subTerm": "‚Ä¢ ÎåÄÏã†", "subDef": "instead of; in place of." }, { "subTerm": "‚Ä¢ ÎßàÏãúÎäî Í≤å", "subDef": "the thing (they) drink (colloial form of -Îäî Í≤ÉÏù¥)." }, { "subTerm": "‚Ä¢ -(Ïúº)Îãà", "subDef": "grammar ending indicating reason or discovery ('because' or 'so...')." } ], "variants": ["Ïà† ÎåÄÏã† ÎßàÏãúÎäî Í≤å ÏûàÏóàÏúºÎãà"], "examples": [ { "kor": "Ïª§Ìîº ÎåÄÏã† Î¨ºÏùÑ ÎßàÏÖîÏöî.", "eng": "I drink water instead of coffee." }, { "kor": "Ïù¥Í≤ÉÏùÄ ÎßàÏãúÎäî Í≤å ÏïÑÎãàÏóêÏöî.", "eng": "This is not a (thing for) drinking." }, { "kor": "ÏßÄÍ∏à ÎπÑÍ∞Ä Ïò§Îãà, ÏßëÏóê ÏûàÏñ¥Ïöî.", "eng": "It's raining now, so I'm at home." } ] },
                    { "term": "ÎåÄÎßà ÏùåÎ£å", "mainDef": "hemp beverage; cannabis drink.", "subDefs": [ { "subTerm": "‚Ä¢ ÎåÄÎßà", "subDef": "hemp; cannabis." }, { "subTerm": "‚Ä¢ ÏùåÎ£å", "subDef": "beverage; drink." } ], "variants": ["ÎåÄÎßà ÏùåÎ£å", "ÎåÄÎßà ÏùåÎ£åÎûÄ", "ÎåÄÎßà ÏùåÎ£å ÏãúÏû•Ïù¥", "ÎåÄÎßà ÏùåÎ£åÎ•º"], "examples": [ { "kor": "'ÎåÄÎßà'Îäî ÏãùÎ¨ºÏù¥ÏóêÏöî.", "eng": "Hemp is a plant." }, { "kor": "Ï†ÄÎäî ÏãúÏõêÌïú ÏùåÎ£åÎ•º Ï¢ãÏïÑÌï¥Ïöî.", "eng": "I like cold drinks." } ] },
                    { "term": "-ÎùºÍ≥† ÌïòÎã§", "mainDef": "to be called; it is said that...", "subDefs": [ { "subTerm": "‚Ä¢ -(Ïù¥)ÎùºÍ≥† ÌïòÎã§", "subDef": "indirect quotation for nouns ('to be called [N]') or statements ('to say that [S]').\n(e.g., ÎåÄÎßà ÏùåÎ£åÎùºÍ≥† Ìï©ÎãàÎã§ - It is called a 'hemp beverage'.)" } ], "variants": ["ÎùºÍ≥† Ìï©ÎãàÎã§"], "examples": [ { "kor": "Ï†ú Ïù¥Î¶ÑÏùÄ ÍπÄÎØºÏàòÎùºÍ≥† Ìï©ÎãàÎã§.", "eng": "My name is Minsu Kim." } ] },
                    { "term": "‚ÄùÌòÑÏû¨ Ïà†ÏùÑ ÎßàÏã†Îã§\"ÎùºÍ≥† ÎãµÌïú ÎØ∏Íµ≠ ÏÑ±Ïù∏", "mainDef": "American adults who answered that they 'currently drink alcohol'.", "subDefs": [ { "subTerm": "‚Ä¢ -ÎùºÍ≥† ÎãµÌïòÎã§", "subDef": "to answer that..." }, { "subTerm": "‚Ä¢ -„Ñ¥", "subDef": "past tense modifier describing the following noun ('who did...').\n(e.g., ÎãµÌïú ÏÑ±Ïù∏ - adults who answered.)" }, { "subTerm": "‚Ä¢ ÏÑ±Ïù∏", "subDef": "adult." } ], "variants": ["‚ÄúÌòÑÏû¨ Ïà†ÏùÑ ÎßàÏã†Îã§\"ÎùºÍ≥† ÎãµÌïú ÎØ∏Íµ≠ ÏÑ±Ïù∏Ïù¥"], "examples": [ { "kor": "'ÎÑ§'ÎùºÍ≥† ÎãµÌñàÏñ¥Ïöî.", "eng": "I answered 'yes'." }, { "kor": "Ïñ¥Ï†ú Î®πÏùÄ ÎπµÏù¥ ÎßõÏûàÏñ¥Ïöî.", "eng": "The bread I ate yesterday is delicious." }, { "kor": "Í∑∏Îäî Ïù¥Ï†ú ÏÑ±Ïù∏Ïù¥ÏóêÏöî.", "eng": "He is an adult now." } ] },
                    { "term": "Ïó≠ÎåÄ ÏµúÏ†ÄÏπòÎ•º Í∏∞Î°ùÌï† Ï†ïÎèÑ", "mainDef": "to the point of recording the lowest level in history.", "subDefs": [ { "subTerm": "‚Ä¢ Ïó≠ÎåÄ", "subDef": "in history; of all time." }, { "subTerm": "‚Ä¢ ÏµúÏ†ÄÏπò", "subDef": "the lowest value/level." }, { "subTerm": "‚Ä¢ Í∏∞Î°ùÌïòÎã§", "subDef": "to record; to mark." }, { "subTerm": "‚Ä¢ -„Ñπ/ÏùÑ Ï†ïÎèÑ", "subDef": "to the extent that...; to the point of..." } ], "variants": ["Ïó≠ÎåÄ ÏµúÏ†ÄÏπòÎ•º Í∏∞Î°ùÌï† Ï†ïÎèÑ"], "examples": [ { "kor": "Ïò§ÎäòÏùÄ Ïó≠ÎåÄ Í∞ÄÏû• ÎçîÏö¥ ÎÇ†Ïù¥ÏóêÏöî.", "eng": "Today is the hottest day in history." }, { "kor": "Ïò®ÎèÑÍ∞Ä ÏµúÏ†ÄÏπòÎ°ú Îñ®Ïñ¥Ï°åÏñ¥Ïöî.", "eng": "The temperature dropped to its lowest point." }, { "kor": "Ïù¥Î¶ÑÏùÑ Ïó¨Í∏∞Ïóê Í∏∞Î°ùÌïòÏÑ∏Ïöî.", "eng": "Please record your name here." }, { "kor": "ÎÑàÎ¨¥ Îß§ÏõåÏÑú Ïö∏ Ï†ïÎèÑÏòàÏöî.", "eng": "It's so spicy to the point of crying." } ] },
                    { "term": "ÎåÄÎßàÏ¥àÏùò ÏÑ±Î∂Ñ Ï§ë", "mainDef": "among the components of cannabis.", "subDefs": [ { "subTerm": "‚Ä¢ ÎåÄÎßàÏ¥à", "subDef": "cannabis; marijuana." }, { "subTerm": "‚Ä¢ ÏÑ±Î∂Ñ", "subDef": "component; ingredient." }, { "subTerm": "‚Ä¢ Ï§ë", "subDef": "among; in the middle of." } ], "variants": ["ÎåÄÎßàÏ¥àÏùò ÏÑ±Î∂Ñ Ï§ë"], "examples": [ { "kor": "'ÎåÄÎßàÏ¥à'Îäî Î∂àÎ≤ïÏù¥ÏóêÏöî.", "eng": "Marijuana is illegal." }, { "kor": "Ïù¥ ÏïΩÏùò ÏÑ±Î∂ÑÏù¥ Î≠êÏòàÏöî?", "eng": "What are the ingredients of this medicine?" }, { "kor": "ÏÇ¨Í≥º, Î∞îÎÇòÎÇò, Ïò§Î†åÏßÄ Ï§ëÏóêÏÑú ÏÇ¨Í≥ºÎ•º Ï¢ãÏïÑÌï¥Ïöî.", "eng": "Among apples, bananas, and oranges, I like apples." } ] },
                    { "term": "THCÎ•º Ï≤®Í∞ÄÌïòÏó¨ ÎßåÎì† ÏùåÎ£å", "mainDef": "a beverage made by adding THC.", "subDefs": [ { "subTerm": "‚Ä¢ THC", "subDef": "THC (Tetrahydrocannabinol)." }, { "subTerm": "‚Ä¢ Ï≤®Í∞ÄÌïòÎã§", "subDef": "to add." }, { "subTerm": "‚Ä¢ -Ïó¨(ÏÑú)", "subDef": "links actions in sequence ('do this *and then*...')." }, { "subTerm": "‚Ä¢ -„Ñ¥/ÏùÄ", "subDef": "past tense modifier describing the following noun ('which was made...').\n(e.g., ÎßåÎì† ÏùåÎ£å - a beverage that was made.)" }, { "subTerm": "‚Ä¢ ÏùåÎ£å", "subDef": "beverage; drink." } ], "variants": ["THCÎ•º Ï≤®Í∞ÄÌïòÏó¨ ÎßåÎì† ÏùåÎ£åÎ•º", "THCÎ•º Ï≤®Í∞ÄÌïòÏó¨ ÎßåÎì† ÏùåÎ£å"], "examples": [ { "kor": "THCÎäî ÏÑ±Î∂ÑÏù¥ÏóêÏöî.", "eng": "THC is an ingredient." }, { "kor": "ÏÑ§ÌÉïÏùÑ Ï°∞Í∏à Ï≤®Í∞ÄÌï¥Ïöî.", "eng": "Add a little sugar." }, { "kor": "ÏùºÏñ¥ÎÇòÏÑú Î∞•ÏùÑ Î®πÏñ¥Ïöî.", "eng": "I wake up and then eat." }, { "kor": "Ïñ¥Ï†ú Î≥∏ ÏòÅÌôîÍ∞Ä Ïû¨ÎØ∏ÏûàÏñ¥Ïöî.", "eng": "The movie I watched yesterday is fun." }, { "kor": "Î¨¥Ïä® ÏùåÎ£å ÎßàÏã§ÎûòÏöî?", "eng": "What drink do you want?" } ] },
                    { "term": "ÏùòÎØ∏ÌïòÎäîÎç∞Ïöî", "mainDef": "it means... (and...)", "subDefs": [ { "subTerm": "‚Ä¢ ÏùòÎØ∏ÌïòÎã§", "subDef": "to mean; to signify." }, { "subTerm": "‚Ä¢ -ÎäîÎç∞Ïöî", "subDef": "grammar ending used to provide background information or introduce a new topic.\n(e.g., ...ÏùåÎ£åÎ•º ÏùòÎØ∏ÌïòÎäîÎç∞Ïöî - It means... a beverage, and...)" } ], "variants": ["ÏùòÎØ∏ÌïòÎäîÎç∞Ïöî"], "examples": [ { "kor": "Ïù¥ Îã®Ïñ¥Îäî 'ÏÇ¨Îûë'ÏùÑ ÏùòÎØ∏Ìï¥Ïöî.", "eng": "This word means 'love'." }, { "kor": "ÏßÄÍ∏à Í≥µÎ∂ÄÌïòÎäîÎç∞Ïöî.", "eng": "I'm studying right now..." } ] },
                    { "term": "ÏóÑÏ≤≠ÎÇòÍ≤å Ïª§ÏßÄÍ≥† ÏûàÍ≥†", "mainDef": "is getting incredibly large (and...)", "subDefs": [ { "subTerm": "‚Ä¢ ÏóÑÏ≤≠ÎÇòÍ≤å", "subDef": "incredibly; enormously." }, { "subTerm": "‚Ä¢ Ïª§ÏßÄÎã§", "subDef": "to get bigger; to grow." }, { "subTerm": "‚Ä¢ -Í≥† ÏûàÎã§", "subDef": "present progressive ('is ...-ing').\n(e.g., Ïª§ÏßÄÍ≥† ÏûàÎã§ - is growing.)" } ], "variants": ["ÏóÑÏ≤≠ÎÇòÍ≤å Ïª§ÏßÄÍ≥† ÏûàÍ≥†"], "examples": [ { "kor": "ÎÇ†Ïî®Í∞Ä ÏóÑÏ≤≠ÎÇòÍ≤å Ï∂îÏõåÏöî.", "eng": "The weather is incredibly cold." }, { "kor": "Í∞ïÏïÑÏßÄÍ∞Ä ÎßéÏù¥ Ïª§Ï°åÏñ¥Ïöî.", "eng": "The puppy has gotten much bigger." }, { "kor": "ÏπúÍµ¨Í∞Ä Î∞•ÏùÑ Î®πÍ≥† ÏûàÏñ¥Ïöî.", "eng": "My friend is eating." } ] },
                    { "term": "Ïó¨Îü¨ Î∏åÎûúÎìúÏùò ÎåÄÎßà ÏùåÎ£åÎ•º ÎßàÏÖî Î≥º Ïàò ÏûàÎäî Ï∂ïÏ†ú", "mainDef": "a festival where you can try drinking various brands of hemp beverages.", "subDefs": [ { "subTerm": "‚Ä¢ Ïó¨Îü¨", "subDef": "various; many." }, { "subTerm": "‚Ä¢ -ÏïÑ/Ïñ¥ Î≥º Ïàò ÏûàÎã§", "subDef": "can try (doing something).\n(e.g., ÎßàÏÖî Î≥º Ïàò ÏûàÎã§ - can try drinking.)" }, { "subTerm": "‚Ä¢ -Îäî", "subDef": "present tense modifier describing the following noun ('where you can...')." }, { "subTerm": "‚Ä¢ Ï∂ïÏ†ú", "subDef": "festival." } ], "variants": ["Ïó¨Îü¨ Î∏åÎûúÎìúÏùò ÎåÄÎßà ÏùåÎ£åÎ•º ÎßàÏÖî Î≥º Ïàò ÏûàÎäî Ï∂ïÏ†úÍ∞Ä", "Ïó¨Îü¨ Î∏åÎûúÎìúÏùò ÎåÄÎßà ÏùåÎ£åÎ•º ÎßàÏÖî Î≥º Ïàò ÏûàÎäî Ï∂ïÏ†ú"], "examples": [ { "kor": "Ï†ÄÎäî Ïó¨Îü¨ ÎÇòÎùºÏóê Í∞ÄÍ≥† Ïã∂Ïñ¥Ïöî.", "eng": "I want to go to various countries." }, { "kor": "ÌïúÍµ≠ ÏùåÏãùÏùÑ Î®πÏñ¥ Î≥º Ïàò ÏûàÏñ¥Ïöî.", "eng": "You can try eating Korean food." }, { "kor": "Ï†ÄÍ∏∞ Í∞ÄÎäî ÏÇ¨ÎûåÏù¥ Ï†ú ÏπúÍµ¨ÏòàÏöî.", "eng": "The person going over there is my friend." }, { "kor": "Ïò§Îäò ÌïôÍµêÏóêÏÑú Ï∂ïÏ†úÎ•º Ìï¥Ïöî.", "eng": "There is a festival at school today." } ] },
                    { "term": "Ïó¥Î¶¨Í∏∞ÎèÑ ÌïòÍ≥†", "mainDef": "it is also held (and...)", "subDefs": [ { "subTerm": "‚Ä¢ Ï∂ïÏ†úÍ∞Ä Ïó¥Î¶¨Îã§", "subDef": "a festival is held." }, { "subTerm": "‚Ä¢ -Í∏∞ÎèÑ ÌïòÎã§", "subDef": "to also (do something); sometimes (do something).\n(e.g., Ïó¥Î¶¨Í∏∞ÎèÑ ÌïòÍ≥† - it is also held, and...)" } ], "variants": ["Ïó¥Î¶¨Í∏∞ÎèÑ ÌïòÍ≥†"], "examples": [ { "kor": "Î¥ÑÏóê ÍΩÉ Ï∂ïÏ†úÍ∞Ä Ïó¥Î†§Ïöî.", "eng": "A flower festival is held in the spring." }, { "kor": "Ï£ºÎßêÏóê ÏòÅÌôîÎ•º Î≥¥Í∏∞ÎèÑ Ìï¥Ïöî.", "eng": "I sometimes watch movies on the weekend." } ] },
                    { "term": "ÏâΩÍ≤å Íµ¨Îß§Ìï† Ïàò ÏûàÎã§ÎäîÎç∞", "mainDef": "they say you can easily purchase it (and...)", "subDefs": [ { "subTerm": "‚Ä¢ ÏâΩÍ≤å", "subDef": "easily." }, { "subTerm": "‚Ä¢ Íµ¨Îß§ÌïòÎã§", "subDef": "to purchase." }, { "subTerm": "‚Ä¢ -ÎäîÎç∞", "subDef": "grammar ending used to report something heard ('they say...'). Contraction of -Îã§Í≥† ÌïòÎäîÎç∞." } ], "variants": ["ÏâΩÍ≤å Íµ¨Îß§Ìï† Ïàò ÏûàÎã§ÎäîÎç∞"], "examples": [ { "kor": "Ïù¥ Î¨∏Ï†úÎäî Ïâ¨ÏõåÏöî. ÏâΩÍ≤å ÌíÄ Ïàò ÏûàÏñ¥Ïöî.", "eng": "This problem is easy. I can solve it easily." }, { "kor": "Í∞ÄÎ∞©ÏùÑ Íµ¨Îß§ÌñàÏñ¥Ïöî.", "eng": "I purchased a bag." }, { "kor": "Í∑∏ ÏãùÎãπ ÎßõÏûàÎäîÎç∞...", "eng": "That restaurant is delicious..." } ] },
                    { "term": "Í∞ÄÏû• ÌÅ∞ Ïù¥Ïú†", "mainDef": "the biggest reason.", "subDefs": [ { "subTerm": "‚Ä¢ Í∞ÄÏû•", "subDef": "the most; -est (superlative)." }, { "subTerm": "‚Ä¢ Ïù¥Ïú†", "subDef": "reason." } ], "variants": ["Í∞ÄÏû• ÌÅ∞ Ïù¥Ïú†Îäî", "Í∞ÄÏû• ÌÅ∞ Ïù¥Ïú†"], "examples": [ { "kor": "Ïù¥Í≤ÉÏù¥ Í∞ÄÏû• Ï¢ãÏïÑÏöî.", "eng": "This is the best." }, { "kor": "ÌïôÍµêÏóê Îä¶ÏùÄ Ïù¥Ïú†Í∞Ä Î≠êÏòàÏöî?", "eng": "What is the reason you are late for school?" } ] },
                    { "term": "Ïà†ÏùÑ ÎåÄÌïòÎäî MZÏÑ∏ÎåÄÏùò ÌÉúÎèÑ", "mainDef": "the attitude of Gen Z towards alcohol.", "subDefs": [ { "subTerm": "‚Ä¢ MZÏÑ∏ÎåÄ", "subDef": "Gen Z (MZ Generation)." }, { "subTerm": "‚Ä¢ (ÏùÑ/Î•º) ÎåÄÌïòÎäî ÌÉúÎèÑ", "subDef": "attitude towards (something/someone)." } ], "variants": ["Ïà†ÏùÑ ÎåÄÌïòÎäî MZÏÑ∏ÎåÄÏùò ÌÉúÎèÑÍ∞Ä", "Ïà†ÏùÑ ÎåÄÌïòÎäî MZÏÑ∏ÎåÄÏùò ÌÉúÎèÑ"], "examples": [ { "kor": "MZÏÑ∏ÎåÄÎäî Ï†äÏùÄ ÏÇ¨ÎûåÎì§Ïù¥ÏóêÏöî.", "eng": "Gen Z are young people." }, { "kor": "ÏπúÍµ¨Î•º ÎåÄÌïòÎäî ÌÉúÎèÑÍ∞Ä Ï¢ãÏïÑÏöî.", "eng": "His/her attitude towards friends is good." } ] },
                    { "term": "Î≥ÄÌñàÍ∏∞ ÎïåÎ¨∏Ïù¥ÎùºÎäîÎç∞Ïöî.", "mainDef": "they say it's because it has changed.", "subDefs": [ { "subTerm": "‚Ä¢ ÌÉúÎèÑÍ∞Ä Î≥ÄÌïòÎã§", "subDef": "attitude changes." }, { "subTerm": "‚Ä¢ -Í∏∞ ÎïåÎ¨∏Ïù¥ÎùºÎäîÎç∞Ïöî", "subDef": "Combination of '-Í∏∞ ÎïåÎ¨∏Ïóê' (because) + '-(Ïù¥)ÎùºÍ≥† ÌïòÎã§' (they say) + '-ÎäîÎç∞Ïöî' (background info).\n(e.g., ...Î≥ÄÌñàÍ∏∞ ÎïåÎ¨∏Ïù¥ÎùºÎäîÎç∞Ïöî - ...they say it's because it has changed.)" } ], "variants": ["Î≥ÄÌñàÍ∏∞ ÎïåÎ¨∏Ïù¥ÎùºÎäîÎç∞Ïöî"], "examples": [ { "kor": "Í∑∏ ÏÇ¨ÎûåÏù¥ ÏπúÏ†àÌïòÍ≤å Î≥ÄÌñàÏñ¥Ïöî.", "eng": "That person's attitude changed to be kind." }, { "kor": "Ïò§Îäò Ï∂•Í∏∞ ÎïåÎ¨∏Ïù¥ÎùºÎäîÎç∞Ïöî.", "eng": "They say it's because it's cold today." } ] },
                    { "term": "Ïã§Ï†úÎ°ú", "mainDef": "actually; in reality.", "subDefs": [], "variants": ["Ïã§Ï†úÎ°ú"], "examples": [ { "kor": "Í∑∏Îäî Ïã§Ï†úÎ°ú ÌÇ§Í∞Ä Ïª§Ïöî.", "eng": "He is actually tall." } ] },
                    { "term": "18ÏÑ∏ÏóêÏÑú 34ÏÑ∏Ïùò ÏùåÏ£ºÏú® Î≥ÄÌôîÍ∞Ä Í∞ÄÏû• ÌÅ¨Í∏∞ÎèÑ ÌïúÎç∞,", "mainDef": "the change in the drinking rate for 18-34 year olds is also the largest, and...", "subDefs": [ { "subTerm": "‚Ä¢ ÏùåÏ£ºÏú®", "subDef": "drinking rate." }, { "subTerm": "‚Ä¢ Î≥ÄÌôî", "subDef": "change." }, { "subTerm": "‚Ä¢ -Í∏∞ÎèÑ ÌïòÎã§", "subDef": "to also (be something)." }, { "subTerm": "‚Ä¢ -„Ñ¥/ÏùÄÎç∞", "subDef": "grammar ending providing background context ('...and...' or '...but...')." } ], "variants": ["18ÏÑ∏ÏóêÏÑú 34ÏÑ∏Ïùò ÏùåÏ£ºÏú® Î≥ÄÌôîÍ∞Ä Í∞ÄÏû• ÌÅ¨Í∏∞ÎèÑ ÌïúÎç∞"], "examples": [ { "kor": "Ïù¥ ÎÇòÎùºÏùò ÏùåÏ£ºÏú®Ïù¥ ÎÜíÏïÑÏöî.", "eng": "This country's drinking rate is high." }, { "kor": "ÎÇ†Ïî®Ïùò Î≥ÄÌôîÍ∞Ä Ïã¨Ìï¥Ïöî.", "eng": "The change in weather is severe." }, { "kor": "Ï†ÄÎäî Í∞ÄÎÅî Ïö∏Í∏∞ÎèÑ Ìï¥Ïöî.", "eng": "I also cry sometimes." }, { "kor": "Ïù¥ Ïò∑ÏùÄ ÏòàÏÅúÎç∞, Ï¢Ä ÎπÑÏã∏Ïöî.", "eng": "These clothes are pretty, but a bit expensive." } ] },
                    { "term": "ÎØ∏Íµ≠ÎøêÎßå ÏïÑÎãàÎùº Ï†Ñ ÏÑ∏Í≥ÑÏ†ÅÏúºÎ°ú", "mainDef": "not only in the US, but also globally.", "subDefs": [ { "subTerm": "‚Ä¢ -ÎøêÎßå ÏïÑÎãàÎùº", "subDef": "not only... but also..." }, { "subTerm": "‚Ä¢ Ï†Ñ ÏÑ∏Í≥ÑÏ†ÅÏúºÎ°ú", "subDef": "globally; worldwide." } ], "variants": ["ÎØ∏Íµ≠ÎøêÎßå ÏïÑÎãàÎùº Ï†Ñ ÏÑ∏Í≥ÑÏ†ÅÏúºÎ°ú"], "examples": [ { "kor": "ÏÇ¨Í≥ºÎøêÎßå ÏïÑÎãàÎùº Î∞îÎÇòÎÇòÎèÑ Ï¢ãÏïÑÌï¥Ïöî.", "eng": "I like not only apples but also bananas." }, { "kor": "BTSÎäî Ï†Ñ ÏÑ∏Í≥ÑÏ†ÅÏúºÎ°ú Ïú†Î™ÖÌï¥Ïöî.", "eng": "BTS is famous worldwide." } ] },
                    { "term": "Í±¥Í∞ïÏùÑ Ï§ëÏöîÌïòÍ≤å ÏÉùÍ∞ÅÌïòÎäî Í≤å", "mainDef": "thinking of health as important (is)...", "subDefs": [ { "subTerm": "‚Ä¢ Í±¥Í∞ï", "subDef": "health." }, { "subTerm": "‚Ä¢ Ï§ëÏöîÌïòÍ≤å ÏÉùÍ∞ÅÌïòÎã§", "subDef": "to think of (something) as important." }, { "subTerm": "‚Ä¢ -Îäî Í≤å", "subDef": "the act of... (colloial form of -Îäî Í≤ÉÏù¥).\n(e.g., ...ÏÉùÍ∞ÅÌïòÎäî Í≤å Ìä∏Î†åÎìúÍ∞Ä ÎêòÎãà - ...thinking (of it as important) became a trend, so...)" } ], "variants": ["Í±¥Í∞ïÏùÑ Ï§ëÏöîÌïòÍ≤å ÏÉùÍ∞ÅÌïòÎäî Í≤å"], "examples": [ { "kor": "Í±¥Í∞ïÏù¥ Ï§ëÏöîÌï¥Ïöî.", "eng": "Health is important." }, { "kor": "Ï†ÄÎäî Í∞ÄÏ°±ÏùÑ Ï§ëÏöîÌïòÍ≤å ÏÉùÍ∞ÅÌï¥Ïöî.", "eng": "I think of my family as important." }, { "kor": "Îß§Ïùº Ïö¥ÎèôÌïòÎäî Í≤å Ï¢ãÏïÑÏöî.", "eng": "Exercising every day is good." } ] },
                    { "term": "Ìä∏Î†åÎìúÍ∞Ä ÎêòÎãà", "mainDef": "since it became a trend...", "subDefs": [ { "subTerm": "‚Ä¢ Ìä∏Î†åÎìú", "subDef": "trend." }, { "subTerm": "‚Ä¢ -Îãà", "subDef": "grammar ending indicating reason ('because' or 'since')." } ], "variants": ["Ìä∏Î†åÎìúÍ∞Ä ÎêòÎãà"], "examples": [ { "kor": "ÏöîÏ¶ò Ìä∏Î†åÎìúÏòàÏöî.", "eng": "It's the trend these days." }, { "kor": "Î∞∞Í∞Ä Í≥†ÌîÑÎãà, Î∞•ÏùÑ Î®πÏñ¥Ïöî.", "eng": "I'm hungry, so I'm eating." } ] },
                    { "term": "Ïà†ÏùÑ Î©ÄÎ¶¨ÌïòÎäî ÎßàÏùåÍπåÏßÄ Ïù¥Ïñ¥ÏßÄÍ≤å Îêú Í≤É", "mainDef": "it led to the mindset of avoiding alcohol.", "subDefs": [ { "subTerm": "‚Ä¢ Î©ÄÎ¶¨ÌïòÎã§", "subDef": "to avoid; to keep at a distance." }, { "subTerm": "‚Ä¢ -Îäî", "subDef": "modifier describing the following noun ('mindset of avoiding...')." }, { "subTerm": "‚Ä¢ ÎßàÏùåÏù¥ Ïù¥Ïñ¥ÏßÄÎã§", "subDef": "a feeling/mindset is connected to; leads to." }, { "subTerm": "‚Ä¢ -Îäî Í≤É", "subDef": "the act of...; the fact that... (nominalization)." } ], "variants": ["Ïà†ÏùÑ Î©ÄÎ¶¨ÌïòÎäî ÎßàÏùåÍπåÏßÄ Ïù¥Ïñ¥ÏßÄÍ≤å Îêú Í≤É"], "examples": [ { "kor": "ÎÇòÏÅú ÏπúÍµ¨Îäî Î©ÄÎ¶¨ÌïòÏÑ∏Ïöî.", "eng": "Stay away from bad friends." }, { "kor": "ÏßÄÍ∏à ÏùΩÎäî Ï±ÖÏù¥ Ïû¨ÎØ∏ÏûàÏñ¥Ïöî.", "eng": "The book I am reading now is fun." }, { "kor": "Îëê ÏÇ¨ÎûåÏùò ÎßàÏùåÏù¥ Ïù¥Ïñ¥Ï°åÏñ¥Ïöî.", "eng": "The two people's hearts connected." }, { "kor": "ÎÖ∏ÎûòÌïòÎäî Í≤ÉÏùÑ Ï¢ãÏïÑÌï¥Ïöî.", "eng": "I like singing." } ] },
                    { "term": "Ïà†Ïù¥ Í±¥Í∞ïÏóê Ïïà Ï¢ãÏúºÎãàÍπå", "mainDef": "because alcohol is not good for health...", "subDefs": [ { "subTerm": "‚Ä¢ Í±¥Í∞ï", "subDef": "health." }, { "subTerm": "‚Ä¢ -ÎãàÍπå", "subDef": "grammar ending indicating a strong reason ('because...')." } ], "variants": ["Ïà†Ïù¥ Í±¥Í∞ïÏóê Ïïà Ï¢ãÏúºÎãàÍπå"], "examples": [ { "kor": "Í±¥Í∞ïÏùÑ ÏúÑÌï¥ Ïö¥ÎèôÌï¥Ïöî.", "eng": "I exercise for health." }, { "kor": "ÎÇ†Ïî®Í∞Ä Ï¢ãÏúºÎãàÍπå, Í≥µÏõêÏóê Í∞ÄÏöî.", "eng": "The weather is nice, so let's go to the park." } ] },
                    { "term": "Ïà† ÎåÄÏã†", "mainDef": "instead of alcohol.", "subDefs": [ { "subTerm": "‚Ä¢ ÎåÄÏã†", "subDef": "instead of; in place of." } ], "variants": ["Ïà† ÎåÄÏã†"], "examples": [ { "kor": "Î∞• ÎåÄÏã† ÎπµÏùÑ Î®πÏóàÏñ¥Ïöî.", "eng": "I ate bread instead of rice." } ] },
                    { "term": "Ïù¥Í≤å ÎåÄÏ≤¥ Ïñ¥ÎñªÍ≤å ÎÇòÏò® ÏÉùÍ∞ÅÏù¥Ï£†?", "mainDef": "How on earth did this idea come about?", "subDefs": [ { "subTerm": "‚Ä¢ Ïù¥Í≤å ÎåÄÏ≤¥", "subDef": "this, on earth... (adds emphasis)." }, { "subTerm": "‚Ä¢ ÏÉùÍ∞ÅÏù¥ ÎÇòÏò§Îã§", "subDef": "an idea comes out/appears." } ], "variants": ["Ïù¥Í≤å ÎåÄÏ≤¥ Ïñ¥ÎñªÍ≤å ÎÇòÏò® ÏÉùÍ∞ÅÏù¥Ï£†"], "examples": [ { "kor": "Ïù¥Í≤å ÎåÄÏ≤¥ Î≠êÏòàÏöî?", "eng": "What on earth is this?" }, { "kor": "Ï¢ãÏùÄ ÏÉùÍ∞ÅÏù¥ ÎÇòÏôîÏñ¥Ïöî.", "eng": "A good idea came up." } ] },
                    { "term": "Ïà†ÏùÄ ÎÑàÎ¨¥ Ïó≠ÏÇ¨Í∞Ä ÍπäÏûñÏïÑÏöî", "mainDef": "Alcohol has a very deep history, you know.", "subDefs": [ { "subTerm": "‚Ä¢ Ïó≠ÏÇ¨", "subDef": "history." }, { "subTerm": "‚Ä¢ ÍπäÎã§", "subDef": "to be deep." }, { "subTerm": "‚Ä¢ -ÏûñÏïÑÏöî", "subDef": "grammar ending used to state something the listener should already know ('...you know')." } ], "variants": ["Ïà†ÏùÄ ÎÑàÎ¨¥ Ïó≠ÏÇ¨Í∞Ä ÍπäÏûñÏïÑÏöî"], "examples": [ { "kor": "Ïó≠ÏÇ¨ Í≥µÎ∂ÄÎäî Ïû¨ÎØ∏ÏûàÏñ¥Ïöî.", "eng": "Studying history is fun." }, { "kor": "Ïù¥ Ìò∏ÏàòÎäî Î¨ºÏù¥ ÍπäÏñ¥Ïöî.", "eng": "This lake is deep." }, { "kor": "Ïò§Îäò ÏùºÏöîÏùºÏù¥ÏûñÏïÑÏöî.", "eng": "It's Sunday today, you know." } ] },
                    { "term": "Í±¥Í∞ïÏóê Ìï¥Î°≠Îã§Îäî Í≤å", "mainDef": "the fact that it's harmful to health...", "subDefs": [ { "subTerm": "‚Ä¢ Í±¥Í∞ï", "subDef": "health." }, { "subTerm": "‚Ä¢ Ìï¥Î°≠Îã§", "subDef": "to be harmful." }, { "subTerm": "‚Ä¢ -Îäî Í≤å", "subDef": "the fact that... (colloial form of -Îäî Í≤ÉÏù¥)." } ], "variants": ["Í±¥Í∞ïÏóê Ìï¥Î°≠Îã§Îäî Í≤å"], "examples": [ { "kor": "Í±¥Í∞ïÏù¥ ÏµúÍ≥†ÏòàÏöî.", "eng": "Health is the best." }, { "kor": "Îã¥Î∞∞Îäî Î™∏Ïóê Ìï¥Î°úÏõåÏöî.", "eng": "Smoking is harmful to the body." }, { "kor": "Í≥µÎ∂ÄÌïòÎäî Í≤å Ï§ëÏöîÌï¥Ïöî.", "eng": "Studying is important." } ] },
                    { "term": "ÏùòÌïôÏù¥ Î∞úÎã¨ÏùÑ ÌïòÎ©¥ÏÑú", "mainDef": "as medicine developed...", "subDefs": [ { "subTerm": "‚Ä¢ ÏùòÌïô", "subDef": "medicine (the field of study)." }, { "subTerm": "‚Ä¢ Î∞úÎã¨ÌïòÎã§", "subDef": "to develop." }, { "subTerm": "‚Ä¢ -(Ïúº)Î©¥ÏÑú", "subDef": "grammar ending indicating simultaneous action ('while') or a change over time ('as')." } ], "variants": ["ÏùòÌïôÏù¥ Î∞úÎã¨ÏùÑ ÌïòÎ©¥ÏÑú"], "examples": [ { "kor": "Í∑∏Îäî ÏùòÌïôÏùÑ Í≥µÎ∂ÄÌï¥Ïöî.", "eng": "He studies medicine." }, { "kor": "ÎèÑÏãúÍ∞Ä ÎßéÏù¥ Î∞úÎã¨ÌñàÏñ¥Ïöî.", "eng": "The city has developed a lot." }, { "kor": "ÏùåÏïÖÏùÑ Îì§ÏúºÎ©¥ÏÑú ÏàôÏ†úÌï¥Ïöî.", "eng": "I do homework while listening to music." } ] },
                    { "term": "Í∞ÑÏóê Ìï¥Î°≠Í≥† ÏàôÏ∑®Í∞Ä ÏûàÍ≥†", "mainDef": "it's harmful to the liver and there's a hangover...", "subDefs": [ { "subTerm": "‚Ä¢ Í∞Ñ", "subDef": "liver." }, { "subTerm": "‚Ä¢ Ìï¥Î°≠Îã§", "subDef": "to be harmful." }, { "subTerm": "‚Ä¢ ÏàôÏ∑®Í∞Ä ÏûàÎã§", "subDef": "to have a hangover." } ], "variants": ["Í∞ÑÏóê Ìï¥Î°≠Í≥† ÏàôÏ∑®Í∞Ä ÏûàÍ≥†"], "examples": [ { "kor": "Í∞ÑÏùÄ Ï§ëÏöîÌï¥Ïöî.", "eng": "The liver is important." }, { "kor": "Ïù¥Í≤ÉÏùÄ Î™∏Ïóê Ìï¥Î°úÏõåÏöî.", "eng": "This is bad for the body." }, { "kor": "Ïñ¥Ï†ú Ïà†ÏùÑ ÎßàÏÖîÏÑú ÏàôÏ∑®Í∞Ä ÏûàÏñ¥Ïöî.", "eng": "I have a hangover because I drank yesterday." } ] },
                    { "term": "Ïù¥Îü∞ Í±∏ ÏïåÍ≤å Îêú Í±∞Í≥†", "mainDef": "we came to know this (and...)", "subDefs": [ { "subTerm": "‚Ä¢ Ïù¥Îü∞ Í±∏", "subDef": "this kind of thing (colloial)." }, { "subTerm": "‚Ä¢ ÏïåÍ≤å ÎêòÎã§", "subDef": "to come to know; to find out." }, { "subTerm": "‚Ä¢ -„Ñ¥/ÏùÄ Í±∞Í≥†", "subDef": "colloial ending stating a fact or situation ('it's that... and...')." } ], "variants": ["Ïù¥Îü∞ Í±∏ ÏïåÍ≤å Îêú Í±∞Í≥†"], "examples": [ { "kor": "Ï†ÄÎäî Ïù¥Îü∞ Í±∏ Ï¢ãÏïÑÌï¥Ïöî.", "eng": "I like this kind of thing." }, { "kor": "Í∑∏Ïùò ÎπÑÎ∞ÄÏùÑ ÏïåÍ≤å ÎêêÏñ¥Ïöî.", "eng": "I came to know his secret." }, { "kor": "Í∑∏ÎÉ• ÏπúÍµ¨Ïù∏ Í±∞Í≥†, Ïï†Ïù∏ÏùÄ ÏïÑÎãàÏóêÏöî.", "eng": "We're just friends, not lovers." } ] },
                    { "term": "Ïö∞Ïö∏Ï¶ù ÏïΩÏúºÎ°úÎèÑ ÏπòÎ£åÎ•º ÌïòÎäî Í±∞Í≥†", "mainDef": "it's also used to treat depression (and...)", "subDefs": [ { "subTerm": "‚Ä¢ Ïö∞Ïö∏Ï¶ù ÏïΩ", "subDef": "depression medicine." }, { "subTerm": "‚Ä¢ -ÏúºÎ°ú ÏπòÎ£åÌïòÎã§", "subDef": "to treat with..." }, { "subTerm": "‚Ä¢ -Îäî Í±∞Í≥†", "subDef": "colloial ending stating a fact or situation ('it's that... and...')." } ], "variants": ["Ïö∞Ïö∏Ï¶ù ÏïΩÏúºÎ°úÎèÑ ÏπòÎ£åÎ•º ÌïòÎäî Í±∞Í≥†"], "examples": [ { "kor": "Í∑∏Îäî Ïö∞Ïö∏Ï¶ù ÏïΩÏùÑ Î®πÏñ¥Ïöî.", "eng": "He takes depression medicine." }, { "kor": "Ïù¥ Î≥ëÏùÄ ÏïΩÏúºÎ°ú ÏπòÎ£åÌï¥Ïöî.", "eng": "This disease is treated with medicine." }, { "kor": "Ïù¥Í±¥ Î®πÎäî Í±∞Í≥†, Ï†ÄÍ±¥ ÎßàÏãúÎäî Í±∞ÏòàÏöî.", "eng": "This is for eating, and that is for drinking." } ] },
                    { "term": "Ï†ïÏã† ÏïàÏ†ïÏóê ÎèÑÏõÄÏù¥ ÎêòÍ≥†", "mainDef": "it helps with mental stability (and...)", "subDefs": [ { "subTerm": "‚Ä¢ Ï†ïÏã† ÏïàÏ†ï", "subDef": "mental stability." }, { "subTerm": "‚Ä¢ ÎèÑÏõÄÏù¥ ÎêòÎã§", "subDef": "to be helpful; to help." } ], "variants": ["Ï†ïÏã† ÏïàÏ†ïÏóê ÎèÑÏõÄÏù¥ ÎêòÍ≥†"], "examples": [ { "kor": "ÏùåÏïÖÏùÄ Ï†ïÏã† ÏïàÏ†ïÏóê Ï¢ãÏïÑÏöî.", "eng": "Music is good for mental stability." }, { "kor": "Ïù¥ Ï±ÖÏùÄ Í≥µÎ∂ÄÏóê ÎèÑÏõÄÏù¥ ÎèºÏöî.", "eng": "This book is helpful for studying." } ] },
                    { "term": "Ïù¥Îü∞ ÏñòÍ∏∞ÎèÑ ÎßéÎã® ÎßêÏù¥ÏóêÏöî", "mainDef": "there's a lot of talk like this, you see.", "subDefs": [ { "subTerm": "‚Ä¢ Ïù¥Îü∞ ÏñòÍ∏∞", "subDef": "this kind of talk/story." }, { "subTerm": "‚Ä¢ -„Ñ¥/ÏùÄ/Îã® ÎßêÏù¥ÏóêÏöî", "subDef": "grammar ending used to emphasize or re-state a fact ('I'm saying...'; '...you see')." } ], "variants": ["Ïù¥Îü∞ ÏñòÍ∏∞ÎèÑ ÎßéÎã® ÎßêÏù¥ÏóêÏöî"], "examples": [ { "kor": "Ïù¥Îü∞ ÏñòÍ∏∞Îäî Ïû¨ÎØ∏ÏóÜÏñ¥Ïöî.", "eng": "This kind of story is not fun." }, { "kor": "Ï†ÄÎäî ÌïôÏÉùÏù¥ÎûÄ ÎßêÏù¥ÏóêÏöî.", "eng": "I'm telling you I'm a student." } ] }
                ];
                const sentences = [
                    { id: 1, parts: ["ÏöîÏ¶ò ÎØ∏Íµ≠ ÏÇ¨ÎûåÎì§ÏùÄ Ïà† ÎåÄÏã† '", "' ÏùåÎ£åÎ•º ÎßàÏã†Îã§Í≥† Ìï¥Ïöî."], answer: "ÎåÄÎßà", bank: ["ÎåÄÎßà", "Ïª§Ìîº", "ÏóêÎÑàÏßÄ", "ÎßàÏ∞®"], eng_parts: ["People in the US are reportedly drinking '", "' beverages instead of alcohol these days."], eng_answer: "cannabis", eng_hint: "The main topic of the news report.", eng_explanation: "Correct. The script introduces 'ÎåÄÎßà ÏùåÎ£å' (cannabis drinks) as the beverage replacing alcohol.", eng_wrongAnswerExplanations: { "Ïª§Ìîº": "Coffee is not mentioned as the replacement.", "ÏóêÎÑàÏßÄ": "Energy drinks are not mentioned.", "ÎßàÏ∞®": "Matcha is not mentioned." } },
                    { id: 2, parts: ["ÎåÄÎßà ÏùåÎ£åÎûÄ THCÎ•º '", "' ÎßåÎì† ÏùåÎ£åÏòàÏöî."], answer: "Ï≤®Í∞ÄÌïòÏó¨", bank: ["Ï≤®Í∞ÄÌïòÏó¨", "Ï∞∏Í∞ÄÌïòÏó¨", "ÏÇ¨ÏÑú", "ÎπºÏÑú"], eng_parts: ["Cannabis drinks are beverages made by '", "' THC."], eng_answer: "adding", eng_hint: "Verb (ending in -ÏïÑ/Ïñ¥ÏÑú) meaning 'to add' or 'to include'.", eng_explanation: "Correct. 'Ï≤®Í∞ÄÌïòÏó¨' means 'by adding'. The script says the drinks are made by adding THC. The '-ÏïÑ/Ïñ¥ÏÑú' indicates the method.", eng_wrongAnswerExplanations: { "Ï∞∏Í∞ÄÌïòÏó¨": "This means 'by participating' and sounds similar but is incorrect.", "ÏÇ¨ÏÑú": "This means 'by buying'.", "ÎπºÏÑú": "This means 'by removing' or 'by subtracting', which is the opposite." } },
                    { id: 3, parts: ["ÎåÄÎßà ÏùåÎ£å ÏãúÏû•Ïù¥ Ïª§ÏßÑ Í∞ÄÏû• ÌÅ∞ Ïù¥Ïú†Îäî MZÏÑ∏ÎåÄÏùò Ïà†ÏùÑ ÎåÄÌïòÎäî '", "'Í∞Ä Î≥ÄÌñàÍ∏∞ ÎïåÎ¨∏Ïù¥ÏóêÏöî."], answer: "ÌÉúÎèÑ", bank: ["ÌÉúÎèÑ", "ÎåÄÌôî", "Î≤ï", "Í±¥Í∞ï"], eng_parts: ["The biggest reason the cannabis drink market has grown is because the '", "' of the MZ generation toward alcohol has changed."], eng_answer: "attitude", eng_hint: "A noun meaning 'attitude' or 'stance'.", eng_explanation: "Correct. The script says the biggest reason is the change in 'ÌÉúÎèÑ' (attitude) of the MZ generation.", eng_wrongAnswerExplanations: { "ÎåÄÌôî": "This means 'conversation'.", "Î≤ï": "This means 'law'.", "Í±¥Í∞ï": "Health is a related trend, but 'attitude' is the specific word used." } },
                    { id: 4, parts: ["Ïà†ÏùÄ Ïó≠ÏÇ¨Í∞Ä ÍπäÏßÄÎßå, ÏùòÌïôÏù¥ Î∞úÎã¨ÌïòÎ©¥ÏÑú '", "' Î∞ùÌòÄÏ°åÏñ¥Ïöî."], answer: "Í±¥Í∞ïÏóê Ìï¥Î°≠Îã§Îäî Í≤å", bank: ["Í±¥Í∞ïÏóê Ìï¥Î°≠Îã§Îäî Í≤å", "Ï†ïÏã† ÏïàÏ†ïÏóê Ï¢ãÎã§Îäî Í≤å", "ÏàôÏ∑®Í∞Ä ÏóÜÎã§Îäî Í≤å", "Ïö∞Ïö∏Ï¶ùÏóê Ï¢ãÎã§Îäî Í≤å"], eng_parts: ["Alcohol has a long history, but as medicine developed, it was revealed '", "'."], eng_answer: "that it is harmful to health", eng_hint: "The negative effect of alcohol mentioned by Speaker 2.", eng_explanation: "Correct. Speaker 2 explains that 'Í±¥Í∞ïÏóê Ìï¥Î°≠Îã§Îäî Í≤å' (that it is harmful to health) was discovered as medicine advanced.", eng_wrongAnswerExplanations: { "Ï†ïÏã† ÏïàÏ†ïÏóê Ï¢ãÎã§Îäî Í≤å": "This was said about cannabis, not alcohol.", "ÏàôÏ∑®Í∞Ä ÏóÜÎã§Îäî Í≤å": "This is incorrect; hangovers are a known harm of alcohol.", "Ïö∞Ïö∏Ï¶ùÏóê Ï¢ãÎã§Îäî Í≤å": "This was said about cannabis, not alcohol." } },
                    { id: 5, parts: ["Í±¥Í∞ïÏùÑ Ï§ëÏöîÌïòÍ≤å ÏÉùÍ∞ÅÌïòÎäî Í≤å Ìä∏Î†åÎìúÍ∞Ä ÎèºÏÑú ÏÇ¨ÎûåÎì§Ïù¥ Ïà†ÏùÑ '", "'."], answer: "Î©ÄÎ¶¨ÌïúÎã§Í≥† Ìï¥Ïöî", bank: ["Î©ÄÎ¶¨ÌïúÎã§Í≥† Ìï¥Ïöî", "Ï¢ãÏïÑÌïúÎã§Í≥† Ìï¥Ïöî", "Í∞ÄÍπåÏù¥ÌïúÎã§Í≥† Ìï¥Ïöî", "ÏÇ∞Îã§Í≥† Ìï¥Ïöî"], eng_parts: ["Because prioritizing health has become a trend, people are '", "' alcohol."], eng_answer: "reportedly staying away from", eng_hint: "A verb phrase meaning 'to keep a distance from' or 'to avoid'.", eng_explanation: "Correct. 'Î©ÄÎ¶¨ÌïúÎã§Í≥† Ìï¥Ïöî' means 'they say people are staying away from'. This is the result of the health trend.", eng_wrongAnswerExplanations: { "Ï¢ãÏïÑÌïúÎã§Í≥† Ìï¥Ïöî": "This means 'reportedly like', which is the opposite.", "Í∞ÄÍπåÏù¥ÌïúÎã§Í≥† Ìï¥Ïöî": "This means 'reportedly stay close to', which is the opposite.", "ÏÇ∞Îã§Í≥† Ìï¥Ïöî": "This means 'reportedly buy', which is not the main point." } },
                    { id: 6, parts: ["Î∞òÎ©¥Ïóê, ÎåÄÎßàÎäî '", "'Ïóê ÎèÑÏõÄÏù¥ ÎêúÎã§Í≥† Ìï¥Ïöî."], answer: "Ï†ïÏã† ÏïàÏ†ï", bank: ["Ï†ïÏã† ÏïàÏ†ï", "ÏßëÏ§ëÎ†•", "Ïö¥Îèô", "Ï†ïÏã†Î≥ë"], eng_parts: ["On the other hand, cannabis reportedly helps with '", "'."], eng_answer: "mental stability", eng_hint: "A positive effect on the mind mentioned by Speaker 2.", eng_explanation: "Correct. Speaker 2 says there are many stories about cannabis helping with 'Ï†ïÏã† ÏïàÏ†ï' (mental stability).", eng_wrongAnswerExplanations: { "ÏßëÏ§ëÎ†•": "This means 'concentration' and was not mentioned.", "Ïö¥Îèô": "This means 'exercise' and was not mentioned.", "Ï†ïÏã†Î≥ë": "This means 'mental illness', which is the opposite of what was said." } },
                    { id: 7, parts: ["ÎåÄÎßàÎäî Ïö∞Ïö∏Ï¶ùÏùÑ '", "' ÏïΩÏúºÎ°ú ÏÇ¨Ïö©Ìï¥Ïöî."], answer: "ÏπòÎ£åÌïòÎäî", bank: ["ÏπòÎ£åÌïòÎäî", "ÎßåÎìúÎäî", "Î®πÎäî", "ÎßàÏãúÎäî"], eng_parts: ["Cannabis is used as medicine that '", "' depression."], eng_answer: "treats", eng_hint: "Present tense modifier of 'ÏπòÎ£åÌïòÎã§' (to treat/cure an illness).", eng_explanation: "Correct. 'ÏπòÎ£åÌïòÎäî' is the modifier form of 'ÏπòÎ£åÌïòÎã§' (to treat). The script says it's used as a 'Ïö∞Ïö∏Ï¶ù ÏïΩ' (depression medicine).", eng_wrongAnswerExplanations: { "ÎßåÎìúÎäî": "This means 'makes' or 'causes', which is the opposite.", "Î®πÎäî": "This means 'eating', which is not the purpose of the medicine itself.", "ÎßàÏãúÎäî": "This means 'drinking'. While the topic is drinks, the verb for medicine's function is 'to treat'." } },
                    { id: 8, parts: ["ÌïòÏßÄÎßå '", "' ÎåÄÎßà ÏùåÎ£åÍ∞Ä Í±¥Í∞ïÏóê Ï¢ãÏùÑÍπåÏöî?"], answer: "Ïã§Ï†úÎ°ú", bank: ["Ïã§Ï†úÎ°ú", "Í∞ÄÏßúÎ°ú", "Ïö∞Ïó∞Ìûà", "ÎåÄÏ∂©"], eng_parts: ["But are cannabis drinks '", "' healthy?"], eng_answer: "really", eng_hint: "An adverb meaning 'really', 'actually', or 'in reality'.", eng_explanation: "Correct. 'Ïã§Ï†úÎ°ú' (really/actually) is used to question if the perceived benefits are true. This reflects the news's skeptical question: 'Ïù¥Í≤å ÎåÄÏ≤¥ Ïñ¥ÎñªÍ≤å ÎÇòÏò® ÏÉùÍ∞ÅÏù¥Ï£†?'", eng_wrongAnswerExplanations: { "Í∞ÄÏßúÎ°ú": "This means 'falsely' or 'fake'.", "Ïö∞Ïó∞Ìûà": "This means 'by chance'.", "ÎåÄÏ∂©": "This means 'roughly' or 'carelessly'." } }
                ];
                const discussionQuestions = [
                    { num: 1, kor: "Ïó¨Îü¨Î∂ÑÏùò ÎÇòÎùºÏóêÏÑúÎèÑ Ï†äÏùÄ ÏÇ¨ÎûåÎì§Ïù¥ Ïà†ÏùÑ ÎßéÏù¥ Ïïà ÎßàÏÖîÏöî?", eng: "In your country, do young people also not drink much alcohol?", vocab: [ { term: "Ï†äÏùÄ ÏÇ¨ÎûåÎì§", meaning_eng: "Young people" }, { term: "Ïà†ÏùÑ ÎßéÏù¥ Ïïà ÎßàÏãúÎã§", meaning_eng: "To not drink much alcohol" } ] },
                    { num: 2, kor: "\"Ïà†Ïù¥ Í±¥Í∞ïÏóê Ïïà Ï¢ãÏúºÎãàÍπå Ïà† ÎåÄÏã† ÎåÄÎßà ÏùåÎ£åÎ•º ÎßàÏãúÏûê\"ÎùºÎäî ÏÉùÍ∞ÅÏóê ÎèôÏùòÌï¥Ïöî?", eng: "Do you agree with the idea that \"Alcohol is unhealthy, so let's drink cannabis drinks instead\"?", vocab: [ { term: "Ïà† ÎåÄÏã†", meaning_eng: "Instead of alcohol" }, { term: "Í±¥Í∞ïÏóê Ïïà Ï¢ãÎã§", meaning_eng: "Is unhealthy / bad for health" }, { term: "ÎèôÏùòÌï¥Ïöî?", meaning_eng: "Do you agree?" } ] },
                    { num: 3, kor: "ÎåÄÎßàÍ∞Ä \"Ïö∞Ïö∏Ï¶ù ÏπòÎ£å\"ÏôÄ \"Ï†ïÏã† ÏïàÏ†ï\"Ïóê ÎèÑÏõÄÏù¥ ÎêúÎã§Îäî Ï£ºÏû•Ïù¥ ÏûàÏñ¥Ïöî. Í∑∏Îü∞Îç∞ ÏùòÏÇ¨Ïùò Ï≤òÎ∞© ÏóÜÏù¥ ÎåÄÎßà ÏùåÎ£åÎ•º ÎßàÏãúÎäî Í≤ÉÏù¥ ÏïàÏ†ÑÌï†ÍπåÏöî?", eng: "There's a claim that cannabis helps with 'treating depression' and 'mental stability'. But is it safe to drink cannabis drinks without a doctor's prescription?", vocab: [ { term: "Ïö∞Ïö∏Ï¶ù ÏπòÎ£å", meaning_eng: "Treating depression" }, { term: "Ï†ïÏã† ÏïàÏ†ï", meaning_eng: "Mental stability" }, { term: "ÏùòÏÇ¨Ïùò Ï≤òÎ∞© ÏóÜÏù¥", meaning_eng: "Without a doctor's prescription" }, { term: "ÏïàÏ†ÑÌï†ÍπåÏöî?", meaning_eng: "Is it safe?" } ] },
                    { num: 4, kor: "ÎåÄÎßà ÏùåÎ£åÎèÑ Ïà†Ï≤òÎüº Í±¥Í∞ïÏóê Ìï¥Î°≠Îã§Í≥† ÏÉùÍ∞ÅÌï¥Ïöî? ÏÇ¨ÎûåÎì§Ïù¥ ÎåÄÎßà ÏùåÎ£åÎ•º Í≥ÑÏÜç ÎßàÏãúÎ©¥ 10ÎÖÑ ÌõÑÏóêÎäî Ïñ¥Îñ§ Î¨∏Ï†úÍ∞Ä ÎÇòÌÉÄÎÇ†ÍπåÏöî?", eng: "Do you think cannabis drinks are also harmful to health, like alcohol? If people keep drinking them, what problems might appear in 10 years?", vocab: [ { term: "Í±¥Í∞ïÏóê Ìï¥Î°≠Îã§", meaning_eng: "To be harmful to health" }, { term: "Í≥ÑÏÜç ÎßàÏãúÎ©¥", meaning_eng: "If (one) keeps drinking" }, { term: "Î¨∏Ï†úÍ∞Ä ÎÇòÌÉÄÎÇòÎã§", meaning_eng: "Problems appear" } ] },
                    { num: 5, kor: "MZÏÑ∏ÎåÄÍ∞Ä Ïà†ÏùÑ Î©ÄÎ¶¨ÌïòÎäî Ïù¥Ïú†Í∞Ä Ï†ïÎßê Í±¥Í∞ï ÎïåÎ¨∏ÏùºÍπåÏöî? Îã§Î•∏ Ïù¥Ïú†Í∞Ä ÏûàÏùÑÍπåÏöî?", eng: "Is health really the reason the MZ generation is staying away from alcohol? Could there be other reasons?", vocab: [ { term: "Ïà†ÏùÑ Î©ÄÎ¶¨ÌïòÎã§", meaning_eng: "To stay away from alcohol" }, { term: "Í±¥Í∞ï ÎïåÎ¨∏", meaning_eng: "Because of health" }, { term: "Îã§Î•∏ Ïù¥Ïú†", meaning_eng: "Other reasons" } ] },
                    { num: 6, kor: "Ïó¨Îü¨Î∂ÑÏùò ÎÇòÎùºÏóêÏÑú ÎåÄÎßà ÏùåÎ£åÍ∞Ä Ìï©Î≤ïÌôîÎêúÎã§Î©¥ Ï∞¨ÏÑ±Ìï† Í±∞ÏòàÏöî? Î∞òÎåÄÌï† Í±∞ÏòàÏöî?", eng: "If cannabis drinks were legalized in your country, would you agree (support) or disagree (oppose)?", vocab: [ { term: "Ìï©Î≤ïÌôîÎêòÎã§", meaning_eng: "To be legalized" }, { term: "Ï∞¨ÏÑ±ÌïòÎã§", meaning_eng: "To agree, to support" }, { term: "Î∞òÎåÄÌïòÎã§", meaning_eng: "To disagree, to oppose" } ] },
                    { num: 7, kor: "ÎåÄÎßà ÏùåÎ£å ÎßêÍ≥†, Ïñ¥Îñ§ ÏùåÎ£åÍ∞Ä ÌååÌã∞ÏóêÏÑú Ïà†ÏùÑ ÎåÄÏ≤¥Ìï† Ïàò ÏûàÏùÑÍπåÏöî? Ïñ¥Îñ§ Í≤ÉÏù¥ ÏûàÏùÑÍπåÏöî?", eng: "Besides cannabis drinks, what other beverages could replace alcohol at parties? What kinds are there?", vocab: [ { term: "... ÎßêÍ≥†", meaning_eng: "Besides..." }, { term: "ÎåÄÏ≤¥ÌïòÎã§", meaning_eng: "To replace, to substitute" }, { term: "Ïñ¥Îñ§ Í≤ÉÏù¥ ÏûàÏùÑÍπåÏöî?", meaning_eng: "What kinds are there?" } ] },
                    { num: 8, kor: "ÎåÄÎßà ÏùåÎ£åÏ≤òÎüº 'Í±¥Í∞ï'Ïù¥ ÏÉàÎ°úÏö¥ 'Ìä∏Î†åÎìú'Í∞Ä ÎêòÎäî ÌòÑÏÉÅÏóê ÎåÄÌï¥ Ïñ¥ÎñªÍ≤å ÏÉùÍ∞ÅÌï¥Ïöî? (Ïòà: Ï†úÎ°ú ÏäàÍ±∞ ÏùåÎ£å, ÎπÑÍ±¥ ÏùåÏãù Îì±)", eng: "What do you think about the phenomenon of 'health' becoming a new 'trend', like with cannabis drinks? (e.g., zero-sugar drinks, vegan food, etc.)", vocab: [ { term: "Ìä∏Î†åÎìú", meaning_eng: "Trend" }, { term: "ÌòÑÏÉÅ", meaning_eng: "Phenomenon" }, { term: "Ï†úÎ°ú ÏäàÍ±∞", meaning_eng: "Zero sugar" }, { term: "ÎπÑÍ±¥ ÏùåÏãù", meaning_eng: "Vegan food" } ] }
                ];
                return { scriptContent, vocabAndGrammarList, sentences, discussionQuestions };
            }, []);

            const { vocabMap, highlightData } = useMemo(() => {
                const vocabMap = new Map(vocabAndGrammarList.map(item => [item.term, item]));
                const wordMap = new Map();
                vocabAndGrammarList.forEach(item => wordMap.set(item.term, item));
                const allWords = Array.from(wordMap.keys()).sort((a, b) => b.length - a.length);
                const regexParts = [];
                allWords.forEach(word => {
                    const item = wordMap.get(word);
                    if (item.variants) item.variants.forEach(v => regexParts.push(v.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')));
                    let processed = word.replace(/[.*+?^${}()|[\]\\]/g, '\\$&').replace(/\s+/g, '\\s*');
                    if (word.endsWith('Îã§')) {
                        const parts = word.split(' ');
                        const lastPart = parts[parts.length - 1];
                        if (lastPart.endsWith('Îã§')) {
                            const stem = lastPart.slice(0, -1).replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                            const firstParts = parts.slice(0, -1).map(p => p.replace(/[.*+?^${}()|[\]\D]/g, '\\$&'));
                            regexParts.push([...firstParts, `${stem}[Í∞Ä-Ìû£]*`].join('\\s*'));
                        } else { regexParts.push(`${processed.slice(0, -1)}[Í∞Ä-Ìû£]*`); }
                    } else { regexParts.push(processed); }
                });
                const regexString = [...new Set(regexParts)].sort((a,b) => b.length - a.length).join('|');
                return { vocabMap, highlightData: { regex: new RegExp(`(${regexString})`, 'g'), wordMap, sortedWords: allWords }};
            }, [vocabAndGrammarList]);

            const tabs = useMemo(() => {
                const baseTabs = [
                    { name: 'ÎåÄÌôî Ïä§ÌÅ¨Î¶ΩÌä∏ (Transcript)', icon: <Video className="w-6 h-6"/>, content: <VideoMaterialsTab scriptContent={scriptContent} vocabAndGrammarList={vocabAndGrammarList} highlightData={highlightData} vocabMap={vocabMap} /> },
                    { name: 'ÌïµÏã¨ Ïñ¥Ìúò (Key Vocabulary)', icon: <List className="w-6 h-6"/>, content: (
                        <div>
                            <h2 className="text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3"><List className="w-8 h-8 text-green-600"/> ÌïµÏã¨ Ïñ¥Ìúò (Key Vocabulary)</h2>
                            <div className="w-full overflow-y-auto" style={{maxHeight: `calc(100vh - 150px)`}}>
                                <div className="border rounded-lg bg-white p-2 shadow-lg">
                                    <div className="space-y-1">{vocabAndGrammarList.map(item => <VocabItem key={item.term} item={item} />)}</div>
                                </div>
                            </div>
                        </div>
                    )},
                    { name: 'ÎÇ¥Ïö© ÌôïÏù∏ ÌÄ¥Ï¶à (Comprehension Check-Up)', icon: <BookOpen className="w-6 h-6"/>, content: (
                        <div>
                            <h2 className="text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3"><BookOpen className="w-8 h-8 text-green-600"/> ÎÇ¥Ïö© ÌôïÏù∏ ÌÄ¥Ï¶à (Comprehension Check-Up)</h2>
                            <ComprehensionQuiz sentences={sentences} />
                        </div>
                    )},
                    { name: 'ÏÉùÍ∞ÅÌï¥ Î≥¥Í∏∞ (Food For Thought)', icon: <MessageSquare className="w-6 h-6"/>, content: (
                        <div>
                            <h2 className="text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3"><MessageSquare className="w-8 h-8 text-green-600"/> ÏÉùÍ∞ÅÌï¥ Î≥¥Í∏∞ (Food For Thought)</h2>
                            <DiscussionSection questions={discussionQuestions} />
                        </div>
                    ) }
                ];
                return baseTabs;
            }, [layoutMode, scriptContent, vocabAndGrammarList, sentences, discussionQuestions, highlightData, vocabMap]);

            return (
                <div className="bg-gray-50 text-gray-800 p-4 sm:p-6 md:p-8">
                    <div className="mx-auto transition-all duration-300" style={{ maxWidth: containerWidth }}>
                        <header className="text-center mb-12">
                            <h1 className="text-4xl md:text-5xl font-black text-gray-900 mb-2">Ïà†Î≥¥Îã§ ÎåÄÎßà ÏùåÎ£åÍ∞Ä Í±¥Í∞ïÏóê Ï¢ãÏùÑÍπåÏöî?</h1>
                            <p className="text-xl text-gray-500" style={{fontFamily: "'Nanum Gothic', sans-serif"}}>Are cannabis-infused drinks healthier than alcohol?</p>
                        </header>
                        <Tabs tabs={tabs} />
                        {(layoutMode === 'mobile' || layoutMode === 'split') && (
                            <div className="pt-10">
                                <h2 className="text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3"><List className="w-8 h-8 text-green-600"/> ÌïµÏã¨ Ïñ¥Ìúò (Key Vocabulary)</h2>
                                <div className="w-full">
                                    <div className="border rounded-lg bg-white p-2 shadow-lg">
                                        <div className="space-y-1">{vocabAndGrammarList.map(item => <VocabItem key={item.term} item={item} />)}</div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };
    
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

