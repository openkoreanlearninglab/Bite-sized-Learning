<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—¬ëŸ¬ë¶„ë“¤ì˜ ì›ë˜ ê¿ˆì€ ë¬´ì—‡ì¸ê°€ìš”?</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700;800&family=IBM+Plex+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        /* ê¸°ë³¸ í°íŠ¸ ì„¤ì • */
        body { font-family: 'Nanum Gothic', sans-serif; }
        /* ì–´íœ˜ ëª©ë¡ ì‚¬ì´ë“œë°” í°íŠ¸ */
        .vocab-sidebar { font-family: 'IBM Plex Sans KR', sans-serif; }
        /* ì–´íœ˜ íŒì—… ìŠ¤íƒ€ì¼ */
        .vocab-popup { font-family: 'Nanum Gothic', sans-serif; z-index: 50; max-width: 320px; white-space: normal; }
        /* í˜¸ë²„ íˆ´íŒ ìŠ¤íƒ€ì¼ */
        .hover-tooltip { position: fixed; z-index: 9999; background: white; border: 2px solid #22c55e; border-radius: 8px; padding: 12px; box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); max-width: 320px; font-family: 'Nanum Gothic', sans-serif; animation: fadeIn 0.15s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }
        /* ì¼ë°˜ ì–´íœ˜ ê°•ì¡° ìŠ¤íƒ€ì¼ */
        .highlight-general { font-weight: 600; color: #374151; cursor: pointer; position: relative; transition: background-color 0.2s; }
        /* ë§ˆìš°ìŠ¤ í˜¸ë²„ ë˜ëŠ” í™œì„±í™” ì‹œ ìŠ¤íƒ€ì¼ */
        .highlight-general:hover, .active-highlight { background-color: #dcfce7; border-radius: 3px; } /* Changed to green */
        .script-highlight { background-color: #e0f2fe; border-radius: 8px; }
        .vocab-highlight { background-color: #dcfce7; border: 2px solid #22c55e; border-radius: 8px; }

        /* --- ë§í’ì„  ìŠ¤íƒ€ì¼ --- */
        .bubble-tail-left::after, .bubble-tail-right::after {
            content: ""; position: absolute; bottom: 6px; width: 0px; height: 0px;
            border-top: 8px solid transparent; border-bottom: 8px solid transparent;
            transition: border-color 0.3s;
        }
        .bubble-tail-left::after { left: -8px; }
        .bubble-tail-right::after { right: -8px; }

        /* ì˜¤ë¥¸ìª½: ì¬ëŠ¥ë§ˆì¼“ ìš´ì˜ì (í°ìƒ‰) */
        .bubble-tail-right.bubble-op::after { border-left: 8px solid #ffffff; }
        /* ì™¼ìª½: ì—¬ì1 (ë¹¨ê°„ìƒ‰) */
        .bubble-tail-left.bubble-f1::after { border-right: 8px solid #fee2e2; } /* bg-red-100 */
        /* ì™¼ìª½: ì—¬ì2 (ë² ì´ì§€/ë…¸ë€ìƒ‰) */
        .bubble-tail-left.bubble-f2::after { border-right: 8px solid #fef9c3; } /* bg-yellow-100 */
        /* ì™¼ìª½: ì—¬ì3 (íŒŒë€ìƒ‰) */
        .bubble-tail-left.bubble-f3::after { border-right: 8px solid #dbeafe; } /* bg-blue-100 */
        /* ì™¼ìª½: ë‚¨ì1 (í°ìƒ‰) */
        .bubble-tail-left.bubble-m1::after { border-right: 8px solid #ffffff; }
        /* ì™¼ìª½: ì—¬ì4 (ë³´ë¼ìƒ‰) */
        .bubble-tail-left.bubble-f4::after { border-right: 8px solid #e9d5ff; } /* bg-purple-200 */
        /* ì™¼ìª½: ë‚¨ì2 (ê°ˆìƒ‰/í˜¸ë°•ìƒ‰) */
        .bubble-tail-left.bubble-m2::after { border-right: 8px solid #fef3c7; } /* bg-amber-100 */
        /* ì™¼ìª½: ê¸°ë³¸ */
        .bubble-tail-left.bubble-default::after { border-right: 8px solid #f3f4f6; } /* bg-gray-100 */


        /* í™œì„±í™” ì‹œ (í´ë¦­/í˜¸ë²„) ê¼¬ë¦¬ ìƒ‰ìƒ ë³€ê²½ - ì´ˆë¡ìƒ‰ */
        .bubble-active.bubble-tail-right.bubble-op::after { border-left-color: #dcfce7; }
        .bubble-active.bubble-tail-left.bubble-f1::after,
        .bubble-active.bubble-tail-left.bubble-f2::after,
        .bubble-active.bubble-tail-left.bubble-f3::after,
        .bubble-active.bubble-tail-left.bubble-m1::after,
        .bubble-active.bubble-tail-left.bubble-f4::after,
        .bubble-active.bubble-tail-left.bubble-m2::after,
        .bubble-active.bubble-tail-left.bubble-default::after {
            border-right-color: #dcfce7;
        }
        
        /* ì¸ì‡„ ì „ìš© ìŠ¤íƒ€ì¼ */
        .print-only { display: none; }
        @media print {
            @page { size: A4; margin: 0.75cm 1cm; }
            .no-print { display: none !important; }
            .print-only { display: inline-block !important; }
            body, html { background: white !important; font-size: 9pt; }
            .mx-auto { max-width: none !important; padding: 0 !important; margin: 0 !important; border: none !important; box-shadow: none !important; }
            body > #root > div { padding: 0 !important; }
            * { box-shadow: none !important; border-color: transparent !important; -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
            p, h1, h2, h3, h4, span, li { color: black !important; }
            p, li { line-height: 1.5; }
            header.text-center { margin-bottom: 1rem !important; }
            .pt-10 { padding-top: 1rem !important; }
            .mb-8 { margin-bottom: 0.4pt !important; }
            h1, h2 { font-size: 12pt !important; margin-bottom: 15px; }
            h3 { font-size: 12pt !important; margin-bottom: 10px; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>
    <script type="text/babel">
        // --- ì•„ì´ì½˜ ì»´í¬ë„ŒíŠ¸ ---
        const Icon = React.memo(({ children, className = 'w-6 h-6' }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>);
        const Video = ({ className }) => <Icon className={className}><path d="m22 8-6 4 6 4V8Z"></path><rect width="14" height="12" x="2" y="6" rx="2" ry="2"></rect></Icon>;
        const BookOpen = ({ className }) => <Icon className={className}><path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path><path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path></Icon>;
        const MessageSquare = ({ className }) => <Icon className={className}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></Icon>;
        const ThumbsUp = ({ className }) => <Icon className={className}><path d="M7 10v12"></path><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a2 2 0 0 1 3 1.88V5Z"></path></Icon>;
        const List = ({ className }) => <Icon className={className}><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></Icon>;
        const Spinner = ({ className = 'w-5 h-5' }) => (
            <svg className={`animate-spin ${className}`} xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4"></circle>
                <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
        );

        // --- ê³µìš© ì»´í¬ë„ŒíŠ¸: ë²ˆì—­ ë²„íŠ¼ ---
        const TranslateButton = React.memo(({ textToTranslate }) => {
            const { useState, useEffect, useRef, useCallback } = React;
            const [translation, setTranslation] = useState(null);
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState(null);
            const [show, setShow] = useState(false);
            const [buttonLang, setButtonLang] = useState('Translation');
            const isMounted = useRef(true);

            useEffect(() => {
                isMounted.current = true;
                setButtonLang('English');
                return () => { isMounted.current = false; };
            }, []);

            const handleTranslate = useCallback(async () => {
                if (show) { setShow(false); return; }
                if (translation) { setShow(true); return; }
                if (!textToTranslate.trim()) return;

                setIsLoading(true);
                setError(null);
                try {
                    const targetLanguage = 'English';
                    const prompt = `Translate the following Korean text to ${targetLanguage}. Provide only the most natural-sounding translation, without any additional explanations or quotation marks.`;
                    const payload = { contents: [{ role: "user", parts: [{ text: prompt }, { text: textToTranslate }] }] };
                    // API í‚¤ëŠ” Canvas í™˜ê²½ì—ì„œ ìë™ìœ¼ë¡œ ì œê³µë©ë‹ˆë‹¤.
                    const apiKey = "";
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) throw new Error(`API Error: ${response.status}`);
                    const result = await response.json();
                    if (isMounted.current && result.candidates?.[0]?.content.parts[0].text) {
                        setTranslation(result.candidates[0].content.parts[0].text.trim());
                        setShow(true);
                    } else { throw new Error("Invalid API response format."); }
                } catch (err) { if (isMounted.current) setError("ë²ˆì—­ì— ì‹¤íŒ¨í–ˆì–´ìš”."); }
                finally { if (isMounted.current) setIsLoading(false); }
            }, [show, translation, textToTranslate]);

            return (
                <div className="mt-1 no-print">
                    <button onClick={handleTranslate} disabled={isLoading} className="text-xs text-gray-500 hover:text-gray-800 font-semibold py-1 px-2 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors disabled:text-gray-300">{isLoading ? 'ë²ˆì—­ ì¤‘...' : (show ? 'ë²ˆì—­ ìˆ¨ê¸°ê¸°' : `ë²ˆì—­ (${buttonLang})`)}</button>
                    {show && translation && <p className="text-gray-600 text-base mt-2 mb-2 whitespace-pre-wrap">{translation}</p>}
                    {error && <p className="text-red-500 text-sm mt-1">{error}</p>}
                </div>
            );
        });

        // --- [ë™ì˜ìƒ ìë£Œ] íƒ­ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ ---
        const HighlightedText = React.memo(({ text, highlightData, onWordHover, onWordLeave, onWordClick, lineId, activeWordId }) => {
            if (!text || !highlightData) return text;
            const { regex, wordMap, sortedWords } = highlightData;
            const parts = text.split(regex);
            return (<>{parts.map((part, index) => {
                if (!part) return null;
                if (index % 2 === 0) return part;
                const trimmedPart = part.trim();
                const baseForm = sortedWords.find(word => {
                    const vocabItem = wordMap.get(word);
                    if (vocabItem.variants && vocabItem.variants.includes(trimmedPart)) return true;
                    const cleanPart = trimmedPart.replace(/\s/g, '');
                    const cleanWord = word.replace(/\s/g, '');
                    if (word.endsWith('ë‹¤')) return cleanPart.startsWith(cleanWord.slice(0, -1));
                    return cleanPart.startsWith(cleanWord);
                });
                if (!baseForm) return part;
                const info = wordMap.get(baseForm);
                if (!info) return part;
                const uniqueWordId = `${lineId}-${index}-${baseForm}`;
                const classes = ['highlight-general', 'font-bold', activeWordId === uniqueWordId ? 'active-highlight' : ''].join(' ');
                return <span
                    key={index}
                    className={classes}
                    onMouseEnter={(e) => onWordHover(e, baseForm, lineId, index)}
                    onMouseLeave={onWordLeave}
                    onClick={(e) => onWordClick(e, baseForm)}
                >{part}</span>;
            })}</>);
        });

        const HoverTooltip = React.memo(({ data, position }) => {
            if (!data || !position) return null;
            return (
                <div
                    className="hover-tooltip"
                    style={{ left: `${position.x}px`, top: `${position.y}px` }}
                >
                    <p className="font-bold text-lg text-green-700 mb-2">{data.term}</p>
                    <p className="text-gray-700 text-base">{data.mainDef}</p>
                    {data.subDefs && data.subDefs.length > 0 && (
                        <div className="mt-3 pt-3 border-t border-gray-200">
                            <ul className="space-y-1">
                                {data.subDefs.map((sub, i) => (
                                    <li key={i} className="text-sm">
                                        <span className="font-semibold text-gray-600">{sub.subTerm}:</span>{' '}
                                        <span className="text-gray-600">{sub.subDef}</span>
                                    </li>
                                ))}
                            </ul>
                        </div>
                    )}
                </div>
            );
        });

        const VocabItem = React.memo(React.forwardRef(({ item, isHighlighted }, ref) => {
            const { useState } = React;
            const [showExamples, setShowExamples] = useState(false);

            return (
                <div ref={ref} className={`p-4 rounded-lg border-b ${isHighlighted ? 'vocab-highlight' : 'bg-white'}`}>
                    <p className="font-bold text-[18px] text-green-700">{item.term}</p>
                    <div className="pl-4 mt-2 border-l-2">
                        <p className="text-gray-700 text-[17px]">{item.mainDef}</p>
                        {item.subDefs && item.subDefs.length > 0 && (
                            <div className="mt-3 pt-3 border-t">{item.subDefs.map((sub, index) => (
                                <div key={index} className="mt-2">
                                    <p className="font-semibold text-[17px]">{sub.subTerm}</p>
                                    <p className="text-gray-600 pl-2 text-[16px]">{sub.subDef}</p>
                                </div>
                            ))}</div>
                        )}
                    </div>
                    {item.examples && item.examples.length > 0 && (
                        <div className="mt-3 no-print">
                            <button onClick={() => setShowExamples(!showExamples)} className="text-xs bg-green-200 hover:bg-green-300 text-gray-600 py-1 px-2 rounded-md">
                                {showExamples ? 'Close Examples' : 'Sentence Examples'}
                            </button>
                            {showExamples && (
                                <div className="mt-3 p-3 bg-green-50 rounded-lg space-y-3 text-[16px]">
                                    {item.examples.map((ex, index) => (
                                        <div key={index}>
                                            <p className="font-medium text-gray-800">{ex.kor}</p>
                                            <p className="text-gray-400 hover:text-gray-700 transition-colors">{ex.eng}</p>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    )}
                </div>
            );
        }));

        const VideoMaterialsTab = ({scriptContent, vocabAndGrammarList, highlightData, vocabMap, layoutMode}) => {
            const { useState, useRef, useEffect, useCallback, useLayoutEffect } = React;
            const [activeWordId, setActiveWordId] = useState(null);
            const [hoverPopupData, setHoverPopupData] = useState(null);
            const [highlightedVocab, setHighlightedVocab] = useState(null);
            const [translationsVisible, setTranslationsVisible] = useState({});
            const [pinnedWordData, setPinnedWordData] = useState(null);

            const vocabRefs = useRef({});
            const hoverTimeoutRef = useRef(null);
            const scriptWrapperRef = useRef(null);
            const videoBoxRef = useRef(null); // ë™ì˜ìƒ ë°•ìŠ¤ ref ì¶”ê°€

            // layoutModeê°€ ë³€ê²½ë˜ê±°ë‚˜ ì°½ í¬ê¸°ê°€ ì¡°ì ˆë  ë•Œ ìŠ¤í¬ë¦½íŠ¸ ë˜í¼ì˜ ë†’ì´ë¥¼ ë™ì ìœ¼ë¡œ ì¡°ì ˆ
            useLayoutEffect(() => {
                const setScriptHeight = () => {
                    // 'mobile' ëª¨ë“œì—ì„œëŠ” ë†’ì´ ì¡°ì ˆ ë¡œì§ì„ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ
                    if (layoutMode === 'mobile') {
                        if (scriptWrapperRef.current) {
                            scriptWrapperRef.current.style.height = ''; // ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ì œê±°
                            scriptWrapperRef.current.classList.remove('overflow-y-auto', 'h-[calc(100vh-18rem)]');
                            scriptWrapperRef.current.classList.remove('md:overflow-y-auto', 'md:h-[calc(100vh-18rem)]'); // ì¤‘ë³µ ì œê±°
                        }
                        return;
                    }

                    // 'mobile'ì´ ì•„ë‹Œ ëª¨ë“œ (split, small, medium, large)
                    if (layoutMode === 'split') {
                        // 'split' ëª¨ë“œ: ë¹„ë””ì˜¤ ë†’ì´ì— ìŠ¤í¬ë¦½íŠ¸ ë†’ì´ë¥¼ ë§ì¶¤
                        if (videoBoxRef.current && scriptWrapperRef.current) {
                            const videoHeight = videoBoxRef.current.offsetHeight;
                            scriptWrapperRef.current.style.height = `${videoHeight}px`; // ë¹„ë””ì˜¤ ë†’ì´ì™€ ë™ì¼í•˜ê²Œ ì„¤ì •
                            scriptWrapperRef.current.classList.add('overflow-y-auto');
                            scriptWrapperRef.current.classList.remove('h-[calc(100vh-18rem)]');
                            scriptWrapperRef.current.classList.remove('md:h-[calc(100vh-18rem)]');
                        }
                    } else {
                        // ë‹¤ë¥¸ ëª¨ë“œ (small, medium, large): ê¸°ì¡´ vh ê¸°ë°˜ ë†’ì´ ì‚¬ìš©
                        if (scriptWrapperRef.current) {
                            scriptWrapperRef.current.style.height = ''; // ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ì œê±°
                            scriptWrapperRef.current.classList.add('overflow-y-auto', 'h-[calc(100vh-18rem)]');
                            scriptWrapperRef.current.classList.remove('md:overflow-y-auto', 'md:h-[calc(100vh-18rem)]'); // ì¤‘ë³µ ì œê±°
                        }
                    }
                };

                setScriptHeight(); // ì»´í¬ë„ŒíŠ¸ ë§ˆìš´íŠ¸ ë° layoutMode ë³€ê²½ ì‹œ ì‹¤í–‰
                
                // ì°½ í¬ê¸° ì¡°ì ˆ ì‹œ ë†’ì´ ì¬ê³„ì‚°
                window.addEventListener('resize', setScriptHeight);
                return () => window.removeEventListener('resize', setScriptHeight);
            }, [layoutMode, videoBoxRef, scriptWrapperRef]); // ì˜ì¡´ì„± ë°°ì—´ì— layoutMode ì¶”ê°€

            useEffect(() => {
                const handleGlobalClick = (e) => {
                    if (pinnedWordData && !e.target.closest('.highlight-general')) {
                        setPinnedWordData(null);
                        setHighlightedVocab(null);
                    }
                };
                
                document.addEventListener('click', handleGlobalClick);
                return () => {
                    document.removeEventListener('click', handleGlobalClick);
                };
            }, [pinnedWordData]);

            const handleWordHover = useCallback((e, baseForm) => {
                e.stopPropagation();
                if (pinnedWordData) return;
                if (hoverTimeoutRef.current) clearTimeout(hoverTimeoutRef.current);

                const wordData = vocabMap.get(baseForm);
                if (wordData) {
                    const rect = e.target.getBoundingClientRect();
                    let x = rect.left;
                    let y = rect.bottom + 5;
                    const tooltipWidth = 320;
                    if (x + tooltipWidth > window.innerWidth) {
                        x = rect.right - tooltipWidth;
                        if (x < 0) x = 10;
                    }
                    const tooltipHeight = 200;
                    if (y + tooltipHeight > window.innerHeight + window.scrollY) {
                        y = rect.top - tooltipHeight - 5;
                    }
                    setHoverPopupData({ data: wordData, position: { x, y } });
                    setHighlightedVocab(wordData.term);

                    const vocabElement = vocabRefs.current[wordData.term];
                    if (vocabElement) {
                        vocabElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }
                }
            }, [vocabMap, pinnedWordData]);

            const handleWordLeave = useCallback(() => {
                if (pinnedWordData) return;
                hoverTimeoutRef.current = setTimeout(() => {
                    setHoverPopupData(null);
                    setHighlightedVocab(null);
                }, 200);
            }, [pinnedWordData]);

            const handleWordClick = useCallback((e, baseForm) => {
                e.stopPropagation();
                const wordData = vocabMap.get(baseForm);
                if (!wordData) return;

                if (pinnedWordData && pinnedWordData.data.term === wordData.term) {
                    setPinnedWordData(null);
                    setHoverPopupData(null);
                    setHighlightedVocab(null);
                } else {
                    const rect = e.target.getBoundingClientRect();
                    let x = rect.left;
                    let y = rect.bottom + 5;
                    const tooltipWidth = 320;
                    if (x + tooltipWidth > window.innerWidth) {
                        x = rect.right - tooltipWidth;
                        if (x < 0) x = 10;
                    }
                    const tooltipHeight = 200;
                    if (y + tooltipHeight > window.innerHeight + window.scrollY) {
                        y = rect.top - tooltipHeight - 5;
                    }
                    
                    const newData = { data: wordData, position: { x, y } };
                    setPinnedWordData(newData);
                    setHoverPopupData(null);
                    setHighlightedVocab(wordData.term);

                    const vocabElement = vocabRefs.current[wordData.term];
                    if (vocabElement) {
                        vocabElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    }
                }
            }, [vocabMap, pinnedWordData]);

            const toggleTranslation = (lineId) => {
                setTranslationsVisible(prev => ({ ...prev, [lineId]: !prev[lineId] }));
            };

            const getSpeakerStyles = (speaker) => {
                switch (speaker) {
                    case 'ì¬ëŠ¥ë§ˆì¼“ ìš´ì˜ì':
                        return { bubbleClass: 'bg-white text-black', tailClass: 'bubble-tail-right bubble-op' };
                    case 'ì—¬ì1':
                        return { bubbleClass: 'bg-red-100 text-black', tailClass: 'bubble-tail-left bubble-f1' };
                    case 'ì—¬ì2':
                        return { bubbleClass: 'bg-yellow-100 text-black', tailClass: 'bubble-tail-left bubble-f2' };
                    case 'ì—¬ì3':
                        return { bubbleClass: 'bg-blue-100 text-black', tailClass: 'bubble-tail-left bubble-f3' };
                    case 'ë‚¨ì1':
                        return { bubbleClass: 'bg-white text-black', tailClass: 'bubble-tail-left bubble-m1' };
                    case 'ì—¬ì4':
                        return { bubbleClass: 'bg-purple-200 text-black', tailClass: 'bubble-tail-left bubble-f4' }; // Using 200 for better color
                    case 'ë‚¨ì2':
                        return { bubbleClass: 'bg-amber-100 text-black', tailClass: 'bubble-tail-left bubble-m2' };
                    default:
                        return { bubbleClass: 'bg-gray-100 text-black', tailClass: 'bubble-tail-left bubble-default' };
                }
            };

            return (
                <div className={`video-materials-content ${layoutMode !== 'mobile' ? 'flex flex-row gap-6' : ''}`}>
                    {(pinnedWordData || hoverPopupData) && (
                        <HoverTooltip 
                            data={(pinnedWordData || hoverPopupData).data} 
                            position={(pinnedWordData || hoverPopupData).position} 
                        />
                    )}
                    {/* --- Instagram í”Œë ˆì´ì–´ --- */}
                    <div className={`video-wrapper ${layoutMode !== 'mobile' ? 'sticky top-8 z-40 bg-gray-50 py-4 no-print' : 'py-4 no-print'} ${layoutMode === 'split' ? 'w-[40%]' : (layoutMode !== 'mobile' ? 'w-[41%]' : 'w-full')} ${layoutMode !== 'split' && layoutMode !== 'mobile' ? 'h-[calc(100vh-18rem)]' : ''}`}>
                        <div 
                            className="w-full rounded-xl shadow-lg border-4 border-white overflow-hidden transition-all duration-300 ease-in-out relative" 
                            style={{ aspectRatio: '9 / 16' }}
                            ref={videoBoxRef} // ref í• ë‹¹
                        >
                            <iframe 
                                className="absolute top-0 left-0 w-full h-full"
                                src="https://www.instagram.com/reel/DQ4UIBHEqwE/embed"
                                width="100%"
                                height="100%"
                                frameBorder="0"
                                scrolling="no"
                                allowtransparency="true"
                            ></iframe>
                        </div>
                        {/*
                        <div className="mt-4 p-4 bg-white rounded-lg shadow-md border">
                            <p className="text-sm text-gray-600">
                                <strong className="text-gray-900">ì°¸ê³ :</strong> Instagram ë™ì˜ìƒì€ ìë™ ë™ê¸°í™” ë° ì¬ìƒ ì†ë„ ì¡°ì ˆ ê¸°ëŠ¥ì´ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
                            </p>
                        </div>
                        */}
                    </div>
                    {/* --- ìŠ¤í¬ë¦½íŠ¸ íŒ¨ë„ --- */}
                    <div className={`script-wrapper ${layoutMode === 'split' ? 'w-[60%]' : (layoutMode !== 'mobile' ? 'w-[59%]' : 'w-full')} relative py-4`} ref={scriptWrapperRef}>
                        <main className="flex-grow">
                            <div className="space-y-6">
                                {scriptContent.map(line => {
                                    const hasTranslation = !!line.eng;

                                    if (line.kor.startsWith('â€¢')) {
                                        return (
                                            <div key={line.id} className="p-3 my-2 rounded-lg">
                                                <p className="whitespace-pre-wrap text-xl font-semibold text-gray-800 text-center">
                                                    <HighlightedText 
                                                        text={line.kor} 
                                                        highlightData={highlightData} 
                                                        onWordHover={handleWordHover} 
                                                        onWordLeave={handleWordLeave} 
                                                        onWordClick={handleWordClick}
                                                        lineId={line.id} 
                                                        activeWordId={activeWordId} 
                                                    />
                                                </p>
                                                {translationsVisible[line.id] && hasTranslation && (
                                                    <p className="text-gray-600 text-base mt-2 text-center">{line.eng}</p>
                                                )}
                                                <div className="flex items-center justify-center gap-2 mt-2 no-print">
                                                    {hasTranslation && (
                                                        <button onClick={() => toggleTranslation(line.id)} className="text-xs text-gray-600 bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition">
                                                            {translationsVisible[line.id] ? 'Hide translation' : 'Translation'}
                                                        </button>
                                                    )}
                                                </div>
                                            </div>
                                        );
                                    }

                                    const isLeftAligned = line.speaker !== 'ì¬ëŠ¥ë§ˆì¼“ ìš´ì˜ì';
                                    const { bubbleClass, tailClass } = getSpeakerStyles(line.speaker);
                                    const bubbleWrapperClasses = `flex flex-col max-w-[100%] sm:max-w-[100%] ${isLeftAligned ? 'items-start ml-3' : 'items-end self-end mr-3'}`;
                                    const bubbleBaseClasses = 'relative px-5 py-3 rounded-2xl shadow-md transition-colors duration-300';
                                    const bubbleClasses = `${bubbleBaseClasses} ${bubbleClass} ${tailClass}`;
                                    const speakerNameClasses = `font-bold mb-1 text-black`;

                                    return (
                                        <div key={line.id} className="flex flex-col w-full">
                                            <div className={bubbleWrapperClasses}>
                                                <p className={`${speakerNameClasses} ${isLeftAligned ? 'self-start' : 'self-end'}`}>{line.speaker}</p>
                                                <div className={bubbleClasses}>
                                                    <p className="whitespace-pre-wrap text-lg">
                                                        <HighlightedText 
                                                            text={line.kor} 
                                                            highlightData={highlightData} 
                                                            onWordHover={handleWordHover} 
                                                            onWordLeave={handleWordLeave} 
                                                            onWordClick={handleWordClick}
                                                            lineId={line.id} 
                                                            activeWordId={activeWordId} 
                                                        />
                                                    </p>
                                                </div>
                                                <div className={`w-full flex flex-col ${isLeftAligned ? 'items-start' : 'items-end'}`}>
                                                    {translationsVisible[line.id] && hasTranslation && (
                                                        <p className="text-gray-500 text-base mt-2 px-2">{line.eng}</p>
                                                    )}
                                                    <div className="flex items-center gap-2 mt-2 px-2 no-print">
                                                        {hasTranslation && (
                                                            <button onClick={() => toggleTranslation(line.id)} className="text-xs text-gray-600 bg-gray-100 hover:bg-gray-200 px-2 py-1 rounded-md transition">
                                                                {translationsVisible[line.id] ? 'Hide translation' : 'Translation'}
                                                            </button>
                                                        )}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        </main>
                    </div>
                </div>
            )
        }

        // --- [í€´ì¦ˆ&í† ë¡ ] íƒ­ ê´€ë ¨ ì»´í¬ë„ŒíŠ¸ ---
        const ComprehensionQuiz = ({ sentences }) => {
            const { useState, useMemo } = React;
            const [selectedWords, setSelectedWords] = useState({});
            const [results, setResults] = useState({});
            const [translationsVisible, setTranslationsVisible] = useState({});
            const [hintsVisible, setHintsVisible] = useState({});

            const shuffledSentences = useMemo(() => {
                const shuffleArray = (array) => {
                    const newArray = [...array];
                    for (let i = newArray.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                    }
                    return newArray;
                };
                return sentences.map(sentence => ({ ...sentence, bank: shuffleArray(sentence.bank) }));
            }, [sentences]);

            const handleWordSelect = (id, word) => {
                setSelectedWords(prev => ({...prev, [id]: word}));
                const isCorrect = sentences.find(s => s.id === id).answer === word;
                setResults(prev => ({...prev, [id]: isCorrect}));
                setHintsVisible(prev => ({ ...prev, [id]: false }));
            };
            const handleToggleTranslation = (id) => { setTranslationsVisible(prev => ({...prev, [id]: !prev[id]})); };
            const handleToggleHint = (id) => { if (results[id] !== true) setHintsVisible(prev => ({...prev, [id]: !prev[id]})); };

            return (
                <div className="space-y-8">
                    {shuffledSentences.map((s, index) => (
                        <div key={s.id} className="p-6 border rounded-xl bg-white shadow-lg transition-all duration-300">
                            <p className="text-gray-700 font-bold text-lg mb-4">{index + 1}. ë‹¤ìŒ ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”. (Choose the correct word for the blank.)</p>
                            <div className="p-4 bg-gray-100 rounded-lg text-left mb-3 text-gray-900 text-xl font-bold">
                                {s.parts[0]}
                                <span className="inline-block bg-yellow-200 text-green-800 px-3 py-1 rounded-md font-extrabold mx-2">
                                    {hintsVisible[s.id] ? `[ ${s.eng_hint} ]` : (selectedWords[s.id] || '___')}
                                </span>
                                {s.parts[1]}
                                {results[s.id] === true && <span className="inline-block ml-2 text-green-500">âœ“</span>}
                                {results[s.id] === false && <span className="inline-block ml-2 text-red-500">âœ—</span>}
                            </div>
                            {translationsVisible[s.id] && (
                                <div className="text-gray-600 italic p-3 bg-gray-50 rounded-lg text-left mt-2 text-base">
                                    {results[s.id] ? (<span>{s.eng_parts[0]}<strong className="text-green-600">{s.eng_answer}</strong>{s.eng_parts[1]}</span>)
                                    : (<span>{s.eng_parts[0]}<span className="font-bold">___</span>{s.eng_parts[1]}</span>)}
                                </div>
                            )}
                            <div className="text-left mb-4 flex gap-2">
                                <button onClick={() => handleToggleHint(s.id)} className="text-xs bg-yellow-200 hover:bg-yellow-300 text-yellow-800 font-bold py-1 px-3 rounded-full transition duration-200 disabled:opacity-50 disabled:cursor-not-allowed" disabled={results[s.id] === true}>íŒíŠ¸ (Hint)</button>
                                <button onClick={() => handleToggleTranslation(s.id)} className="text-xs bg-gray-200 hover:bg-gray-300 text-gray-800 font-bold py-1 px-3 rounded-full transition duration-200">ë²ˆì—­ (Translation)</button>
                            </div>
                            <div className="flex justify-start flex-wrap gap-3">
                                {s.bank.map(word => (
                                    <button
                                        key={word}
                                        onClick={() => handleWordSelect(s.id, word)}
                                        className={`px-4 py-2 rounded-lg text-lg font-bold transition-all transform hover:scale-105 shadow-md ${selectedWords[s.id] === word ? (results[s.id] ? 'bg-green-500 text-white ring-2 ring-opacity-50 ring-green-400' : 'bg-red-500 text-white ring-2 ring-red-300') : 'bg-white text-gray-800 hover:bg-gray-100 border'}`}
                                    >{word}</button>
                                ))}
                            </div>
                            {results[s.id] !== undefined && (
                                <div className={`mt-4 p-4 border-l-4 rounded-r-lg ${results[s.id] ? 'bg-green-50 border-green-400' : 'bg-red-50 border-red-400'}`}>
                                    <p className={`font-bold ${results[s.id] ? 'text-green-800' : 'text-red-800'} flex items-center gap-2 text-lg`}>{results[s.id] ? 'Correct!' : 'Try again.'}</p>
                                    <p className="mt-2 text-gray-700 text-base italic">{results[s.id] ? s.eng_explanation : s.eng_wrongAnswerExplanations[selectedWords[s.id]]}</p>
                                </div>
                            )}
                        </div>
                    ))}
                </div>
            );
        };

        const SentenceChecker = ({ value, onChange, placeholder, question }) => {
            const { useState } = React;
            const [feedback, setFeedback] = useState(null);
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState(null);

            const checkSentence = async () => {
                if (!value || value.trim() === '') {
                    setError("ë¬¸ì¥ì„ ì…ë ¥í•´ì•¼ í”¼ë“œë°±ì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”.");
                    setFeedback(null); return;
                }
                setIsLoading(true); setError(null); setFeedback(null);
                const prompt = `You are an advanced Korean language tutor AI for B1-C2 level learners. Analyze the user's sentence in response to a specific question. The user's answer is in Korean. Your entire response MUST be a JSON object, with all string values in Korean (ending in -ìš”) and English.\n\nQuestion: "${question}"\nUser's Answer: "${value}"\n\nYour response MUST be a JSON object with the specified schema.`;
                const payload = {
                    contents: [{ role: "user", parts: [{ text: prompt }] }],
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: { type: "OBJECT", properties: { "is_relevant": { "type": "BOOLEAN" }, "relevance_feedback_kor": { "type": "STRING", "nullable": true }, "relevance_feedback_eng": { "type": "STRING", "nullable": true }, "is_correct": { "type": "BOOLEAN", "nullable": true }, "feedback_message_kor": { "type": "STRING", "nullable": true }, "feedback_message_eng": { "type": "STRING", "nullable": true }, "corrected_sentence": { "type": "STRING", "nullable": true }, "explanation_kor": { "type": "STRING", "nullable": true }, "explanation_eng": { "type": "STRING", "nullable": true }, "alternative_expressions": { "type": "ARRAY", "items": { "type": "OBJECT", "properties": { "expression_kor": { "type": "STRING" }, "expression_eng": { "type": "STRING" } }, "required": ["expression_kor", "expression_eng"] } } }, "required": ["is_relevant"] }
                    }
                };
                // API í‚¤ëŠ” Canvas í™˜ê²½ì—ì„œ ìë™ìœ¼ë¡œ ì œê³µë©ë‹ˆë‹¤.
                const apiKey = "";
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
                try {
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) throw new Error(`API error: ${response.statusText}`);
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0 && result.candidates[0].content.parts[0].text) {
                        try {
                            const parsedJson = JSON.parse(result.candidates[0].content.parts[0].text);
                            setFeedback(parsedJson);
                        } catch (parseError) {
                            console.error("Error parsing JSON response:", parseError, result.candidates[0].content.parts[0].text);
                            setError("AIì˜ ì‘ë‹µ í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•Šì•„ ì²˜ë¦¬í•  ìˆ˜ ì—†ì–´ìš”.");
                        }
                    } else {
                        console.error("Invalid API response structure:", result);
                        setError("AIì˜ ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” ë° ë¬¸ì œê°€ ë°œìƒí–ˆì–´ìš”.");
                    }
                } catch (err) {
                    console.error("Error checking sentence:", err);
                    setError("ë¬¸ì¥ ê²€ì‚¬ì— ì‹¤íŒ¨í–ˆì–´ìš”. ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì„ í™•ì¸í•˜ê±°ë‚˜ ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
                }
                finally { setIsLoading(false); }
            };

            const renderFeedbackSection = (title, content) => (content && content.length > 0 && (
                <div>
                    <p className="text-gray-800 font-bold text-[17px]">{title}</p>
                    {Array.isArray(content) ? (
                        <ul className="list-disc list-inside space-y-2 mt-1">
                            {content.map((item, index) => (
                                <li key={index} className="text-gray-600 text-[16px]">
                                    <p className="font-medium">{item.expression_kor || item.sentence_kor}</p>
                                    <p className="text-gray-500 italic text-sm">{item.expression_eng || item.sentence_eng}</p>
                                </li>
                            ))}
                        </ul>
                    ) : (<p className="text-gray-700 font-medium text-[18px]">{content}</p>)}
                </div>
            ));

            return (
                <div>
                    <textarea className="w-full p-3 border rounded-md focus:ring-2 focus:ring-green-400 transition text-lg" rows="3" placeholder={placeholder} value={value} onChange={onChange} />
                    <button onClick={checkSentence} disabled={isLoading} className="mt-3 flex items-center justify-center gap-2 bg-green-200 text-gray-900 py-2 px-4 rounded-md transition-colors hover:bg-green-300 disabled:opacity-50 disabled:cursor-wait font-semibold text-[14px]">
                        {isLoading ? <Spinner className="w-5 h-5" /> : 'âœ¨'} {isLoading ? 'í”¼ë“œë°± ìƒì„± ì¤‘...' : 'AIì—ê²Œ í”¼ë“œë°± ë°›ê¸°'}
                    </button>
                    {error && <p className="mt-2 text-sm text-red-600">{error}</p>}
                    {feedback && (
                        <div className="mt-4 p-4 bg-green-50 border-l-4 border-green-100 rounded-r-lg space-y-4">
                            {!feedback.is_relevant && ( <div><p className="font-bold text-red-800 flex items-center gap-2 text-lg">{feedback.relevance_feedback_kor}</p><p className="text-gray-600 italic">{feedback.relevance_feedback_eng}</p></div> )}
                            {feedback.is_relevant && feedback.is_correct && ( <div><p className="font-bold text-green-800 flex items-center gap-2 text-lg"><ThumbsUp className="w-5 h-5"/> {feedback.feedback_message_kor}</p><p className="text-gray-600 italic">{feedback.feedback_message_eng}</p></div> )}
                            {feedback.is_relevant && !feedback.is_correct && (<>
                                {feedback.corrected_sentence && ( <div><p className="text-gray-800 font-bold text-[17px]">âœ¨ ìˆ˜ì •ëœ ë¬¸ì¥:</p><p className="text-gray-700 font-medium text-[18px]">{feedback.corrected_sentence}</p></div> )}
                                {(feedback.explanation_kor || feedback.explanation_eng) && ( <div><p className="text-gray-800 font-bold text-[17px]">ì„¤ëª…:</p>{feedback.explanation_kor && <p className="text-gray-600 text-[16px]">{feedback.explanation_kor}</p>}{feedback.explanation_eng && <p className="text-gray-500 italic mt-1 text-[15px]">{feedback.explanation_eng}</p>}</div> )}
                            </>)}
                            {feedback.alternative_expressions && feedback.alternative_expressions.length > 0 && renderFeedbackSection('ğŸ’¡ ë‹¤ë¥¸ í‘œí˜„:', feedback.alternative_expressions)}
                        </div>
                    )}
                </div>
            );
        };

        const DiscussionSection = ({ questions }) => {
            const { useState } = React;
            const [translationsVisible, setTranslationsVisible] = useState({});
            const [userQuestionAnswers, setUserQuestionAnswers] = useState({});
            const toggleTranslation = (id) => { setTranslationsVisible(prev => ({ ...prev, [id]: !prev[id]})); };

            return (
                <div className="space-y-10">
                    {questions.map((q) => (
                        <div key={q.num} className="p-6 border rounded-xl bg-white shadow-lg">
                            <p className="text-gray-900 text-xl font-bold">{q.num}. {q.kor}</p>
                            {translationsVisible[`q-${q.num}`] && (<p className="whitespace-pre-wrap text-gray-600 italic mt-1 text-base">{q.eng}</p>)}
                            <button onClick={() => toggleTranslation(`q-${q.num}`)} className="text-xs text-gray-800 bg-gray-200 hover:bg-gray-300 font-bold py-1 px-3 rounded-full transition duration-200 mt-2 mb-6">ë²ˆì—­ (Translation)</button>
                            {q.vocab && q.vocab.length > 0 && (
                                <div className="mt-4 space-y-4">
                                    <h3 className="font-bold text-lg text-gray-800">ğŸ“í•µì‹¬ í‘œí˜„ (Essential phrases)</h3>
                                    {q.vocab.map((v, i) => (
                                        <div key={i} className="pl-4 border-l-2 border-gray-200 py-2">
                                            <p className="font-semibold text-green-700 text-lg">{v.term}: <span className="font-medium text-gray-700 text-base">{v.meaning_eng}</span></p>
                                        </div>
                                    ))}
                                </div>
                            )}
                            <div className="mt-6">
                                <h3 className="font-bold text-lg text-gray-800 mb-2">í•µì‹¬ í‘œí˜„ì„ ì‚¬ìš©í•´ì„œ ì§ˆë¬¸ì— ëŒ€ë‹µí•´ ë³´ì„¸ìš”.</h3>
                                <SentenceChecker
                                    value={userQuestionAnswers[`q-${q.num}`] || ''}
                                    onChange={(e) => setUserQuestionAnswers(prev => ({...prev, [`q-${q.num}`]: e.target.value}))}
                                    placeholder="ì—¬ê¸°ì— ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš” (Type your response here)"
                                    question={q.kor}
                                />
                            </div>
                        </div>
                    ))}
                </div>
            );
        };

        const Tabs = ({ tabs }) => {
            const { useState, useRef, useLayoutEffect } = React;
            const [activeTab, setActiveTab] = useState(0);
            const [btnFontSize, setBtnFontSize] = useState(1);
            const [btnPadding, setBtnPadding] = useState(1);
            const [btnGap, setBtnGap] = useState(1);
            const [btnMargin, setBtnMargin] = useState(1);
            const [allowWrap, setAllowWrap] = useState(false);
            const navRef = useRef(null);

            useLayoutEffect(() => {
                const adjustFontSize = () => {
                    const nav = navRef.current;
                    if (!nav) return;

                    const baseFontSize = 14;
                    const basePaddingPx = 4;
                    const baseGapPx = 24;
                    const baseMarginPx = 4;

                    const minFontSizePx = 6;
                    const minPaddingPx = 2;
                    const minGapPx = 4;
                    const minMarginPx = 1;

                    setAllowWrap(false); 
                    setBtnFontSize(1);   
                    setBtnPadding(1);
                    setBtnGap(1);
                    setBtnMargin(1);

                    setTimeout(() => {
                        const overflows = nav.scrollWidth > nav.clientWidth;

                        if (overflows) {
                            const ratio = nav.clientWidth / nav.scrollWidth;
                            let newFontSizePx = baseFontSize * ratio;
                            let newPaddingPx = basePaddingPx * ratio; 
                            let newGapPx = baseGapPx * ratio;
                            let newMarginPx = baseMarginPx * ratio;

                            if (newFontSizePx < minFontSizePx) {
                                setBtnFontSize(minFontSizePx / baseFontSize);
                                setBtnPadding(minPaddingPx / basePaddingPx);
                                setBtnGap(minGapPx / baseGapPx);
                                setBtnMargin(minMarginPx / baseMarginPx);
                                setAllowWrap(true);
                            } else {
                                setBtnFontSize(newFontSizePx / baseFontSize);
                                setBtnPadding(newPaddingPx / basePaddingPx);
                                setBtnGap(newGapPx / baseGapPx);
                                setBtnMargin(newMarginPx / baseMarginPx);
                                setAllowWrap(false);
                            }
                        } else {
                            setBtnFontSize(1);
                            setBtnPadding(1);
                            setBtnGap(1);
                            setBtnMargin(1);
                            setAllowWrap(false);
                        }
                    }, 0);
                };

                adjustFontSize();

                const resizeObserver = new ResizeObserver(adjustFontSize);
                if (navRef.current) {
                    resizeObserver.observe(navRef.current);
                }

                return () => resizeObserver.disconnect();
            }, [tabs, navRef]);

            return (
                <div>
                    <div className="border-b border-gray-200 no-print">
                        <nav 
                            ref={navRef}
                            className={`${allowWrap ? 'flex-wrap' : ''} -mb-px flex`} 
                            aria-label="Tabs"
                            style={{ gap: `${btnGap * 1.5}rem` }}
                        >
                            {tabs.map((tab, index) => (
                                <button
                                    key={tab.id}
                                    onClick={() => setActiveTab(index)}
                                    className={`${ index === activeTab ? 'border-green-500 text-green-600' : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'} whitespace-nowrap py-4 border-b-2 font-medium text-sm transition-colors flex items-center`}
                                    style={{ 
                                        fontSize: `${btnFontSize}em`,
                                        paddingLeft: `${btnPadding * 0.25}rem`,
                                        paddingRight: `${btnPadding * 0.25}rem`,
                                        gap: `${btnMargin * 0.25}rem`
                                    }}
                                >{tab.icon} {tab.name}</button>
                            ))}
                        </nav>
                    </div>
                    <div className="pt-10">{tabs[activeTab].content}</div>
                </div>
            );
        };

        // --- ë©”ì¸ App ì»´í¬ë„ŒíŠ¸ ---
        const App = () => {
            const { useState, useEffect, useMemo } = React;
            const [containerWidth, setContainerWidth] = useState('30cm');
            const [layoutMode, setLayoutMode] = useState('large');

            useEffect(() => {
                const handleResize = () => {
                    const heightInPx = window.innerHeight; const widthInPx = window.innerWidth;
                    const isMobileDevice = /Mobi|Android/i.test(navigator.userAgent);
                    const isTabletDevice = /iPad|Android(?!.*Mobi)/i.test(navigator.userAgent);
                    const isPortrait = window.matchMedia("(orientation: portrait)").matches;
                    let newMode = 'large'; let newContainerWidth = '30cm';

                    if ((isMobileDevice || isTabletDevice) && isPortrait) { newMode = 'mobile'; newContainerWidth = '100%'; }
                    else {
                        if (heightInPx < 832) { newMode = 'split'; newContainerWidth = '24cm'; } // 22cm -> 24cmë¡œ ë³€ê²½
                        else if (heightInPx < 907) { newMode = 'small'; newContainerWidth = '26cm'; } // 22cm -> 26cmë¡œ ë³€ê²½
                        else if (heightInPx < 983) { newMode = 'medium'; newContainerWidth = '28cm'; } // 24cm -> 28cmë¡œ ë³€ê²½
                        else { newMode = 'large'; newContainerWidth = '30cm'; }
                    }
                    setContainerWidth(newContainerWidth); setLayoutMode(newMode); document.body.dataset.layoutMode = newMode;
                    const baseWidthPx = 30 * 37.795; let effectiveWidthPx;
                    if (newContainerWidth === '100%') { effectiveWidthPx = widthInPx; }
                    else { const cmValue = parseFloat(newContainerWidth); effectiveWidthPx = cmValue * 37.795; }
                    if (newMode !== 'large') { const scale = Math.min(1.0, effectiveWidthPx / baseWidthPx); const finalScale = Math.max(0.8, scale); document.documentElement.style.fontSize = `${16 * finalScale}px`; }
                    else { document.documentElement.style.fontSize = '16px'; }
                };
                window.addEventListener('resize', handleResize); handleResize();
                return () => window.removeEventListener('resize', handleResize);
            }, []);

            const { scriptContent, vocabAndGrammarList, sentences, discussionQuestions } = useMemo(() => {
                const scriptContent = [
                    { id: 's1', speaker: 'ì¬ëŠ¥ë§ˆì¼“ ìš´ì˜ì', kor: 'ê·¸ ì¼ì€ ë³¸ì¸ì´ ì›ë˜ ê¿ˆê¿¨ë˜ ì¼ì¸ê°€ìš”?', eng: "Is that the work you originally dreamed of?" },
                    { id: 's2', speaker: 'ì¬ëŠ¥ë§ˆì¼“ ìš´ì˜ì', kor: 'ë³¸ì¸ì´ ì›ë˜ í•˜ê³  ì‹¶ì—ˆë˜ ì¼ì¸ê°€ìš”?', eng: "Is it the work you originally wanted to do?" },
                    { id: 's3', speaker: 'ì¬ëŠ¥ë§ˆì¼“ ìš´ì˜ì', kor: 'ë¯¸ë˜ì— ë‚˜ëŠ” â€˜ë‚´ê°€ ì´ëŸ° ê²ƒë“¤ì„ í•˜ë©´ì„œ ì‚´ì•„ê°€ê³  ì‹¶ë‹¤â€™í•˜ëŠ” ê²ƒë“¤ì´ ìˆì„ê¹Œìš”?', eng: "In the future, are there things you think 'I want to live my life doing this'?" },
                    { id: 's4', speaker: 'ì¬ëŠ¥ë§ˆì¼“ ìš´ì˜ì', kor: 'ë§Œì•½ì— ì±„ë¦° ë‹˜ì€ ì§€ê¸ˆ êµì‚¬ ì™¸ì— ë‹¤ë¥¸ ê±¸ í•œ ë²ˆ ë‹¹ì¥ í•´ ë³´ê³  ì‹¶ë‹¤ë©´?', eng: "What if, Chaerin, you wanted to try something other than being a teacher right now?" },
                    { id: 's5', speaker: '', kor: 'â€¢ ì—¬ëŸ¬ë¶„ë“¤ì˜ ì›ë˜ ê¿ˆì€ ë¬´ì—‡ì¸ê°€ìš”?', eng: "What were your original dreams?" },
                    { id: 's6', speaker: 'ì—¬ì1', kor: 'ì €ëŠ” ì—¬í–‰ì„ ì¢‹ì•„í•˜ë‹ˆê¹Œ,', eng: "Since I like traveling," },
                    { id: 's7', speaker: 'ì—¬ì1', kor: 'ì—¬í–‰ ìƒí’ˆì„ ë§Œë“¤ì–´ ë³´ê³  ì‹¶ê¸°ë„ í•˜ê³ .', eng: "I'd like to try creating travel products, too." },
                    { id: 's8', speaker: 'ì—¬ì2', kor: 'ì € ê¸€ì“°ê¸° ì¢‹ì•„í•˜ë‹ˆê¹Œ ,', eng: "Since I like writing," },
                    { id: 's9', speaker: 'ì—¬ì2', kor: 'ê¸€ì“°ê¸° ëª¨ì„ì´ë¼ë“ ì§€,', eng: "things like a writing group," },
                    { id: 's10', speaker: 'ì—¬ì2', kor: 'ë„ì „í•˜ê³  ì‹¤í—˜í•˜ëŠ” ì´ëŸ° ì €ì˜ íŠ¹ì„±ì„ ì˜ ì‚´ë¦¬ëŠ” ë°ë¡œ ê°€ê³  ì‹¶ë‹¤.', eng: "I want to go in a direction that makes good use of my characteristics of challenging and experimenting." },
                    { id: 's11', speaker: 'ì—¬ì3', kor: 'í•˜ë‚˜ë¥¼ ê¾¸ì¤€íˆ í•˜ì§€ ì•Šì•˜ë˜ ê²ƒ ê°™ì•„ìš”.', eng: "I don't think I've consistently done one thing." },
                    { id: 's12', speaker: 'ì—¬ì3', kor: 'ê·¸ëƒ¥ ê³„ì† ë°”ê¿”ì„œ.', eng: "I just kept changing." },
                    { id: 's13', speaker: 'ì¬ëŠ¥ë§ˆì¼“ ìš´ì˜ì', kor: 'ì°ë¨¹ì„ ì¢‹ì•„í•˜ì‹œëŠ”â€¦ (ì‚¬ëŒì´ì—ìš”?)', eng: "You like to 'dip'...? (Are you that kind of person?)" },
                    { id: 's14', speaker: 'ì—¬ì3', kor: 'ì €ëŠ” ë„ˆë¬´ ì°ë¨¹íŒŒì—¬ì„œ.', eng: "I'm very much a 'dipper'." },
                    { id: 's15', speaker: 'ì¬ëŠ¥ë§ˆì¼“ ìš´ì˜ì', kor: 'íƒ•ìˆ˜ìœ¡ë„ ì°ë¨¹.', eng: "Sweet and sour pork, 'dipping' too." },
                    { id: 's16', speaker: 'ì—¬ì3', kor: 'ë„ˆë¬´ ì°ë¨¹. íƒ•ìˆ˜ìœ¡ë„ ì°ë¨¹ì´ì—ìš”.', eng: "So much dipping. My sweet and sour pork is 'dipping' too." },
                    { id: 's17', speaker: 'ë‚¨ì1', kor: 'ì„¸ìƒì´ ì•„ë¬´ë¦¬ í˜ë“¤ì–´ë„,', eng: "No matter how hard the world is," },
                    { id: 's18', speaker: 'ë‚¨ì1', kor: 'ëˆ„êµ°ê°€ëŠ” ì²­ì†Œë¥¼ í•´ì•¼ ë˜ê³ ,', eng: "someone has to do the cleaning," },
                    { id: 's19', speaker: 'ë‚¨ì1', kor: 'ì²­ì†Œê°€ ê·¸ ë§Œí¼ ì§€ê¸ˆ ì¸ì‹ì„ ê³„ì† ë°”ê¿”ê°€ê³  ê³„ì‹œì–ì•„ìš”.', eng: "and cleaning... you're continuously changing the perception of it that much, you know." },
                    { id: 's20', speaker: 'ë‚¨ì1', kor: 'ê·¸ëŸ° ê²ƒë“¤ì„ í†µí•´ì„œ ì¸ì‹ì´ ë°”ë€Œì—ˆìœ¼ë‹ˆê¹Œ', eng: "Since perceptions have changed through those things," },
                    { id: 's21', speaker: 'ë‚¨ì1', kor: 'â€˜ë‚´ê°€ ë˜ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì„ ë°”ê¿”ì¤„ ìˆ˜ ìˆê² ë‹¤â€™ëŠ” ìƒê°ë„ ìˆì–´ì„œ.', eng: "I also have the thought that 'I can change other people too'." },
                    { id: 's22', speaker: 'ì—¬ì4', kor: 'ê·¸ëƒ¥ ë§‰ ê±°ëŒ€í•œ ê±´ ì•„ë‹Œë°,', eng: "It's not something huge or anything," },
                    { id: 's23', speaker: 'ì—¬ì4', kor: 'ê·¸ëƒ¥ ì†Œì†Œí•˜ê²Œ í‰ì†Œì— í•˜ê³  ì‹¶ë˜ ê±° í•˜ë©´ì„œ', eng: "just doing the small things I usually wanted to do" },
                    { id: 's24', speaker: 'ì—¬ì4', kor: 'ì¸ìƒì„ ì¦ê¸°ëŠ” ê²Œ ë§ë‹¤ê³  (ìƒê°í•´ìš”)', eng: "I think enjoying life is what's right." },
                    { id: 's25', speaker: 'ì—¬ì4', kor: 'ë‚­ë§Œì„ ì¢‹ì•„í•´ê°€ì§€êµ¬.', eng: "because I like romance." },
                    { id: 's26', speaker: 'ë‚¨ì2', kor: 'ê·¸ë˜ì„œ ì´ì œ â€œê·¸ëƒ¥ ë­”ê°€ í•´ ë³´ê³  ì‹¶ì€ ê±° í•´ ë³´ìâ€.', eng: "So now, 'Let's just try something we want to do'." },
                    { id: 's27', speaker: 'ë‚¨ì2', kor: 'ì´ë ‡ê²Œ í•´ì„œ ì‹œì‘í•˜ê²Œ ëœ ê²ƒ ê°™ì•„ìš”.', eng: "I think that's how I got started." },
                    { id: 's28', speaker: '', kor: 'â€¢ Just do it!', eng: "Just do it!" },
                    { id: 's29', speaker: '', kor: 'â€¢ ëª¨ë‘ë¥¼ ì‘ì›í•©ë‹ˆë‹¤ -ì²œì›ì˜ ì¬ëŠ¥ë§ˆì¼“-', eng: "Cheering for everyone - 1000 Won Talent Market-" }
                ];
                
                const vocabAndGrammarList = [
                { "term": "ì¬ëŠ¥", "mainDef": "talent; ability; skill.", "subDefs": [], "variants": ["ì¬ëŠ¥"] },
                { "term": "ìš´ì˜ì", "mainDef": "operator; manager.", "subDefs": [], "variants": ["ìš´ì˜ì"] },
                { "term": "ë³¸ì¸ì´ ì›ë˜ ê¿ˆê¿¨ë˜ ì¼", "mainDef": "The work you (yourself) originally dreamed of", "subDefs": [ { "subTerm": "â€¢ ë³¸ì¸", "subDef": "oneself; (you) yourself." }, { "subTerm": "â€¢ ì›ë˜", "subDef": "originally." }, { "subTerm": "â€¢ ê¿ˆê¾¸ë‹¤", "subDef": "to dream (of)." }, { "subTerm": "â€¢ -ì•˜ë˜/ì—ˆë˜", "subDef": "used to describe a past action or state that describes the following noun (retrospective); 'that (one) ...-ed'." } ], "variants": ["ë³¸ì¸ì´ ì›ë˜ ê¿ˆê¿¨ë˜ ì¼"] },
                { "term": "-ì¸ê°€ìš”?", "mainDef": "Is it...? (polite question)", "subDefs": [ { "subTerm": "â€¢ -(ìœ¼)ã„´ê°€ìš”? / -ì´ë‚˜ìš”?", "subDef": "A polite question ending used with descriptive verbs, ì´ë‹¤, or ì•„ë‹ˆë‹¤." } ], "variants": ["ì¸ê°€ìš”"] },
                { "term": "ë³¸ì¸ì´ ì›ë˜ í•˜ê³  ì‹¶ì—ˆë˜ ì¼", "mainDef": "The work you (yourself) originally wanted to do.", "subDefs": [ { "subTerm": "â€¢ ë³¸ì¸", "subDef": "oneself; (you) yourself." }, { "subTerm": "â€¢ ì›ë˜", "subDef": "originally." }, { "subTerm": "â€¢ í•˜ê³  ì‹¶ë‹¤", "subDef": "to want to do." }, { "subTerm": "â€¢ -ì•˜ë˜/ì—ˆë˜", "subDef": "used to describe a past action or state that describes the following noun (retrospective); 'that (one) ...-ed'." } ], "variants": ["ë³¸ì¸ì´ ì›ë˜ í•˜ê³  ì‹¶ì—ˆë˜ ì¼"] },
                { "term": "ë‚´ê°€ ì´ëŸ° ê²ƒë“¤ì„ í•˜ë©´ì„œ", "mainDef": "while I do these kinds of things...", "subDefs": [ { "subTerm": "â€¢ ì´ëŸ° ê²ƒ", "subDef": "this kind of thing." }, { "subTerm": "â€¢ -(ìœ¼)ë©´ì„œ", "subDef": "\"while (doing); as (one) does.\"; used to indicate simultaneous actions." } ], "variants": ["ë‚´ê°€ ì´ëŸ° ê²ƒë“¤ì„ í•˜ë©´ì„œ"] },
                { "term": "ì‚´ì•„ê°€ê³  ì‹¶ë‹¤", "mainDef": "(I) want to live on; (I) want to go on living.", "subDefs": [ { "subTerm": "â€¢ ì‚´ì•„ê°€ë‹¤", "subDef": "to live on; to go on living." } ], "variants": ["ì‚´ì•„ê°€ê³  ì‹¶ë‹¤"] },
                { "term": "í•˜ëŠ” ê²ƒ", "mainDef": "the thing(s) that (one) does; the act of doing.", "subDefs": [ { "subTerm": "â€¢ -ëŠ” ê²ƒ", "subDef": "A colloquial form of -ëŠ” ê²ƒ, used to nominalize verbs by turning a verb into a noun phrase meaning â€œthe act of â€¦,â€ â€œthe fact of â€¦,â€ or â€œthe thing that â€¦â€" } ], "variants": ["í•˜ëŠ” ê²ƒ", "í•˜ëŠ” ê²ƒë“¤ì´"] },
                { "term": "ë§Œì•½ì—", "mainDef": "if; in case that.", "subDefs": [], "variants": ["ë§Œì•½ì—"] },
                { "term": "êµì‚¬ ì™¸ì—", "mainDef": "besides (being) a teacher; other than a teacher.", "subDefs": [ { "subTerm": "â€¢ êµì‚¬", "subDef": "teacher." }, { "subTerm": "â€¢ ì™¸ì—", "subDef": "besides; other than; except for." } ], "variants": ["êµì‚¬ ì™¸ì—"] },
                { "term": "ë‹¤ë¥¸ ê±¸", "mainDef": "something else; a different thing.", "subDefs": [], "variants": ["ë‹¤ë¥¸ ê±¸"] },
                { "term": "ë‹¹ì¥", "mainDef": "right now; immediately.", "subDefs": [], "variants": ["ë‹¹ì¥"] },
                { "term": "í•´ ë³´ê³  ì‹¶ë‹¤ë©´", "mainDef": "if (you) want to try doing (it).", "subDefs": [ { "subTerm": "â€¢ í•´ ë³´ë‹¤", "subDef": "to try doing (í•˜ë‹¤ + -ì•„/ì–´ ë³´ë‹¤)." }, { "subTerm": "â€¢ -ê³  ì‹¶ë‹¤", "subDef": "\"to want to...\"" }, { "subTerm": "â€¢ -(ìœ¼)ë©´", "subDef": "\"if...\"; conditional particle." } ], "variants": ["í•´ ë³´ê³  ì‹¶ë‹¤ë©´"] },
                { "term": "ì›ë˜", "mainDef": "originally; by nature.", "subDefs": [], "variants": ["ì›ë˜"] },
                { "term": "ê¿ˆ", "mainDef": "dream.", "subDefs": [], "variants": ["ê¿ˆ", "ê¿ˆì€"] },
                { "term": "ì¢‹ì•„í•˜ë‹ˆê¹Œ", "mainDef": "because (I) like (it).", "subDefs": [ { "subTerm": "â€¢ -(ìœ¼)ë‹ˆê¹Œ", "subDef": "\"because...\" or \"since...\"; used to state a reason or cause." } ], "variants": ["ì¢‹ì•„í•˜ë‹ˆê¹Œ"] },
                { "term": "ì—¬í–‰ ìƒí’ˆ", "mainDef": "travel product; tour package.", "subDefs": [], "variants": ["ì—¬í–‰ ìƒí’ˆ", "ì—¬í–‰ ìƒí’ˆì„"] },
                { "term": "ë§Œë“¤ì–´ ë³´ê³  ì‹¶ê¸°ë„ í•˜ê³ ", "mainDef": "(I) also want to try making (it), and...", "subDefs": [ { "subTerm": "â€¢ -ì•„/ì–´ ë³´ë‹¤", "subDef": "\"to try (doing something).\"" }, { "subTerm": "â€¢ -ê³  ì‹¶ë‹¤", "subDef": "\"to want to...\"" }, { "subTerm": "â€¢ -ê¸°ë„ í•˜ë‹¤", "subDef": "\"to also (do something); sometimes (do something).\"" } ], "variants": ["ë§Œë“¤ì–´ ë³´ê³  ì‹¶ê¸°ë„ í•˜ê³ "] },
                { "term": "ê¸€ì“°ê¸° ëª¨ì„ì´ë¼ë“ ì§€", "mainDef": "(something) like a writing group, or...", "subDefs": [ { "subTerm": "â€¢ ê¸€ì“°ê¸°", "subDef": "writing." }, { "subTerm": "â€¢ ëª¨ì„", "subDef": "meeting; group." }, { "subTerm": "â€¢ -(ì´)ë¼ë“ ì§€", "subDef": "\"or (something) like...; such as...\"" } ], "variants": ["ê¸€ì“°ê¸° ëª¨ì„ì´ë¼ë“ ì§€"] },
                { "term": "ë„ì „í•˜ê³  ì‹¤í—˜í•˜ëŠ” ì´ëŸ° ì €ì˜ íŠ¹ì„±", "mainDef": "this characteristic of mine (that is) challenging and experimenting.", "subDefs": [ { "subTerm": "â€¢ ë„ì „í•˜ë‹¤", "subDef": "to challenge; to try." }, { "subTerm": "â€¢ ì‹¤í—˜í•˜ë‹¤", "subDef": "to experiment." }, { "subTerm": "â€¢ -ëŠ”", "subDef": "used to turn a present-tense verb into an â€œadjective-ishâ€ phrase that describes the following noun" }, { "subTerm": "â€¢ íŠ¹ì„±", "subDef": "characteristic; trait." } ], "variants": ["ë„ì „í•˜ê³  ì‹¤í—˜í•˜ëŠ” ì´ëŸ° ì €ì˜ íŠ¹ì„±"] },
                { "term": "ì˜ ì‚´ë¦¬ëŠ” ë°ë¡œ ê°€ê³  ì‹¶ë‹¤", "mainDef": "(I) want to go in a direction that utilizes (it) well.", "subDefs": [ { "subTerm": "â€¢ ì‚´ë¦¬ë‹¤", "subDef": "to make use of; to utilize; to bring to life." }, { "subTerm": "â€¢ -ëŠ” ë°", "subDef": "\"a place where...; a direction where...; the act of...\"" } ], "variants": ["ì˜ ì‚´ë¦¬ëŠ” ë°ë¡œ ê°€ê³  ì‹¶ë‹¤"] },
                { "term": "ê¾¸ì¤€íˆ í•˜ì§€ ì•Šì•˜ë˜ ê²ƒ ê°™ì•„ìš”", "mainDef": "I don't think I did (it) consistently.", "subDefs": [ { "subTerm": "â€¢ ê¾¸ì¤€íˆ í•˜ë‹¤", "subDef": "to do (something) consistently." }, { "subTerm": "â€¢ -ì•˜ë˜/-ì—ˆë˜ ê²ƒ ê°™ì•„ìš”", "subDef": "\"It seems like...; I think that...\" combined with a past retrospective action." } ], "variants": ["ê¾¸ì¤€íˆ í•˜ì§€ ì•Šì•˜ë˜ ê²ƒ ê°™ì•„ìš”"] },
                { "term": "ê³„ì† ë°”ê¿”ì„œ", "mainDef": "(I) keep changing (it), so...", "subDefs": [ { "subTerm": "â€¢ ê³„ì†", "subDef": "continuously." }, { "subTerm": "â€¢ ë°”ê¾¸ë‹¤", "subDef": "to change (something)." }, { "subTerm": "â€¢ -ì•„ì„œ/ì–´ì„œ", "subDef": "used when the first action is a necessary step for the second action to happen, or when the first action directly influences the second." } ], "variants": ["ê³„ì† ë°”ê¿”ì„œ"] },
                { "term": "ì°ë¨¹ì„ ì¢‹ì•„í•˜ì‹œëŠ”", "mainDef": "(someone) who likes to 'dabble' (try various things superficially)", "subDefs": [ { "subTerm": "â€¢ ì°ë¨¹", "subDef": "(Figurative) To 'dabble' in various activities/fields superficially, as opposed to committing deeply." }, { "subTerm": "â€¢ -ëŠ”", "subDef": "used to turn a present-tense verb into an â€œadjective-ishâ€ phrase that describes the following noun" } ], "variants": ["ì°ë¨¹ì„ ì¢‹ì•„í•˜ì‹œëŠ”"] },
                { "term": "ì°ë¨¹íŒŒì—¬ì„œ", "mainDef": "because (I) am 'Team Dabble'.", "subDefs": [ { "subTerm": "â€¢ ì°ë¨¹íŒŒ", "subDef": "'jjikmeok-pa' (Team Dabble); someone who tries many things superficially ('pa' means faction/group)." }, { "subTerm": "â€¢ -ì´ì–´ì„œ/ì—¬ì„œ", "subDef": "used to connect clauses indicating cause or reason (\"becauseâ€¦\") (used with ì´ë‹¤/ì•„ë‹ˆë‹¤)." } ], "variants": ["ì°ë¨¹íŒŒì—¬ì„œ"] },
                { "term": "íƒ•ìˆ˜ìœ¡", "mainDef": "tangsuyuk (sweet and sour pork).", "subDefs": [], "variants": ["íƒ•ìˆ˜ìœ¡", "íƒ•ìˆ˜ìœ¡ë„"] },
                { "term": "ì°ë¨¹", "mainDef": "'jjikmeok' (slang: dipping food in sauce).", "subDefs": [ { "subTerm": "â€¢ (Literal)", "subDef": "The act of dipping food (like tangsuyuk) into sauce, as opposed to pouring the sauce over it (ë¶€ë¨¹)." } ], "variants": ["ì°ë¨¹", "ì°ë¨¹.", "ì°ë¨¹ì´ì—ìš”"] },
                { "term": "ì•„ë¬´ë¦¬ í˜ë“¤ì–´ë„", "mainDef": "no matter how hard (it is).", "subDefs": [ { "subTerm": "â€¢ ì•„ë¬´ë¦¬ -ì•„ë„/ì–´ë„", "subDef": "\"even if...\" or \"even though...\"; used to express concession (stronger form: \"no matter how...\")." } ], "variants": ["ì•„ë¬´ë¦¬ í˜ë“¤ì–´ë„"] },
                { "term": "ëˆ„êµ°ê°€", "mainDef": "someone; somebody.", "subDefs": [], "variants": ["ëˆ„êµ°ê°€", "ëˆ„êµ°ê°€ëŠ”"] },
                { "term": "ê·¸ë§Œí¼", "mainDef": "that much; to that extent.", "subDefs": [], "variants": ["ê·¸ë§Œí¼"] },
                { "term": "ì¸ì‹ì„ ê³„ì† ë°”ê¿”ê°€ê³  ê³„ì‹œì–ì•„ìš”.", "mainDef": "(you) are continuously changing the perception, you know.", "subDefs": [ { "subTerm": "â€¢ ì¸ì‹", "subDef": "perception; awareness." }, { "subTerm": "â€¢ ê³„ì†", "subDef": "continuously." }, { "subTerm": "â€¢ ë°”ê¿”ê°€ë‹¤", "subDef": "to (continuously) change (something) (ë°”ê¾¸ë‹¤ + -ì•„/ì–´ ê°€ë‹¤)." }, { "subTerm": "â€¢ -ê³  ê³„ì‹œë‹¤", "subDef": "honorific form of -ê³  ìˆë‹¤ (present progressive 'is ...-ing')." }, { "subTerm": "â€¢ -ì–ì•„ìš”", "subDef": "used to remind the listener of shared or obvious information, or to emphasize that something is already known" } ], "variants": ["ì¸ì‹ì„ ê³„ì† ë°”ê¿”ê°€ê³  ê³„ì‹œì–ì•„ìš”"] },
                { "term": "ê·¸ëŸ° ê²ƒë“¤ì„ í†µí•´ì„œ", "mainDef": "through those kinds of things.", "subDefs": [ { "subTerm": "â€¢ ê·¸ëŸ° ê²ƒ", "subDef": "that kind of thing." }, { "subTerm": "â€¢ í†µí•´ì„œ", "subDef": "through; by way of." } ], "variants": ["ê·¸ëŸ° ê²ƒë“¤ì„ í†µí•´ì„œ"] },
                { "term": "ì¸ì‹ì´ ë°”ë€Œì—ˆìœ¼ë‹ˆê¹Œ", "mainDef": "because the perception changed.", "subDefs": [ { "subTerm": "â€¢ ì¸ì‹", "subDef": "perception; awareness." }, { "subTerm": "â€¢ ë°”ë€Œë‹¤", "subDef": "to be changed (passive)." }, { "subTerm": "â€¢ -(ìœ¼)ë‹ˆê¹Œ", "subDef": "\"because...\" or \"since...\"; used to state a reason or cause." } ], "variants": ["ì¸ì‹ì´ ë°”ë€Œì—ˆìœ¼ë‹ˆê¹Œ"] },
                { "term": "ë°”ê¿”ì¤„ ìˆ˜ ìˆê² ë‹¤", "mainDef": "(I) think (I) can change (it) for (them).", "subDefs": [ { "subTerm": "â€¢ ë°”ê¿” ì£¼ë‹¤", "subDef": "to change (something) for (someone)." }, { "subTerm": "â€¢ -ã„¹ ìˆ˜ ìˆë‹¤", "subDef": "\"can; to be able to.\"" }, { "subTerm": "â€¢ -ê² ë‹¤", "subDef": "used to express assumption or guess about something that seems likely, often translated as â€œI think â€¦ will â€¦â€" } ], "variants": ["ë°”ê¿”ì¤„ ìˆ˜ ìˆê² ë‹¤â€™ëŠ”", "ë°”ê¿”ì¤„ ìˆ˜ ìˆê² ë‹¤"] },
                { "term": "-ëŠ” ìƒê°ë„ ìˆì–´ì„œ", "mainDef": "(I) also have the thought that..., so...", "subDefs": [ { "subTerm": "â€¢ -ëŠ” ìƒê°ì´ ìˆë‹¤", "subDef": "to have the thought that..." }, { "subTerm": "â€¢ -ì•„ì„œ/ì–´ì„œ", "subDef": "used to connect clauses indicating cause or reason (\"becauseâ€¦\")" } ], "variants": ["â€™ëŠ” ìƒê°ë„ ìˆì–´ì„œ", "ëŠ” ìƒê°ë„ ìˆì–´ì„œ"] },
                { "term": "ë§‰", "mainDef": "just (filler word); strongly; carelessly.", "subDefs": [], "variants": ["ë§‰"] },
                { "term": "ê±°ëŒ€í•œ ê±´", "mainDef": "a huge thing (is)...", "subDefs": [ { "subTerm": "â€¢ ê±°ëŒ€í•˜ë‹¤", "subDef": "to be huge; giant." }, { "subTerm": "â€¢ -ã„´/ì€ ê±´", "subDef": "A colloquial form of -ã„´/ì€ ê²ƒì€, (-(ìœ¼)ã„´: used to turn a descriptive verb... into an â€œadjective-ishâ€ phrase) + (-ê²ƒ: used to nominalize... \"the thing that ...\")" } ], "variants": ["ê±°ëŒ€í•œ ê±´"] },
                { "term": "ì†Œì†Œí•˜ê²Œ", "mainDef": "small (things); simple (things) (adverb).", "subDefs": [], "variants": ["ì†Œì†Œí•˜ê²Œ"] },
                { "term": "í‰ì†Œì— í•˜ê³  ì‹¶ë˜ ê±° í•˜ë©´ì„œ", "mainDef": "while doing the things (I) usually wanted to do.", "subDefs": [ { "subTerm": "â€¢ í‰ì†Œì—", "subDef": "usually; ordinarily." }, { "subTerm": "â€¢ -ë˜ ê±°", "subDef": "colloial form of -ë˜ ê²ƒ; 'the thing(s) one used to do/want'." }, { "subTerm": "â€¢ -(ìœ¼)ë©´ì„œ", "subDef": "\"while (doing); as (one) does.\"" } ], "variants": ["í‰ì†Œì— í•˜ê³  ì‹¶ë˜ ê±° í•˜ë©´ì„œ"] },
                { "term": "ì¸ìƒì„ ì¦ê¸°ëŠ” ê²Œ", "mainDef": "enjoying life (is)...", "subDefs": [ { "subTerm": "â€¢ ì¸ìƒ", "subDef": "life." }, { "subTerm": "â€¢ ì¦ê¸°ë‹¤", "subDef": "to enjoy." }, { "subTerm": "â€¢ -ëŠ” ê²Œ", "subDef": "A colloquial form of -ëŠ” ê²ƒ, used to nominalize verbs by turning a verb into a noun phrase meaning â€œthe act of â€¦,â€ â€œthe fact of â€¦,â€ or â€œthe thing that â€¦â€" } ], "variants": ["ì¸ìƒì„ ì¦ê¸°ëŠ” ê²Œ"] },
                { "term": "ë§ë‹¤ê³  (ìƒê°í•´ìš”)", "mainDef": "(I think) that (it's) right.", "subDefs": [ { "subTerm": "â€¢ -ê³  ìƒê°í•˜ë‹¤", "subDef": "\"to think that...\"" } ], "variants": ["ë§ë‹¤ê³  (ìƒê°í•´ìš”)"] },
                { "term": "ë‚­ë§Œ", "mainDef": "romance (in the sense of romanticism, ideals).", "subDefs": [], "variants": ["ë‚­ë§Œ", "ë‚­ë§Œì„"] },
                { "term": "ì¢‹ì•„í•´ê°€ì§€êµ¬.", "mainDef": "because (I) like (it) (colloial).", "subDefs": [ { "subTerm": "â€¢ -ì•„ê°€ì§€êµ¬/-ì–´ê°€ì§€êµ¬", "subDef": "colloial form of -ì•„ì„œ/ì–´ì„œ; used to connect clauses indicating cause or reason (\"becauseâ€¦\")." } ], "variants": ["ì¢‹ì•„í•´ê°€ì§€êµ¬"] },
                { "term": "ë­”ê°€ í•´ ë³´ê³  ì‹¶ì€ ê±°", "mainDef": "something (I) want to try doing.", "subDefs": [ { "subTerm": "â€¢ í•´ ë³´ë‹¤", "subDef": "to try doing." }, { "subTerm": "â€¢ -ê³  ì‹¶ë‹¤", "subDef": "\"to want to...\"" }, { "subTerm": "â€¢ -(ìœ¼)ã„´ ê±°", "subDef": "colloial form of -(ìœ¼)ã„´ ê²ƒ (-(ìœ¼)ã„´: used to turn a descriptive verb... into an â€œadjective-ishâ€ phrase) + (-ê²ƒ: used to nominalize... \"the thing that ...\")" } ], "variants": ["ë­”ê°€ í•´ ë³´ê³  ì‹¶ì€ ê±°"] },
                { "term": "ì´ë ‡ê²Œ í•´ì„œ", "mainDef": "by doing this; so (lit. 'doing this and...');", "subDefs": [ { "subTerm": "â€¢ ì´ë ‡ê²Œ í•˜ë‹¤", "subDef": "to do (it) like this." } ], "variants": ["ì´ë ‡ê²Œ í•´ì„œ"] },
                { "term": "ì‹œì‘í•˜ê²Œ ëœ ê²ƒ ê°™ì•„ìš”", "mainDef": "I think that's how (I) came to start.", "subDefs": [ { "subTerm": "â€¢ -ê²Œ ë˜ë‹¤", "subDef": "\"to come to (do); to end up (doing).\"" }, { "subTerm": "â€¢ -ã„´/ì€ ê²ƒ ê°™ë‹¤", "subDef": "\"seems like...\" or \"looks like...\"; used to express an assumption or guess.\"" } ], "variants": ["ì‹œì‘í•˜ê²Œ ëœ ê²ƒ ê°™ì•„ìš”"] }
                ];
                
                const sentences = [
                    { id: 1, parts: ["ìš´ì˜ìëŠ” ì‚¬ëŒë“¤ì—ê²Œ â€˜ì§€ê¸ˆ í•˜ëŠ” ì¼ì´ ", " í•˜ê³  ì‹¶ì—ˆë˜ ì¼ì´ì—ìš”â€™ë¼ê³  ë¬¼ì–´ë´¤ì–´ìš”."], answer: "ì›ë˜", bank: ["ì›ë˜", "ê³„ì†", "ë‹¹ì¥", "ì•„ë¬´ë¦¬"], eng_parts: ["The operator asked people, 'Is the job you're doing now what you ", " wanted to do?'"], eng_answer: "originally", eng_hint: "(ë¶€ì‚¬) ì²˜ìŒë¶€í„°. (Adverb) Originally; from the beginning.", eng_explanation: "Correct. 'ì›ë˜' means 'originally'. The operator is asking about their original dream.", eng_wrongAnswerExplanations: { "ê³„ì†": "'ê³„ì†' means 'continuously'.", "ë‹¹ì¥": "'ë‹¹ì¥' means 'right now'.", "ì•„ë¬´ë¦¬": "'ì•„ë¬´ë¦¬' means 'no matter how'." } },
                    { id: 2, parts: ["í•œ ì—¬ìëŠ” ìì‹ ì˜ ", "ì„ ì˜ ì‚´ë¦¬ëŠ” ì¼ì„ í•˜ê³  ì‹¶ë‹¤ê³  ë§í–ˆì–´ìš”."], answer: "íŠ¹ì„±", bank: ["íŠ¹ì„±", "ê¿ˆ", "ì¸ìƒ", "íŒ¨ì…˜"], eng_parts: ["One woman said she wants to do a job that utilizes her ", " well."], eng_answer: "characteristics", eng_hint: "(ëª…ì‚¬) íŠ¹ë³„í•œ ì„±ì§ˆ. (Noun) A special characteristic or trait.", eng_explanation: "Correct. The participant wants a job that 'íŠ¹ì„±ì„ ì˜ ì‚´ë¦¬ëŠ”' (makes good use of her characteristics).", eng_wrongAnswerExplanations: { "ê¿ˆ": "'ê¿ˆ' means 'dream'.", "ì¸ìƒ": "'ì¸ìƒ' means 'life'.", "íŒ¨ì…˜": "'íŒ¨ì…˜' means 'fashion'." } },
                    { id: 3, parts: ["ê·¸ë…€ëŠ” ", " ì‹¤í—˜í•˜ëŠ” ìì‹ ì˜ íŠ¹ì„±ì„ ì‚´ë¦¬ê³  ì‹¶ì–´ í–ˆì–´ìš”."], answer: "ë„ì „í•˜ê³ ", bank: ["ë„ì „í•˜ê³ ", "ì—°ìŠµí•˜ê³ ", "ì—¬í–‰í•˜ê³ ", "ê¾¸ë¯¸ê³ "], eng_parts: ["She wanted to utilize her characteristic of '", " and experimenting.'"], eng_answer: "challenging", eng_hint: "(ë™ì‚¬) ì–´ë ¤ìš´ ì¼ì— ë§ì„œë‹¤. (Verb) To challenge; to try new things.", eng_explanation: "Correct. The participant describes her characteristic as 'ë„ì „í•˜ê³  ì‹¤í—˜í•˜ëŠ”' (challenging and experimenting).", eng_wrongAnswerExplanations: { "ì—°ìŠµí•˜ê³ ": "'ì—°ìŠµí•˜ê³ ' means 'practicing'.", "ì—¬í–‰í•˜ê³ ": "'ì—¬í–‰í•˜ê³ ' means 'traveling'.", "ê¾¸ë¯¸ê³ ": "'ê¾¸ë¯¸ê³ ' means 'decorating'." } },
                    { id: 4, parts: ["ë‹¤ë¥¸ ì—¬ìëŠ” í•œ ê°€ì§€ ì¼ì„ ", " í•˜ì§€ ì•ŠëŠ” 'ì°ë¨¹íŒŒ'ë¼ê³  ë§í–ˆì–´ìš”."], answer: "ê¾¸ì¤€íˆ", bank: ["ê¾¸ì¤€íˆ", "ì—´ì‹¬íˆ", "ë¹¨ë¦¬", "ì˜¤ë˜"], eng_parts: ["Another woman said she is 'Team Dip' (jjikmeok-pa), who doesn't do one thing '", "'."], eng_answer: "consistently", eng_hint: "(ë¶€ì‚¬) ëŠì´ì§€ ì•Šê³  ê³„ì†. (Adverb) Steadily; consistently.", eng_explanation: "Correct. She says, 'í•˜ë‚˜ë¥¼ ê¾¸ì¤€íˆ í•˜ì§€ ì•Šì•˜ë˜ ê²ƒ ê°™ì•„ìš”' (I don't think I did one thing consistently).", eng_wrongAnswerExplanations: { "ì—´ì‹¬íˆ": "'ì—´ì‹¬íˆ' means 'hard', but the point is consistency.", "ë¹¨ë¦¬": "'ë¹¨ë¦¬' means 'quickly'.", "ì˜¤ë˜": "'ì˜¤ë˜' means 'for a long time', which is similar but 'ê¾¸ì¤€íˆ' is the exact word used." } },
                    { id: 5, parts: ["ê·¸ë…€ëŠ” ì¼ì„ ", " ë°”ê¾¸ëŠ” ê²ƒì„ ì¢‹ì•„í•´ìš”."], answer: "ê³„ì†", bank: ["ê³„ì†", "ê°€ë”", "ì¡°ê¸ˆ", "ë‹¹ì¥"], eng_parts: ["She likes to '", "' change her work/interests."], eng_answer: "continuously", eng_hint: "(ë¶€ì‚¬) ëŠì´ì§€ ì•Šê³ . (Adverb) Continuously.", eng_explanation: "Correct. As a 'Team Dip' person, she 'ê³„ì†' (continuously) changes what she is doing.", eng_wrongAnswerExplanations: { "ê°€ë”": "'ê°€ë”' means 'sometimes'.", "ì¡°ê¸ˆ": "'ì¡°ê¸ˆ' means 'a little'.", "ë‹¹ì¥": "'ë‹¹ì¥' means 'right now'." } },
                    { id: 6, parts: ["ë˜ ë‹¤ë¥¸ ì—¬ìëŠ” ì—¬í–‰ì„ ì¢‹ì•„í•´ì„œ ì—¬í–‰ ìƒí’ˆì„ ë§Œë“œëŠ” ì¼ì´ ", " ì¼ì´ë¼ê³  ë§í–ˆì–´ìš”."], answer: "ê¿ˆê¿¨ë˜", bank: ["ê¿ˆê¿¨ë˜", "ì‹œì‘í–ˆë˜", "ì¢‹ì•„í–ˆë˜", "ê·¸ë§Œë’€ë˜"], eng_parts: ["Another woman, who likes to travel, said that making travel products is the job she '", "'."], eng_answer: "dreamed of", eng_hint: "(ë™ì‚¬) ê¿ˆê¾¸ë‹¤ì˜ ê³¼ê±°. (Verb) Past tense of 'to dream'.", eng_explanation: "Correct. 'ê¿ˆê¿¨ë˜' is the past tense modifier form of 'ê¿ˆê¾¸ë‹¤' (to dream). She is connecting her interest to a past dream.", eng_wrongAnswerExplanations: { "ì‹œì‘í–ˆë˜": "'ì‹œì‘í–ˆë˜' means 'had started'.", "ì¢‹ì•„í–ˆë˜": "'ì¢‹ì•„í–ˆë˜' means 'had liked'.", "ê·¸ë§Œë’€ë˜": "'ê·¸ë§Œë’€ë˜' means 'had quit'." } },
                    { id: 7, parts: ["í•œ ë‚¨ìëŠ” ìì‹ ì˜ ì¼ì„ í†µí•´ ì²­ì†Œì— ëŒ€í•œ ì‚¬ëŒë“¤ì˜ ", "ì„ ë°”ê¾¸ê³  ìˆë‹¤ê³  ìƒê°í•´ìš”."], answer: "ì¸ì‹", bank: ["ì¸ì‹", "ê¿ˆ", "íŠ¹ì„±", "ì¸ìƒ"], eng_parts: ["One man thinks he is changing people's '", "' of cleaning through his work."], eng_answer: "perception", eng_hint: "(ëª…ì‚¬) ë¬´ì–¸ê°€ë¥¼ ì–´ë–»ê²Œ ìƒê°í•˜ëŠ”ì§€. (Noun) Perception; awareness.", eng_explanation: "Correct. He says he is changing the 'ì¸ì‹' (perception) of cleaning.", eng_wrongAnswerExplanations: { "ê¿ˆ": "'ê¿ˆ' means 'dream'.", "íŠ¹ì„±": "'íŠ¹ì„±' means 'characteristic'.", "ì¸ìƒ": "'ì¸ìƒ' means 'life'." } },
                    { id: 8, parts: ["ì™œëƒí•˜ë©´ ì„¸ìƒì´ ", " í˜ë“¤ì–´ë„ ëˆ„êµ°ê°€ëŠ” ì²­ì†Œë¥¼ í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì´ì—ìš”."], answer: "ì•„ë¬´ë¦¬", bank: ["ì•„ë¬´ë¦¬", "ê³„ì†", "ì›ë˜", "ë„ˆë¬´"], eng_parts: ["Because '", " hard the world is,' someone has to clean."], eng_answer: "no matter how", eng_hint: "(ë¬¸ë²•) '...-ì•„ë„/ì–´ë„'ì™€ í•¨ê»˜ ì“°ì—¬ 'no matter how...'ë¥¼ ì˜ë¯¸í•´ìš”. (Grammar) Used with '-ì•„ë„/ì–´ë„' to mean 'no matter how...'", eng_explanation: "Correct. 'ì•„ë¬´ë¦¬ -ì•„ë„/ì–´ë„' is a grammar pattern meaning 'no matter how...'.", eng_wrongAnswerExplanations: { "ê³„ì†": "'ê³„ì†' means 'continuously'.", "ì›ë˜": "'ì›ë˜' means 'originally'.", "ë„ˆë¬´": "'ë„ˆë¬´' means 'too' (e.g., ë„ˆë¬´ í˜ë“¤ì–´ë„)." } },
                    { id: 9, parts: ["ë°˜ë©´ì—, ì–´ë–¤ ì—¬ìëŠ” â€˜ê·¸ëƒ¥ í‰ì†Œì— ", "ì„ í•˜ë©´ì„œ ì¸ìƒì„ ì¦ê¸°ëŠ” ê²Œ ë§ë‹¤â€™ê³  ë§í–ˆì–´ìš”."], answer: "í•´ ë³´ê³  ì‹¶ì€ ê²ƒ", bank: ["í•´ ë³´ê³  ì‹¶ì€ ê²ƒ", "ì‚¬ ë³´ê³  ì‹¶ì€ ê²ƒ", "ê°€ ë³´ê³  ì‹¶ì€ ê³³", "ë§Œë‚˜ ë³´ê³  ì‹¶ì€ ì‚¬ëŒ"], eng_parts: ["On the other hand, one woman said, 'It's right to enjoy life while just doing ", ".'"], eng_answer: "what I want to try", eng_hint: "(í‘œí˜„) í‰ì†Œì— í•˜ê³  ì‹¶ì—ˆë˜ ì¼. (Expression) Things one usually wanted to try.", eng_explanation: "Correct. She says she wants to enjoy life 'í‰ì†Œì— í•˜ê³  ì‹¶ë˜ ê±° í•˜ë©´ì„œ' (while doing things she usually wanted to try). 'í•´ ë³´ê³  ì‹¶ì€ ê²ƒ' is the best fit.", eng_wrongAnswerExplanations: { "ì‚¬ ë³´ê³  ì‹¶ì€ ê²ƒ": "'ì‚¬ ë³´ê³  ì‹¶ì€ ê²ƒ' means 'what I want to try buying'.", "ê°€ ë³´ê³  ì‹¶ì€ ê³³": "'ê°€ ë³´ê³  ì‹¶ì€ ê³³' means 'the place I want to try going'.", "ë§Œë‚˜ ë³´ê³  ì‹¶ì€ ì‚¬ëŒ": "'ë§Œë‚˜ ë³´ê³  ì‹¶ì€ ì‚¬ëŒ' means 'the person I want to try meeting'." } },
                    { id: 10, parts: ["ì´ì²˜ëŸ¼ ì‚¬ëŒë§ˆë‹¤ '", "' ì‹¶ì€ ë¯¸ë˜ì˜ ëª¨ìŠµì€ ëª¨ë‘ ë‹¬ë¼ìš”."], answer: "ì‚´ì•„ê°€ê³ ", bank: ["ì‚´ì•„ê°€ê³ ", "ë„ì „í•˜ê³ ", "ì‹¤í—˜í•˜ê³ ", "ì‹œì‘í•˜ê³ "], eng_parts: ["Like this, everyone has a different vision of the future they want to '", ".'"], eng_answer: "live", eng_hint: "(ë™ì‚¬) 'ì‚´ë‹¤'ì˜ ê³„ì†ë˜ëŠ” ëŠë‚Œ. (Verb) A continuous feeling of 'to live'.", eng_explanation: "Correct. 'ì‚´ì•„ê°€ê³  ì‹¶ì€ ë¯¸ë˜' (the future one wants to live) refers to the way of life, matching the operator's question.", eng_wrongAnswerExplanations: { "ë„ì „í•˜ê³ ": "'ë„ì „í•˜ê³ ' means 'challenging'.", "ì‹¤í—˜í•˜ê³ ": "'ì‹¤í—˜í•˜ê³ ' means 'experimenting'.", "ì‹œì‘í•˜ê³ ": "'ì‹œì‘í•˜ê³ ' means 'starting'." } }
                ];
                
                const discussionQuestions = [
                    { num: 1, kor: "â€˜ê¿ˆâ€™ì€ ë¬´ì—‡ì¼ê¹Œìš”? ê¿ˆì€ 'ì–´ë ¸ì„ ë•Œë¶€í„° ê³„ì† ì›í–ˆë˜ ê²ƒ'ì´ì–´ì•¼ í• ê¹Œìš”?", eng: "What is a 'dream'? Does a dream have to be 'something you've wanted continuously since you were young'?", vocab: [ { term: "ê¿ˆ", meaning_eng: "Dream" }, { term: "ì–´ë ¸ì„ ë•Œë¶€í„°", meaning_eng: "Since one was young" }, { term: "ê³„ì† ì›í–ˆë˜ ê²ƒ", meaning_eng: "Something one has continuously wanted" } ] },
                    { num: 2, kor: "ì—¬ëŸ¬ë¶„ì€ í•œ ê°€ì§€ ì¼ì„ 'ê¾¸ì¤€íˆ í•˜ëŠ”' í¸ì´ì—ìš”, ì•„ë‹ˆë©´ ì—¬ëŸ¬ ê°€ì§€ë¥¼ 'ì°ë¨¹'í•˜ëŠ” 'ì°ë¨¹íŒŒ'ì˜ˆìš”?", eng: "Are you the type to do one thing 'consistently', or are you 'Team Dip' ('jjikmeok-pa') who 'dips' into (tries) many things?", vocab: [ { term: "ê¾¸ì¤€íˆ í•˜ë‹¤", meaning_eng: "To do consistently" }, { term: "-ëŠ” í¸ì´ë‹¤", meaning_eng: "To be the type to..." }, { term: "ì°ë¨¹í•˜ë‹¤", meaning_eng: "(Literal) To dip food into sauce; (Figurative) To dabble in something" }, { term: "ì°ë¨¹íŒŒ", meaning_eng: "Team Dip / Team Dabble" } ] },
                    { num: 3, kor: "í•œ ì—¬ìëŠ” ì—¬í–‰ì„ ì¢‹ì•„í•´ì„œ â€œì—¬í–‰ ìƒí’ˆì„ ë§Œë“¤ì–´ ë³´ê³  ì‹¶ë‹¤â€ê³  ë§í–ˆì–´ìš”. ì—¬ëŸ¬ë¶„ë„ â€˜ì¢‹ì•„í•˜ëŠ” ê²ƒì„â€™ ì¼ë¡œ ë§Œë“¤ê³  ì‹¶ì–´ìš”?", eng: "A woman said she likes traveling so she \"wants to try making travel products.\" Do you also want to turn 'what you like' into a job?", vocab: [ { term: "ì—¬í–‰ ìƒí’ˆ", meaning_eng: "Travel product" }, { term: "ë§Œë“¤ì–´ ë³´ê³  ì‹¶ë‹¤", meaning_eng: "To want to try making" }, { term: "ì¢‹ì•„í•˜ëŠ” ê²ƒ", meaning_eng: "What one likes" }, { term: "ì¼ë¡œ ë§Œë“¤ë‹¤", meaning_eng: "To turn into a job" } ] },
                    { num: 4, kor: "ë‹¤ë¥¸ ì—¬ìëŠ” 'ë„ì „í•˜ê³  ì‹¤í—˜í•˜ëŠ” íŠ¹ì„±'ì„ 'ì˜ ì‚´ë¦¬ê³ ' ì‹¶ë‹¤ê³  ë§í–ˆì–´ìš”. ì—¬ëŸ¬ë¶„ì´ 'ì˜ ì‚´ë¦¬ê³ ' ì‹¶ì€ 'íŠ¹ì„±'ì€ ë­ì˜ˆìš”?", eng: "Another woman said she wants to 'make good use of' her 'characteristic of challenging and experimenting'. What 'characteristic' of yours do you want to 'make good use of'?", vocab: [ { term: "ë„ì „í•˜ê³  ì‹¤í—˜í•˜ëŠ” íŠ¹ì„±", meaning_eng: "Characteristic of challenging and experimenting" }, { term: "ì˜ ì‚´ë¦¬ë‹¤", meaning_eng: "To make good use of; to utilize well" }, { term: "íŠ¹ì„±", meaning_eng: "Characteristic; trait" } ] },
                    { num: 5, kor: "í•œ ë‚¨ìëŠ” ì²­ì†Œ ì¼ì„ í•˜ë©´ì„œ â€œì²­ì†Œì— ëŒ€í•œ ì‚¬ëŒë“¤ì˜ ì¸ì‹ì„ ë°”ê¿”ê°€ê³  ì‹¶ë‹¤â€ê³  ë§í–ˆì–´ìš”. ì—¬ëŸ¬ë¶„ë„ 'ì‚¬ëŒë“¤ì˜ ì¸ì‹ì„ ë°”ê¾¸ëŠ” ì¼'ì„ í•˜ê³  ì‹¶ì–´ìš”?", eng: "A man who cleans said he \"wants to change people's perception of cleaning.\" Do you also want to do 'work that changes people's perceptions'?", vocab: [ { term: "-ë©´ì„œ", meaning_eng: "used to mean â€œwhile â€¦â€ or â€œas â€¦,â€ showing that two actions happen at the same time" }, { term: "-ì— ëŒ€í•œ", meaning_eng: "about, or regarding" }, { term: "ì¸ì‹ì„ ë°”ê¿”ê°€ë‹¤", meaning_eng: "To (continuously) change the perception" }, { term: "ì¸ì‹ì„ ë°”ê¾¸ëŠ” ì¼", meaning_eng: "Work that changes perception" } ] },
                    { num: 6, kor: "â€˜ê¿ˆâ€™ì€ â€˜ë‚­ë§Œì ì¸ ì¼â€™ì´ë¼ê³  ìƒê°í•´ìš”? ì—¬ëŸ¬ë¶„ì´ ìƒê°í•˜ëŠ” 'ë‚­ë§Œ'ì€ ë­ì˜ˆìš”?", eng: "Do you think a 'dream' is a 'romantic job/thing'? What is 'romance/idealism' to you?", vocab: [ { term: "ê¿ˆ", meaning_eng: "Dream" }, { term: "ë‚­ë§Œì ì¸ ì¼", meaning_eng: "A romantic thing / job" }, { term: "ë‚­ë§Œ", meaning_eng: "idealistic and beautiful dreams or wishes; romantic ideals about life." } ] },
                    { num: 7, kor: "ì–´ë–¤ ì‚¬ëŒë“¤ì€ â€˜ê±°ëŒ€í•œ ê¿ˆâ€™ì„ ê°€ì§€ê³ , ì–´ë–¤ ì‚¬ëŒë“¤ì€ â€˜ì†Œì†Œí•˜ê²Œ í•˜ê³  ì‹¶ë˜ ê²ƒâ€™ì„ í•˜ë©´ì„œ ì‚´ì•„ìš”. ì—¬ëŸ¬ë¶„ì€ ì–´ë–¤ ì‚¶ì„ ì›í•´ìš”?", eng: "Some people have 'huge dreams', and some people live while doing 'small things they've wanted to do'. What kind of life do you want?", vocab: [ { term: "ê±°ëŒ€í•œ ê¿ˆ", meaning_eng: "A huge dream" }, { term: "ê¿ˆì„ ê°€ì§€ë‹¤", meaning_eng: "to have a dream" }, { term: "ì†Œì†Œí•˜ê²Œ í•˜ê³  ì‹¶ë˜ ê²ƒ", meaning_eng: "Small things one wanted to do" }, { term: "-ì„/ë¥¼ í•˜ë©´ì„œ ì‚´ì•„ìš”", meaning_eng: "â€œI live my life doing â€¦â€, â€œI go through life â€¦ingâ€" }, { term: "ì–´ë–¤ ì‚¶", meaning_eng: "What kind of life" } ] },
                    { num: 8, kor: "ì—¬ëŸ¬ë¶„ì€ ì§€ê¸ˆ â€˜ì›ë˜ í•˜ê³  ì‹¶ì—ˆë˜ ì¼(ê³µë¶€)â€™ì„ í•˜ê³  ìˆì–´ìš”? ì•„ë‹ˆë©´ â€˜ë‹¤ë¥¸ ì¼(ê³µë¶€)â€™ì„ í•˜ê³  ìˆì–´ìš”?", eng: "Are you doing the 'work (study) you originally wanted to do' right now? Or are you doing 'different work (study)'?", vocab: [ { term: "ì›ë˜ í•˜ê³  ì‹¶ì—ˆë˜ ì¼", meaning_eng: "The work one originally wanted to do" }, { term: "ë‹¤ë¥¸ ì¼", meaning_eng: "Different work" } ] },
                    { num: 9, kor: "ë¯¸ë˜ì— ì—¬ëŸ¬ë¶„ì€ â€œì´ëŸ° ê²ƒë“¤ì„ í•˜ë©´ì„œ ì‚´ì•„ê°€ê³  ì‹¶ë‹¤â€ê³  ìƒê°í•˜ëŠ” ê²ƒë“¤ì´ ìˆì–´ìš”? ë­ì˜ˆìš”?", eng: "Are there things you think, \"I want to live my life doing these things\" in the future? What are they?", vocab: [ { term: "ë¯¸ë˜ì—", meaning_eng: "In the future" }, { term: "-ì„/ë¥¼ í•˜ë©´ì„œ ì‚´ì•„ê°€ë‹¤", meaning_eng: "â€œto live oneâ€™s life while doing â€¦â€, â€œto go through life doing â€¦â€" }, { term: "-ê³  ìƒê°í•˜ëŠ” ê²ƒ", meaning_eng: "â€œthinking that â€¦â€" } ] },
                    { num: 10, kor: "ë§Œì•½ì— ì—¬ëŸ¬ë¶„ì´ 'ì§€ê¸ˆ í•˜ëŠ” ì¼' ì™¸ì— ë‹¤ë¥¸ ê±¸ ë‹¹ì¥ í•´ ë³´ê³  ì‹¶ë‹¤ë©´, ë¬´ìŠ¨ ì¼ì„ í•˜ê³  ì‹¶ì–´ìš”?", eng: "If you wanted to try doing something else 'right now' besides 'what you do now', what would you want to do?", vocab: [ { term: "ì§€ê¸ˆ í•˜ëŠ” ì¼ ì™¸ì—", meaning_eng: "Besides the work (you) do now" }, { term: "ë‹¹ì¥", meaning_eng: "Right now" }, { term: "í•´ ë³´ê³  ì‹¶ë‹¤ë©´", meaning_eng: "If (you) want to try doing" } ] }
                ];
                
                return { scriptContent, vocabAndGrammarList, sentences, discussionQuestions };
            }, []);

            const { vocabMap, highlightData } = useMemo(() => {
                const vocabMap = new Map(vocabAndGrammarList.map(item => [item.term, item]));
                const wordMap = new Map();
                vocabAndGrammarList.forEach(item => wordMap.set(item.term, item));
                const allWords = Array.from(wordMap.keys()).sort((a, b) => b.length - a.length);
                const regexParts = [];
                allWords.forEach(word => {
                    const item = wordMap.get(word);
                    if (item.variants) item.variants.forEach(v => regexParts.push(v.replace(/[.*+?^${}()|[\]\\]/g, '\\$&')));
                    let processed = word.replace(/[.*+?^${}()|[\]\\]/g, '\\$&').replace(/\s+/g, '\\s*');
                    if (word.endsWith('ë‹¤')) {
                        const parts = word.split(' ');
                        const lastPart = parts[parts.length - 1];
                        if (lastPart.endsWith('ë‹¤')) {
                            const stem = lastPart.slice(0, -1).replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                            const firstParts = parts.slice(0, -1).map(p => p.replace(/[.*+?^${}()|[\]\D]/g, '\\$&'));
                            regexParts.push([...firstParts, `${stem}[ê°€-í£]*`].join('\\s*'));
                        } else { regexParts.push(`${processed.slice(0, -1)}[ê°€-í£]*`); }
                    } else { regexParts.push(processed); }
                });
                const regexString = [...new Set(regexParts)].sort((a,b) => b.length - a.length).join('|');
                return { vocabMap, highlightData: { regex: new RegExp(`(${regexString})`, 'g'), wordMap, sortedWords: allWords }};
            }, [vocabAndGrammarList]);

            const tabs = useMemo(() => {
                const baseTabs = [
                    { id: 'script', name: <><span className="">ëŒ€í™” ìŠ¤í¬ë¦½íŠ¸</span><span className="text-gray-400">(Transcript)</span></>, icon: <Video className="w-5 h-5"/>, content: <VideoMaterialsTab scriptContent={scriptContent} vocabAndGrammarList={vocabAndGrammarList} highlightData={highlightData} vocabMap={vocabMap} layoutMode={layoutMode} /> },
                    { id: 'vocab', name: <><span className="">í•µì‹¬ ì–´íœ˜</span><span className="text-gray-400">(Key Vocabulary)</span></>, icon: <List className="w-5 h-5"/>, content: (
                        <div>
                            <h2 className="text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3"><List className="w-8 h-8 text-green-600"/> í•µì‹¬ ì–´íœ˜ (Key Vocabulary)</h2>
                            <div className="w-full overflow-y-auto" style={{maxHeight: `calc(100vh - 150px)`}}>
                                <div className="border rounded-lg bg-white p-2 shadow-lg">
                                    <div className="space-y-1">{vocabAndGrammarList.map(item => <VocabItem key={item.term} item={item} />)}</div>
                                </div>
                            </div>
                        </div>
                    )},
                    { id: 'quiz', name: <><span className="">ë‚´ìš© í™•ì¸ í€´ì¦ˆ</span><span className="text-gray-400">(Comprehension Check-Up)</span></>, icon: <BookOpen className="w-5 h-5"/>, content: (
                        <div>
                            <h2 className="text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3"><BookOpen className="w-8 h-8 text-green-600"/> ë‚´ìš© í™•ì¸ í€´ì¦ˆ (Comprehension Check-Up)</h2>
                            <ComprehensionQuiz sentences={sentences} />
                        </div>
                    )},
                    { id: 'discussion', name: <><span className="">ìƒê°í•´ ë³´ê¸°</span><span className="text-gray-400">(Food For Thought)</span></>, icon: <MessageSquare className="w-5 h-5"/>, content: (
                        <div>
                            <h2 className="text-3xl font-extrabold text-gray-900 mb-8 flex items-center gap-3"><MessageSquare className="w-8 h-8 text-green-600"/> ìƒê°í•´ ë³´ê¸° (Food For Thought)</h2>
                            <DiscussionSection questions={discussionQuestions} />
                        </div>
                    ) }
                ];
                return baseTabs;
            }, [layoutMode, scriptContent, vocabAndGrammarList, sentences, discussionQuestions, highlightData, vocabMap]);

            return (
                <div className="bg-gray-50 text-gray-800 p-4 sm:p-6 md:p-8">
                    <div className="mx-auto transition-all duration-300" style={{ maxWidth: containerWidth }}>
                        <header className="text-center mb-12">
                            <h1 className="font-black text-gray-900 mb-2 whitespace-nowrap" style={{ fontSize: 'clamp(1.875rem, 5vw, 3rem)' }}>ì—¬ëŸ¬ë¶„ë“¤ì˜ ì›ë˜ ê¿ˆì€ ë¬´ì—‡ì¸ê°€ìš”?</h1>
                            <p className="text-gray-500" style={{fontFamily: "'Nanum Gothic', sans-serif", fontSize: 'clamp(1rem, 3vw, 1.25rem)'}}>What were your original dreams?</p>
                        </header>
                        <Tabs tabs={tabs} />
                    </div>
                </div>
            );
        };
        
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
